<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
<title>Progettazione e Sviluppo del Software</title>
<meta name="description" content="Progettazione e Sviluppo del Software, Tecnologie dei Sistemi Informatici">
<meta name="author" content="Danilo Pianini">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/css/custom-theme.min.c5d5307c22aeba26e5f63813bdbc90c5483e809383467a8e6f523d7f756010c5.css" id="theme"><link rel="stylesheet" href="/highlight-js/default.min.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="classi-astratte">Classi astratte</h1>
<h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="danilo-pianini"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini — <code>danilo.pianini@unibo.it</code></a></h3>
<h3 id="gianluca-aguzzi"><a href="mailto:gianluca.aguzzi@unibo.it">Gianluca Aguzzi — <code>gianluca.aguzzi@unibo.it</code></a></h3>
<h3 id="angelo-filaseta"><a href="mailto:angelo.filaseta@unibo.it">Angelo Filaseta — <code>angelo.filaseta@unibo.it</code></a></h3>
<p>Compiled on: 2025-11-19
 — <a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
<p><a href=".."><i class="fa fa-undo" aria-hidden="true"></i> back</a></p>
</section><section>
<h2 id="outline">Outline</h2>
<h3 id="goal-della-lezione">Goal della lezione</h3>
<ul>
<li>Capire il concetto di <em>classe astratta</em> in Java</li>
<li>Capire come e quando usarle</li>
<li>Introdurre il pattern <em>Template Method</em></li>
</ul>
<h3 id="argomenti">Argomenti</h3>
<ul>
<li>Classi astratte: motivazioni, sintassi, esempi</li>
<li>Argomenti variabili</li>
<li>Pattern Template Method basato su classi astratte</li>
</ul>
</section><section>
<h1 id="classi-astratte-1">Classi astratte</h1>
</section><section>
<h2 id="motivazioni">Motivazioni</h2>
<h3 id="fra-interfacce-e-classi">Fra interfacce e classi</h3>
<ul>
<li>Le interfacce descrivono solo un contratto</li>
<li>Le classi definiscono un comportamento completo</li>
<li>…c’è margine per costrutti intermedi?</li>
</ul>
<h3 id="classi-astratte-2">Classi astratte</h3>
<ul>
<li>Le <strong>classi astratte</strong> sono usate per descrivere classi dal <em>comportamento parziale</em> (ossia, in cui alcuni metodi sono dicharati ma non implementati)</li>
<li>Tali classi <em>non sono istanziabili</em> (l’operatore <code>new</code> non può essere usato)</li>
<li>Possono essere estese e ivi completate, da cui la generazione di oggetti</li>
</ul>
<h3 id="tipica-applicazione-pattern-template-method">Tipica applicazione: pattern <em>Template Method</em></h3>
<p>Serve a dichiare uno <em>schema di strategia</em> con un <strong>metodo “template”</strong> (spesso <code>final</code>) che definisce un comportamento comune, <em>basato su metodi astratti</em> da concretizzare in sottoclassi</p>
</section><section>
<h2 id="classi-astratte-3">Classi astratte</h2>
<h3 id="una-classe-astratta">Una classe astratta:</h3>
<ul>
<li>è dichiarata tale: <code>abstract class C ... { ... }</code></li>
<li><em>non è istanziabile</em> (in quanto astratta, ovvero non pienamente specificata)</li>
<li>può opzionalmente dichiarare <em>metodi astratti</em>:
<ul>
<li>hanno forma ad esempio: <code>abstract int m(int a, String s);</code></li>
<li>ossia senza body, come nelle dichiarazioni delle interfacce</li>
</ul>
</li>
</ul>
<h3 id="altri-aspetti">Altri aspetti</h3>
<ul>
<li>può definire campi, costruttori, metodi, concreti e non
<ul>
<li>…deve definire con cura il loro livello d’accesso</li>
</ul>
</li>
<li>può estendere da una classe astratta o non astratta</li>
<li>può implementare interfacce, senza essere tenuta ad ottemperarne il contratto
<ul>
<li>i metodi dell’interfaccia implementata, se non implementati, sono astratti</li>
</ul>
</li>
<li><em>chi estende una classe astratta può essere non-astratto solo se concretizza/implementa tutti i metodi astratti</em></li>
</ul>
</section><section>
<h2 id="esempio-limitedlamp-come-classe-astratta">Esempio: <code>LimitedLamp</code> come classe astratta</h2>
<h3 id="obiettivo">Obiettivo</h3>
<ul>
<li>Vogliamo progettare una estensione di <code>SimpleLamp</code> col concetto di esaurimento</li>
<li>La strategia con la quale gestire tale esaurimento può essere varia</li>
<li>Ma bisogna far sì che qualunque strategia si specifichi, sia garantito che:
<ul>
<li>la lampadina si accenda solo se non esaurita</li>
<li>in caso di effettiva accensione sia possibile tenerne traccia ai fini della strategia</li>
</ul>
</li>
</ul>
<h3 id="soluzione">Soluzione</h3>
<ul>
<li>Un uso accurato di <code>abstract</code>, <code>final</code>, e <code>protected</code></li>
<li>Daremo tre possibili specializzazioni per una <code>LimitedLamp</code>
<ol>
<li>che non si esaurisce mai</li>
<li>che si esaurisce all’n-esima accensione</li>
<li>che si esaurisce dopo un certo tempo dalla prima accensione</li>
</ol>
</li>
</ul>
</section><section>
<h2 id="uml-complessivo">UML complessivo</h2>
<p><img src="imgs/uml-abstract.png" alt=""></p>
</section><section>
<h2 id="simplelamp"><code>SimpleLamp</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">SimpleLamp</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">switchedOn</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">SimpleLamp</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">true</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOff</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isSwitchedOn</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="limitedlamp"><code>LimitedLamp</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">abstract</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">LimitedLamp</span> <span style="color:#a90d91">extends</span> <span style="color:#000">SimpleLamp</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">LimitedLamp</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">super</span>();
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Questo metodo è finale: regola la coerenza con okSwitch() e isOver() */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>() { <span style="color:#177500">// TEMPLATE METHOD</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> (<span style="color:#000">!</span><span style="color:#a90d91">this</span>.<span style="color:#836c28">isSwitchedOn</span>() <span style="color:#000">&amp;&amp;</span> <span style="color:#000">!</span><span style="color:#a90d91">this</span>.<span style="color:#836c28">isOver</span>()) {
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">super</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">this</span>.<span style="color:#836c28">okSwitch</span>();
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">// Cosa facciamo se abbiamo effettivamente acceso? Dipende dalla strategia</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">protected</span> <span style="color:#a90d91">abstract</span> <span style="color:#a90d91">void</span> <span style="color:#000">okSwitch</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Strategia per riconoscere se la lamp è esaurita */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">abstract</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isOver</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">toString</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#c41a16">"Over: "</span> <span style="color:#000">+</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">isOver</span>() <span style="color:#000">+</span> <span style="color:#c41a16">", switchedOn: "</span>	<span style="color:#000">+</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">isSwitchedOn</span>();
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="unlimitedlamp"><code>UnlimitedLamp</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">/* Non si esaurisce mai */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UnlimitedLamp</span> <span style="color:#a90d91">extends</span> <span style="color:#000">LimitedLamp</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Nessuna informazione extra da tenere */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">UnlimitedLamp</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">super</span>();
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Allo switchOn.. non faccio nulla */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">protected</span> <span style="color:#a90d91">void</span> <span style="color:#000">okSwitch</span>() {
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Non è mai esaurita */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isOver</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="countdownlamp"><code>CountdownLamp</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">/* Si esaurisce all'n-esima accensione */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">CountdownLamp</span> <span style="color:#a90d91">extends</span> <span style="color:#000">LimitedLamp</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Quanti switch mancano */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">int</span> <span style="color:#000">countdown</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">CountdownLamp</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">countdown</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">super</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">countdown</span> <span style="color:#000">=</span> <span style="color:#000">countdown</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Allo switchOn.. decremento il count */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">protected</span> <span style="color:#a90d91">void</span> <span style="color:#000">okSwitch</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">countdown</span><span style="color:#000">--</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Finito il count.. lamp esaurita */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isOver</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">countdown</span> <span style="color:#000">==</span> <span style="color:#000">0</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="expirationtimelamp"><code>ExpirationTimeLamp</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.util.Date</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Si esaurisce dopo un certo tempo (reale) dopo la prima accensione */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">ExpirationTimeLamp</span> <span style="color:#a90d91">extends</span> <span style="color:#000">LimitedLamp</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Tengo il momento dell'accensione e la durata */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#000">Date</span> <span style="color:#000">firstSwitchDate</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">long</span> <span style="color:#000">duration</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">ExpirationTimeLamp</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">long</span> <span style="color:#000">duration</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">super</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">duration</span> <span style="color:#000">=</span> <span style="color:#000">duration</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">firstSwitchDate</span> <span style="color:#000">=</span> <span style="color:#a90d91">null</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Alla prima accensione, registro la data */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">protected</span> <span style="color:#a90d91">void</span> <span style="color:#000">okSwitch</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> (<span style="color:#a90d91">this</span>.<span style="color:#836c28">firstSwitchDate</span> <span style="color:#000">==</span> <span style="color:#a90d91">null</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">this</span>.<span style="color:#836c28">firstSwitchDate</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">java</span>.<span style="color:#836c28">util</span>.<span style="color:#836c28">Date</span>();
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Esaurita se è passato troppo tempo */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isOver</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">firstSwitchDate</span> <span style="color:#000">!=</span> <span style="color:#a90d91">null</span> <span style="color:#000">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>		   (<span style="color:#a90d91">new</span> <span style="color:#000">Date</span>().<span style="color:#836c28">getTime</span>() <span style="color:#000">-</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">firstSwitchDate</span>.<span style="color:#836c28">getTime</span>() 
</span></span><span style="display:flex;"><span>				   <span style="color:#000">&gt;=</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">duration</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="uselamps"><code>UseLamps</code></h2>
<div class="smaller">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseLamps</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// clausola throws Exception qui sotto necessaria!!</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span>) <span style="color:#a90d91">throws</span> <span style="color:#000">Exception</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#000">LimitedLamp</span> <span style="color:#000">lamp</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">UnlimitedLamp</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000">lamp</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"ul| "</span> <span style="color:#000">+</span> <span style="color:#000">lamp</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">for</span> (<span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">0</span>; <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">1000</span>; <span style="color:#000">i</span><span style="color:#000">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#000">lamp</span>.<span style="color:#836c28">switchOff</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#000">lamp</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"ul| "</span> <span style="color:#000">+</span> <span style="color:#000">lamp</span>); <span style="color:#177500">// non si è esaurita</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">lamp</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">CountdownLamp</span>(<span style="color:#000">5</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">for</span> (<span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">0</span>; <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">4</span>; <span style="color:#000">i</span><span style="color:#000">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#000">lamp</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#000">lamp</span>.<span style="color:#836c28">switchOff</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"cl| "</span> <span style="color:#000">+</span> <span style="color:#000">lamp</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#000">lamp</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"cl| "</span> <span style="color:#000">+</span> <span style="color:#000">lamp</span>); <span style="color:#177500">// al quinto switch si esaurisce</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">lamp</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">ExpirationTimeLamp</span>(<span style="color:#000">1000</span>); <span style="color:#177500">// 1 sec</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">lamp</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"el| "</span> <span style="color:#000">+</span> <span style="color:#000">lamp</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#000">Thread</span>.<span style="color:#836c28">sleep</span>(<span style="color:#000">3000</span>); <span style="color:#177500">// attendo 1.1 secs</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"el| "</span> <span style="color:#000">+</span> <span style="color:#000">lamp</span>); <span style="color:#177500">// dopo 1.1 secs si è esaurita</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">lamp</span>.<span style="color:#836c28">switchOff</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000">lamp</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"el| "</span> <span style="color:#000">+</span> <span style="color:#000">lamp</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></div>
</section><section>
<h2 id="classi-astratte-vs-interfacce">Classi astratte vs interfacce</h2>
<ul>
<li>Due versioni quasi equivalenti</li>
<li>Unica differenza: ereditarietà singola per classi, ereditarietà multipla per le interfacce</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">/* Versione interfaccia */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Counter</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">increment</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">int</span> <span style="color:#000">getValue</span>();
</span></span><span style="display:flex;"><span>} 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Versione classe astratta */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">abstract</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Counter</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">abstract</span> <span style="color:#a90d91">void</span> <span style="color:#000">increment</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">abstract</span> <span style="color:#a90d91">int</span> <span style="color:#000">getValue</span>();
</span></span><span style="display:flex;"><span>} 
</span></span></code></pre></div></section><section>
<h2 id="approfondimento-classi-astratte-vs-interfacce-con-metodi-di-default">Approfondimento: classi astratte vs. interfacce con metodi di default</h2>
<p>Interfacce con metodi di default …</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">I4</span> <span style="color:#a90d91">extends</span> <span style="color:#000">I1</span>, <span style="color:#000">I2</span>, <span style="color:#000">I3</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">doSomething</span>(<span style="color:#000">String</span> <span style="color:#000">s</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// da Java 8</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">double</span> <span style="color:#000">E</span> <span style="color:#000">=</span> <span style="color:#000">2</span>.<span style="color:#836c28">718282</span>; <span style="color:#177500">// implicitamente public, static, final</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">default</span> <span style="color:#a90d91">void</span> <span style="color:#000">doSomethingTwice</span>(<span style="color:#000">String</span> <span style="color:#000">s</span>) { <span style="color:#000">doSomething</span>(<span style="color:#000">s</span>); <span style="color:#000">doSomething</span>(<span style="color:#000">s</span>); }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">static</span> <span style="color:#a90d91">double</span> <span style="color:#000">PI</span>() { <span style="color:#a90d91">return</span> <span style="color:#000">Math</span>.<span style="color:#836c28">PI</span>; }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>… sembrano piuttosto simili alle classi astratte, in quanto possono fornire, in aggiunta a un contratto, alcune implementazioni di default</p>
<p>Tuttavia, ci sono differenze cruciali:</p>
<ul>
<li>le classi astratte possono definire variabili d’istanza (stato)</li>
<li>le classi astratte possono definire costruttori</li>
<li>le classi astratte possono definire membri con visibilità diverse</li>
<li>le classi astratte possono fare overriding di metodi da <code>Object</code></li>
<li>i default method non possono essere <code>final</code></li>
</ul>
</section><section>
<h2 id="wrap-up-su-ereditarietà">Wrap-up su ereditarietà</h2>
<h3 id="il-caso-più-generale">Il caso più generale:</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">C</span> <span style="color:#a90d91">extends</span> <span style="color:#000">D</span> <span style="color:#a90d91">implements</span> <span style="color:#000">I</span>, <span style="color:#000">J</span>, <span style="color:#000">K</span>, <span style="color:#000">L</span> { ... }
</span></span></code></pre></div><h3 id="cosa-devepuò-fare-la-classe-c">Cosa deve/può fare la classe <code>C</code></h3>
<ul>
<li>deve implementare tutti i metodi dichiarati in <code>I,J,K,L</code> e super-interfacce</li>
<li>può fare overriding dei metodi (non finali) definiti in <code>D</code> e superclassi</li>
</ul>
<h3 id="classe-astratta">Classe astratta:</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">abstract</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">CA</span> <span style="color:#a90d91">extends</span> <span style="color:#000">D</span> <span style="color:#a90d91">implements</span> <span style="color:#000">I</span>, <span style="color:#000">J</span>, <span style="color:#000">K</span>, <span style="color:#000">L</span> { ... }
</span></span></code></pre></div><h3 id="cosa-devepuò-fare-la-classe-ca">Cosa deve/può fare la classe <code>CA</code></h3>
<ul>
<li>non è tenuta a implementare alcun metodo</li>
<li>può implementare qualche metodo per definire un comportamento parziale</li>
</ul>
</section><section>
<h1 id="argomenti-variabili">Argomenti variabili</h1>
</section><section>
<h2 id="variable-arguments">Variable arguments</h2>
<h3 id="a-volte-è-utile-che-i-metodi-abbiano-un-numero-variabile-di-argomenti">A volte è utile che i metodi abbiano un numero variabile di argomenti</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">sum</span>(<span style="color:#000">10</span>, <span style="color:#000">20</span>, <span style="color:#000">30</span>, <span style="color:#000">40</span>, <span style="color:#000">50</span>, <span style="color:#000">60</span>, <span style="color:#000">70</span>);
</span></span><span style="display:flex;"><span><span style="color:#000">printAll</span>(<span style="color:#000">10</span>, <span style="color:#000">20</span>, <span style="color:#000">3</span>.<span style="color:#836c28">5</span>, <span style="color:#a90d91">new</span> <span style="color:#000">Object</span>());
</span></span></code></pre></div><ul>
<li>prima di Java 5 si simulava passando un unico array</li>
</ul>
<h3 id="variable-arguments-1">Variable arguments</h3>
<ul>
<li>L’ultimo (o unico) argomento di un metodo può essere del tipo “<code>Type... argname</code>”</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">void</span> <span style="color:#000">m</span>(<span style="color:#a90d91">int</span> <span style="color:#000">a</span>, <span style="color:#a90d91">float</span> <span style="color:#000">b</span>, <span style="color:#000">Object</span>... <span style="color:#000">argname</span>) { ... }
</span></span></code></pre></div><ul>
<li>Nel body del metodo, <code>argname</code> è trattato come un <code>Type[]</code></li>
<li>Chi chiama il metodo, invece che passare un array, passa una lista di argomenti di tipo <code>Type</code></li>
<li>Funziona automaticamente con polimorfismo, autoboxing, <code>instanceof</code>, …</li>
</ul>
</section><section>
<h2 id="uso-dei-variable-arguments">Uso dei variable arguments</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">VarArgs</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#177500">// somma un numero variabile di Integer</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">sum</span>(<span style="color:#a90d91">final</span> <span style="color:#000">Integer</span>... <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">int</span> <span style="color:#000">sum</span> <span style="color:#000">=</span> <span style="color:#000">0</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> (<span style="color:#a90d91">int</span> <span style="color:#000">i</span> : <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#000">sum</span> <span style="color:#000">=</span> <span style="color:#000">sum</span> <span style="color:#000">+</span> <span style="color:#000">i</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#000">sum</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">// stampa il contenuto degli argomenti, se meno di 10</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">printAll</span>(<span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">start</span>, <span style="color:#a90d91">final</span> <span style="color:#000">Object</span>... <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">start</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> (<span style="color:#000">args</span>.<span style="color:#836c28">length</span> <span style="color:#000">&lt;</span> <span style="color:#000">10</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">for</span> (<span style="color:#a90d91">final</span> <span style="color:#000">Object</span> <span style="color:#000">o</span> : <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>				<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">o</span>);
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">sum</span>(<span style="color:#000">10</span>, <span style="color:#000">20</span>, <span style="color:#000">30</span>, <span style="color:#000">40</span>, <span style="color:#000">50</span>, <span style="color:#000">60</span>, <span style="color:#000">70</span>, <span style="color:#000">80</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#000">printAll</span>(<span style="color:#c41a16">"inizio"</span>, <span style="color:#000">1</span>, <span style="color:#000">2</span>, <span style="color:#000">3</span>.<span style="color:#836c28">2</span>, <span style="color:#a90d91">true</span>, <span style="color:#a90d91">new</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span> { <span style="color:#000">10</span> }, <span style="color:#a90d91">new</span> <span style="color:#000">Object</span>());
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">format</span>(<span style="color:#c41a16">"%d %d\n"</span>, <span style="color:#000">10</span>, <span style="color:#000">20</span>); <span style="color:#177500">// C-like printf</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h1 id="alcuni-pattern-basati-sulle-classe-astratte">Alcuni pattern basati sulle classe astratte</h1>
</section><section>
<h2 id="pattern-template-method-comportamentale-su-classi">Pattern <strong>Template Method</strong>: comportamentale, su classi</h2>
<h3 id="intentomotivazione">Intento/motivazione</h3>
<p>Definisce lo scheletro (template) di un algoritmo (o comportamento), lasciando l’indicazione di alcuni suoi aspetti alle sottoclassi.</p>
<h3 id="esempi">Esempi</h3>
<ul>
<li>Definizione della logica di accensione (<code>switchOn</code>) di una lampadina (<code>Lamp</code>)</li>
<li>Un comparatore può fornire metodi template per capire se un oggetto è minore/maggiore/uguale di un altro, sulla base di un metodo astratto <code>int compareTo(T a, T b)</code></li>
</ul>
<!--
* Implementazione del pattern **Factory Method**: il metodo template usa un factory method per definire un comportamento astraendo dall'implementazione specifica di uno o più oggetti coinvolti
* In un input stream (`InputStream`), i vari metodi di lettura sono dei Template Method: dipendono dall'implementazione del solo concetto di lettura di un `int`
	%*  Similmente, i metodi di `AbstractSet` tranne `size()` e `iterator()`
	*  Le interfacce funzionali con metodi di default che chiamano l'astratto
    }}
-->
<h3 id="soluzione-1">Soluzione</h3>
<ul>
<li>L’algoritmo è realizzato attraverso un <strong>metodo template</strong> che <em>realizza un algoritmo chiamando metodi astratti/da specializzare</em> quando servono gli aspetti non noti a priori</li>
<li>Una sottoclasse fornisce l’implementazione dei metodi astratti</li>
</ul>
<!--
* L'algoritmo è realizzato attraverso un metodo non astratto (il template method) di una classe astratta
* Questo realizza l'algoritmo, chiamando metodi astratti quando servono gli aspetti non noti a priori
* Una sottoclasse fornisce l'implementazione dei metodi astratti
-->
</section><section>
<!-- ![](imgs/template_method.jpg) -->
<div class="container">
<div class="col">
<div class="mermaid" data-processed="true" pre-rendered="true"><svg aria-roledescription="classDiagram" role="graphics-document document" viewBox="0 0 159.953125 290" style="max-width: 159.953125px;" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg g.classGroup text{fill:#9370DB;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#my-svg g.classGroup text .title{font-weight:bolder;}#my-svg .nodeLabel,#my-svg .edgeLabel{color:#131300;}#my-svg .edgeLabel .label rect{fill:#ECECFF;}#my-svg .label text{fill:#131300;}#my-svg .edgeLabel .label span{background:#ECECFF;}#my-svg .classTitle{font-weight:bolder;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .divider{stroke:#9370DB;stroke-width:1;}#my-svg g.clickable{cursor:pointer;}#my-svg g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#my-svg g.classGroup line{stroke:#9370DB;stroke-width:1;}#my-svg .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#my-svg .classLabel .label{fill:#9370DB;font-size:10px;}#my-svg .relation{stroke:#333333;stroke-width:1;fill:none;}#my-svg .dashed-line{stroke-dasharray:3;}#my-svg .dotted-line{stroke-dasharray:1 2;}#my-svg #compositionStart,#my-svg .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#my-svg #compositionEnd,#my-svg .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#my-svg #dependencyStart,#my-svg .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#my-svg #dependencyStart,#my-svg .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#my-svg #extensionStart,#my-svg .extension{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#my-svg #extensionEnd,#my-svg .extension{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#my-svg #aggregationStart,#my-svg .aggregation{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#my-svg #aggregationEnd,#my-svg .aggregation{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#my-svg #lollipopStart,#my-svg .lollipop{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#my-svg #lollipopEnd,#my-svg .lollipop{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#my-svg .edgeTerminals{font-size:11px;line-height:initial;}#my-svg .classTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="18" class="marker aggregation classDiagram" id="my-svg_classDiagram-aggregationStart"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="1" class="marker aggregation classDiagram" id="my-svg_classDiagram-aggregationEnd"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="18" class="marker extension classDiagram" id="my-svg_classDiagram-extensionStart"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="1" class="marker extension classDiagram" id="my-svg_classDiagram-extensionEnd"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="18" class="marker composition classDiagram" id="my-svg_classDiagram-compositionStart"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="1" class="marker composition classDiagram" id="my-svg_classDiagram-compositionEnd"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="6" class="marker dependency classDiagram" id="my-svg_classDiagram-dependencyStart"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="13" class="marker dependency classDiagram" id="my-svg_classDiagram-dependencyEnd"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="13" class="marker lollipop classDiagram" id="my-svg_classDiagram-lollipopStart"><circle r="6" cy="7" cx="7" fill="transparent" stroke="black"></circle></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="1" class="marker lollipop classDiagram" id="my-svg_classDiagram-lollipopEnd"><circle r="6" cy="7" cx="7" fill="transparent" stroke="black"></circle></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-start="url(#my-svg_classDiagram-extensionStart)" style="fill:none" class="edge-pattern-solid relation" id="id_AbstractClass_ConcreteClass_1" d="M79.977,149L79.977,150.167C79.977,151.333,79.977,153.667,79.977,159C79.977,164.333,79.977,172.667,79.977,176.833L79.977,181"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(79.9765625, 69.5)" id="classId-AbstractClass-0" class="node default"><rect height="123" width="143.953125" y="-61.5" x="-71.9765625" class="outer title-state" style=""></rect><line y2="-31.5" y1="-31.5" x2="71.9765625" x1="-71.9765625" class="divider"></line><line y2="-15.5" y1="-15.5" x2="71.9765625" x1="-71.9765625" class="divider"></line><g class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"></span></div></foreignObject><foreignObject transform="translate( -53.8046875, -54)" height="18" width="107.609375" class="classTitle"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">AbstractClass</span></div></foreignObject><foreignObject transform="translate( -64.4765625, -8)" height="18" width="128.953125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">TemplateMethod()</span></div></foreignObject><foreignObject transform="translate( -64.4765625, 14)" height="18" width="102.234375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">PrimitiveOp1()</span></div></foreignObject><foreignObject transform="translate( -64.4765625, 36)" height="18" width="102.234375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">PrimitiveOp2()</span></div></foreignObject></g></g><g transform="translate(79.9765625, 231.5)" id="classId-ConcreteClass-1" class="node default"><rect height="101" width="127.046875" y="-50.5" x="-63.5234375" class="outer title-state" style=""></rect><line y2="-20.5" y1="-20.5" x2="63.5234375" x1="-63.5234375" class="divider"></line><line y2="-4.5" y1="-4.5" x2="63.5234375" x1="-63.5234375" class="divider"></line><g class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"></span></div></foreignObject><foreignObject transform="translate( -56.0234375, -43)" height="18" width="112.046875" class="classTitle"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">ConcreteClass</span></div></foreignObject><foreignObject transform="translate( -56.0234375, 3)" height="18" width="102.234375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">PrimitiveOp1()</span></div></foreignObject><foreignObject transform="translate( -56.0234375, 25)" height="18" width="102.234375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">PrimitiveOp2()</span></div></foreignObject></g></g></g></g></g></svg></div>

</div>
<div class="col">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">abstract</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">AbstractClass</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">TemplateMethod</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#177500">// ...</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">PrimitiveOp1</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#177500">// ...</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">PrimitiveOp2</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#177500">// ...</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">abstract</span> <span style="color:#a90d91">void</span> <span style="color:#000">PrimitiveOp1</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">abstract</span> <span style="color:#a90d91">void</span> <span style="color:#000">PrimitiveOp2</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">ConcreteClass</span> <span style="color:#a90d91">extends</span> <span style="color:#000">AbstractClass</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">PrimitiveOp1</span>() { <span style="color:#177500">/* ... */</span> }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">PrimitiveOp2</span>() { <span style="color:#177500">/* ... */</span> }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></div></div>
</section><section>
<h2 id="template-method-esempio-bankaccount">Template Method: esempio <code>BankAccount</code></h2>
<div class="smaller">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">abstract</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">BankAccount</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">int</span> <span style="color:#000">amount</span>;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">BankAccount</span>(<span style="color:#a90d91">int</span> <span style="color:#000">amount</span>){
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">amount</span> <span style="color:#000">=</span> <span style="color:#000">amount</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">abstract</span> <span style="color:#a90d91">int</span> <span style="color:#000">operationFee</span>(); <span style="color:#177500">// costo bancario operazione</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">getAmount</span>(){
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">amount</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">withdraw</span>(<span style="color:#a90d91">int</span> <span style="color:#000">n</span>){	<span style="color:#177500">// template method</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">amount</span> <span style="color:#000">=</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">amount</span> <span style="color:#000">-</span> <span style="color:#000">n</span> <span style="color:#000">-</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">operationFee</span>();
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>){
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">BankAccount</span> <span style="color:#000">b</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">BankAccountWithConstantFee</span>(<span style="color:#000">100</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">b</span>.<span style="color:#836c28">withdraw</span>(<span style="color:#000">20</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">b</span>.<span style="color:#836c28">getAmount</span>()); <span style="color:#177500">// 79</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">BankAccountWithConstantFee</span> <span style="color:#a90d91">extends</span> <span style="color:#000">BankAccount</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">BankAccountWithConstantFee</span>(<span style="color:#a90d91">int</span> <span style="color:#000">amount</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">super</span>(<span style="color:#000">amount</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">operationFee</span>(){ <span style="color:#a90d91">return</span> <span style="color:#000">1</span>; }	
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></div>
</section><section>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">BankAccountFixedTax</span> <span style="color:#a90d91">extends</span> <span style="color:#000">AbstractBankAccount</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">BankAccountFixedTax</span>(<span style="color:#a90d91">int</span> <span style="color:#000">currentAmount</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">super</span>(<span style="color:#000">currentAmount</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">protected</span> <span style="color:#a90d91">int</span> <span style="color:#000">getTax</span>(<span style="color:#a90d91">int</span> <span style="color:#000">currentAmount</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">return</span> <span style="color:#000">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">BankAccountVariableTax</span> <span style="color:#a90d91">extends</span> <span style="color:#000">AbstractBankAccount</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">BankAccountVariableTax</span>(<span style="color:#a90d91">int</span> <span style="color:#000">currentAmount</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">super</span>(<span style="color:#000">currentAmount</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">protected</span> <span style="color:#a90d91">int</span> <span style="color:#000">getTax</span>(<span style="color:#a90d91">int</span> <span style="color:#000">currentAmount</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">return</span> (<span style="color:#000">currentAmount</span><span style="color:#000">&lt;</span><span style="color:#000">50</span> <span style="color:#000">?</span> <span style="color:#000">1</span> : <span style="color:#000">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h1 id="classi-astratte-4">Classi astratte</h1>
<h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="danilo-pianini"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini — <code>danilo.pianini@unibo.it</code></a></h3>
<h3 id="gianluca-aguzzi"><a href="mailto:gianluca.aguzzi@unibo.it">Gianluca Aguzzi — <code>gianluca.aguzzi@unibo.it</code></a></h3>
<h3 id="angelo-filaseta"><a href="mailto:angelo.filaseta@unibo.it">Angelo Filaseta — <code>angelo.filaseta@unibo.it</code></a></h3>
<p>Compiled on: 2025-11-19
 — <a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
<p><a href=".."><i class="fa fa-undo" aria-hidden="true"></i> back</a></p>
</section>

  


</div>
      

    </div>
<script type="text/javascript" src="/reveal-hugo/object-assign.js"></script>

<a href="/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"900","highlight_theme":"default","history":true,"mermaid":[{"startOnLoad":false}],"slide_number":true,"theme":"white","transition":"slide","transition_speed":"fast","width":"1440"}</script>
<script type="application/json" id="reveal-hugo-page-params">null</script>

<script src="/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }

  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = {
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>







  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
    
  
  

  
  

  
    
  
  

  
  

  
  

  
    
  
  

  
  

  
  

  
    
  
  

  
    
  
  

  
  

  
  

  
  

  
    
  
  

  
  

  
  

  
  

  
    
  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
    
  
  

  
  

  
  

  
    
  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



  <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.3/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({"startOnLoad":false});

    let render = (event) => {
      let mermaidElems = event.currentSlide.querySelectorAll('.mermaid');
      if (!mermaidElems.length){
          return
      }
      mermaidElems.forEach(mermaidElem => {
          let processed = mermaidElem.getAttribute('data-processed');
          if (!processed){
              
              mermaid.init(undefined, mermaidElem);
          }
      });
    };
    
    render({currentSlide: Reveal.getCurrentSlide()});

    Reveal.on('slidechanged', render);
    Reveal.on('ready', render);
  </script>



    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<script>
  if (/.*?(\?|&)print-pdf/.test(window.location.toString())) {
      var ytVideos = document.getElementsByTagName("iframe")
      for (let i = 0; i < ytVideos.length; i++) {
          var videoFrame = ytVideos[i]
          var isYouTube = /^https?:\/\/(www.)youtube\.com\/.*/.test(videoFrame.src)
          if (isYouTube) {
              console.log(`Removing ${videoFrame.src}`)
              var parent = videoFrame.parentElement
              videoFrame.remove()
              var p = document.createElement('p')
              p.append(
                  document.createTextNode(
                      "There was an embedded video here, but it is disabled in the printed version of the slides."
                  )
              )
              p.append(document.createElement('br'))
              p.append(
                  document.createTextNode(
                      `Visit instead ${
                          videoFrame.src
                      } or ${
                          videoFrame.src.replace(
                              /(^https?:\/\/(www.)youtube\.com)\/(embed\/)(\w+).*/,
                              "https://www.youtube.com/watch?v=$4"
                          )
                      }`
                  )
              )
              parent.appendChild(p)
          }
      }
  }
</script>

    
  

</body></html>