<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
<title>Progettazione e Sviluppo del Software</title>
<meta name="description" content="Progettazione e Sviluppo del Software, Tecnologie dei Sistemi Informatici">
<meta name="author" content="Danilo Pianini">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/css/custom-theme.min.64b25e8fc79cb2d6ebd4c0f19d110cd870679489e26e7e2cf19b4b743498a84c.css" id="theme"><link rel="stylesheet" href="/highlight-js/default.min.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="interfacce-e-composizione">Interfacce e composizione</h1>
<h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="roberto-casadei-----robycasadeiuniboitmailtorobycasadeiuniboit"><a href="mailto:roby.casadei@unibo.it">Roberto Casadei — <code>roby.casadei@unibo.it</code></a></h3>
<h3 id="angelo-filaseta-----angelofilasetauniboitmailtoangelofilasetauniboit"><a href="mailto:angelo.filaseta@unibo.it">Angelo Filaseta — <code>angelo.filaseta@unibo.it</code></a></h3>
<h3 id="gianluca-aguzzi-----gianlucaaguzziuniboitmailtogianlucaaguzziuniboit"><a href="mailto:gianluca.aguzzi@unibo.it">Gianluca Aguzzi — <code>gianluca.aguzzi@unibo.it</code></a></h3>
<p><a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a>
</p></section><section>
<h2 id="riconoscimenti">Riconoscimenti</h2>
<ul>
<li>
<p>Questo materiale è ampiamente basato su quello realizzato dal Prof.
Mirko Viroli, che ringrazio.</p>
</li>
<li>
<p>Ogni errore riscontratovi è esclusiva responsabilità degli autori di questo documento.</p>
</li>
</ul>
</section><section>
<h2 id="outline">Outline</h2>
<h3 id="goal-della-lezione">Goal della lezione</h3>
<ul>
<li>Illustrare concetti generali di <em>composizione</em> e <em>riuso</em></li>
<li>Introdurre il concetto di <em>interfaccia</em></li>
<li>Discutere il <em>principio di sostituibilità</em></li>
<li>Evidenziare il <em>polimorfismo</em> derivante dalle interfacce</li>
</ul>
<h3 id="argomenti">Argomenti</h3>
<ul>
<li>Tipi di composizione e loro realizzazione</li>
<li>Notazione UML</li>
<li><code>interface</code> in Java e meccanismi collegati</li>
<li>Polimorfismo con le interfacce</li>
</ul>
</section><section>
<h1 id="composizione-e-riuso">Composizione e riuso</h1>
</section><section>
<h2 id="intro">Intro</h2>
<p>L’<em>incapsulamento</em> ci fornisce i meccanismi per ben progettare le classi</p>
<ul>
<li>limitando il più possibile le dipendenze con chi le usa</li>
<li>e quindi riducendo l’impatto delle modifiche che si rendono via via necessarie.</li>
</ul>
<p>$\Rightarrow$ ma le dipendenze fra classi non sono evitabili del tutto</p>
<ul>
<li>anzi, sono un prerequisito per fare di un gruppo di classi un <em>sistema</em>!</li>
<li>in più, le dipendenze sono anche manifestazione di un effettivo <em>“riuso”</em>.</li>
</ul>
</section><section>
<h3 id="forme-di-dipendenza-e-riuso-fra-classi-nelloo">Forme di dipendenza e riuso fra classi nell’OO</h3>
<ul>
<li><strong>Associazione</strong>: un oggetto ne “usa” un altro (<em>“uses”</em>)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">A</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">B</span> <span style="color:#000">b</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>Composizione/aggregazione</strong>: un oggetto è “composto da” o “aggrega” altri oggetti (<em>“has-a”</em>)</li>
</ul>
<div class="container">
<div class="col">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">// Composizione</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">A</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">B</span> <span style="color:#000">b</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">A</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#000">b</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">B</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></div><div class="col">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">// Aggregazione</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">A</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">B</span> <span style="color:#000">b</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">A</span>(<span style="color:#000">B</span> <span style="color:#000">b</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#000">b</span> <span style="color:#000">=</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">b</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></div>
</div>
<ul>
<li><strong>Specializzazione</strong>: un oggetto “è una forma specializzata” di un altro tipo di oggetti (<em>“is-a”</em>)
<ul>
<li>la vedremo in futuro</li>
</ul>
</li>
</ul>
<h3 id="nella-lezione-corrente">Nella lezione corrente</h3>
<p>Introdurremo la composizione (che è una versione più forte della associazione), mostrando la sua relazione con le <em><strong>interface</strong></em> di Java</p>
</section><section>
<h2 id="composizione----relazione-has-a">Composizione – relazione “has-a”</h2>
<h3 id="idea">Idea</h3>
<ul>
<li>un oggetto della classe <code>A</code> è ottenuto <em>componendo</em> un insieme di altri oggetti, delle classi <code>B1</code>, <code>B2</code>, …, <code>Bn</code>
<ul>
<li>si dice che un oggetto di <code>A</code> <em>contiene</em>, o <em>si compone di</em>, o <em>aggrega</em>, oggetti delle classi <code>B1</code>, <code>B2</code>, …, <code>Bn</code></li>
</ul>
</li>
<li>ossia, lo stato dell’oggetto di <code>A</code> include <!-- le informazioni relative allo stato di --> un oggetto di <code>B1</code>, uno di  <code>B2</code>, …, uno di <code>Bn</code>
<ul>
<li>si noti che si parla propriamente di composizione quando <code>B1</code>, <code>B2</code>, …, <code>Bn</code> non sono tipi primitivi, ma classi</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">A</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">B1</span> <span style="color:#000">component1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">B2</span> <span style="color:#000">component2</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">A</span>(<span style="color:#000">B1</span> <span style="color:#000">b1</span>, ...) { ... }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h3 id="composizione-vs-aggregazione">Composizione vs. aggregazione</h3>
<ul>
<li>La distinzione si basa sul <em>ciclo di vita degli elementi contenuti rispetto al contenitore</em>
<ul>
<li><em><strong>Aggregazione</strong></em>: in <code>A</code>, gli oggetti composti hanno <em>vita propria e indipendente</em> da <code>A</code>
<ul>
<li>In pratica: sono spesso creati “fuori” da <code>A</code>, passati ad <code>A</code> all’atto di costruzione o via setter, e possono sopravvivere ad <code>A</code></li>
</ul>
</li>
<li><em><strong>Composizione</strong></em>: in <code>A</code>, gli oggetti composti hanno <em>vita vincolata</em> da <code>A</code>
<ul>
<li>In pratica: sono creati e distrutti entro <code>A</code></li>
</ul>
</li>
</ul>
</li>
<li>Esempi
<ul>
<li>Esempio di <em>aggregazione</em>: una <code>ClasseScolastica</code> aggrega un insieme di oggetti <code>Studente</code>; una <code>Automobile</code> ha un <code>Motore</code>, quattro oggetti <code>Ruota</code> etc.</li>
<li>Esempio di <em>composizione</em>: una <code>Casa</code> si compone di un insieme di oggetti <code>Stanza</code> (una stanza non ha vita indipendente dalla casa); un <code>Libro</code> si compone di più oggetti <code>Capitolo</code> (è vero, si potrebbe considerare un capitolo in isolamento, ma questo rimarrebbe comunque un capitolo di quel libro)</li>
</ul>
</li>
</ul>
<!-- * (ma non ci occuperemo per ora in dettaglio di questa distinzione) -->
</section><section>
<h2 id="qualche-esempio-di-composizione">Qualche esempio di composizione</h2>
<h3 id="gui">GUI</h3>
<p>Un oggetto interfaccia grafica si compone di oggetti di tipo <code>Button</code>, <code>TextField</code>, <code>Label</code>, eccetera</p>
<h3 id="ateneo">Ateneo</h3>
<p>Un oggetto ateneo si compone di oggetti di tipo <code>Facoltà</code>, <code>Studenti</code>, <code>Docenti</code>, eccetera</p>
<h3 id="controllore-domotica">Controllore Domotica</h3>
<p>Un oggetto controllore domotica si compone di oggetti di tipo <code>Lamp</code>, <code>TV</code>, <code>Radio</code>, eccetera</p>
</section><section>
<h2 id="tipiche-realizzazioni">Tipiche realizzazioni</h2>
<h3 id="un-oggetto-a-si-compone-esattamente-di-1-oggetto-di-b">Un oggetto <code>A</code> si compone <em>esattamente</em> di <em>1</em> oggetto di <code>B</code></h3>
<ul>
<li>La classe <code>A</code> avrà un campo (privato) di tipo <code>B</code></li>
<li>Tale campo (impostato dal costruttore di <code>A</code>) è sempre presente</li>
</ul>
<h3 id="un-oggetto-a-si-compone-opzionalmente-di-1-oggetto-di-b">Un oggetto <code>A</code> si compone <em>opzionalmente</em> di <em>1</em> oggetto di <code>B</code></h3>
<ul>
<li>La classe <code>A</code> avrà un campo (privato) di tipo <code>B</code></li>
<li>Il suo contenuto potrebbe essere <code>null</code> (oggetto di <code>B</code> assente)</li>
</ul>
<h3 id="un-oggetto-a-si-compone-di-un-numero-noto-n-di-oggetti-di-b">Un oggetto <code>A</code> si compone di un <em>numero noto</em> <em>$n$</em> di oggetti di <code>B</code></h3>
<ul>
<li>La classe <code>A</code> avrà $n$ campi (privati) di tipo <code>B</code> – se “n” piccolo</li>
</ul>
<h3 id="un-oggetto-a-si-compone-di-una-moltitudine-non-nota-di-oggetti-di-b">Un oggetto <code>A</code> si compone di una <em>moltitudine non nota</em> di oggetti di <code>B</code></h3>
<ul>
<li>La classe <code>A</code> avrà un campo (privato) di tipo <code>B[]</code> (o altro container)</li>
</ul>
</section><section>
<h2 id="ricordiamo-la-classe-lamp">Ricordiamo la classe Lamp</h2>
<div class="container">
<div class="col">
<div class="smaller">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Lamp</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#177500">/* Costanti luminosità */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">LEVELS</span> <span style="color:#000">=</span> <span style="color:#000">10</span>;
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">double</span> <span style="color:#000">DELTA</span> <span style="color:#000">=</span> <span style="color:#000">0</span>.<span style="color:#836c28">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#177500">/* Campi della classe */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">int</span> <span style="color:#000">intensity</span>;
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">switchedOn</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#177500">/* Costruttore */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#000">Lamp</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> <span style="color:#000">0</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#177500">/* Gestione switching */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">true</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOff</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isSwitchedOn</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span>;
</span></span><span style="display:flex;"><span>   }
</span></span></code></pre></div></div>
</div>
<div class="col">
<div class="smaller">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>   <span style="color:#177500">/* Gestione intensita' */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">void</span> <span style="color:#000">correctIntensity</span>() { <span style="color:#177500">// A solo uso interno</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">if</span> (<span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span>) {
</span></span><span style="display:flex;"><span>         <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> <span style="color:#000">0</span>;
</span></span><span style="display:flex;"><span>      } <span style="color:#a90d91">else</span> <span style="color:#a90d91">if</span> (<span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">&gt;</span> <span style="color:#000">LEVELS</span>) {
</span></span><span style="display:flex;"><span>         <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> <span style="color:#000">LEVELS</span>;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">setIntensity</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">value</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> <span style="color:#000">Math</span>.<span style="color:#836c28">round</span>((<span style="color:#a90d91">float</span>) (<span style="color:#000">value</span> <span style="color:#000">/</span> <span style="color:#000">DELTA</span>));
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">correctIntensity</span>();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">dim</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span><span style="color:#000">--</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">correctIntensity</span>();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">brighten</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span><span style="color:#000">++</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">correctIntensity</span>();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">double</span> <span style="color:#000">getIntensity</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">*</span> <span style="color:#000">DELTA</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">toString</span>() {
</span></span><span style="display:flex;"><span>	   <span style="color:#a90d91">return</span> <span style="color:#c41a16">"Ac: "</span> <span style="color:#000">+</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">isSwitchedOn</span>() <span style="color:#000">+</span> <span style="color:#c41a16">", Int: "</span> <span style="color:#000">+</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">getIntensity</span>();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></div>
</div>
</div>
</section><section>
<h2 id="un-esercizio-dispositivo-twolampsdevice">Un esercizio: dispositivo <code>TwoLampsDevice</code></h2>
<h3 id="caratteristiche-del-sistema-da-modellare">Caratteristiche del sistema da modellare</h3>
<ul>
<li>una base su cui poggiano due lampadine</li>
<li>possibilità di accendere/spegnere entrambe</li>
<li>possibilità di modalità “eco” (ad es.: una sola accesa a media intensità)</li>
</ul>
<h3 id="idea-realizzativa-1-">Idea realizzativa 1 :(</h3>
<ul>
<li>una classe con 4 campi, ossia le due intensità e i due flag</li>
<li>sarebbe un buon design?
<ul>
<li>riuserei codice?</li>
<li>starei aderendo al principio <em>DRY (Don’t Repeat Yourself)</em>?</li>
</ul>
</li>
</ul>
<h3 id="idea-realizzativa-2-">Idea realizzativa 2 :)</h3>
<ul>
<li>riuso <code>Lamp</code> e sfrutto la composizione</li>
</ul>
</section><section>
<h2 id="esempio-twolampsdevice">Esempio: <code>TwoLampsDevice</code></h2>
<div class="container">
<div class="col">
<div class="smaller">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">TwoLampsDevice</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* Composizione di due Lamp! */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">Lamp</span> <span style="color:#000">l1</span>; <span style="color:#177500">// Potrei realizzare lo stato con un array</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">Lamp</span> <span style="color:#000">l2</span>; <span style="color:#177500">// I clienti non ne sarebbero influenzati!</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* Composizione inizializzata al momento della costruzione */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">TwoLampsDevice</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span>.<span style="color:#836c28">l1</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Lamp</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span>.<span style="color:#836c28">l2</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Lamp</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* Metodi getter */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">Lamp</span> <span style="color:#000">getFirst</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">l1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">Lamp</span> <span style="color:#000">getSecond</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">l2</span>;
</span></span><span style="display:flex;"><span>    } 
</span></span></code></pre></div></div>
</div>
<div class="col">
<div class="smaller">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>    <span style="color:#177500">/* Altri metodi che lavorano sulla "composizione" */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOnBoth</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span>.<span style="color:#836c28">l1</span>.<span style="color:#836c28">switchOn</span>();  <span style="color:#177500">// Nota la concatenazione di "."</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span>.<span style="color:#836c28">l2</span>.<span style="color:#836c28">switchOn</span>();  <span style="color:#177500">// .. è tipico della composizione</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOffBoth</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span>.<span style="color:#836c28">l1</span>.<span style="color:#836c28">switchOff</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span>.<span style="color:#836c28">l2</span>.<span style="color:#836c28">switchOff</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">ecoMode</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span>.<span style="color:#836c28">l1</span>.<span style="color:#836c28">switchOff</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span>.<span style="color:#836c28">l2</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span>.<span style="color:#836c28">l2</span>.<span style="color:#836c28">setIntensity</span>(<span style="color:#000">0</span>.<span style="color:#836c28">5</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>} 
</span></span></code></pre></div></div>
</div>
</div>
<!--
---


## Esempio: `TwoLampsDevice` pt 2


  \srcode{\scriptsize}{24}{100}{\ecl/TwoLampsDevice.java}

-->
</section><section>
<h2 id="la-necessità-di-una-notazione-grafica----uml">La necessità di una notazione grafica – UML</h2>
<h3 id="uml----unified-modelling-language">UML – Unified Modelling Language</h3>
<ul>
<li>È un <em>linguaggio grafico</em> semi-formale e <em>OO-based</em> per <em>modellare e documentare il software</em>
<ul>
<li>Facilita lo scambio di documentazione, e il ragionamento su sistemi articolati e complessi</li>
<li>È uno standard dell’OMG dal 1996</li>
<li>È molto utile anche a fini didattici</li>
</ul>
</li>
<li>Noi ne useremo solo la parte chiamata <em><strong>Class Diagram</strong></em>
<ul>
<li>Tipicamente approfondito in corsi di “Ingegneria del Software”</li>
</ul>
</li>
</ul>
</section><section>
<h2 id="class-diagram">Class Diagram</h2>
<h3 id="diagramma-delle-classi-una-prima-descrizione">..diagramma delle classi, una prima descrizione</h3>
<ul>
<li>
<p>Un <em>box rettangolare</em> per classe, diviso in <em>tre aree</em>:</p>
<ol>
<li>nome della classe,</li>
<li>campi,</li>
<li>metodi (e costruttori)</li>
</ol>
</li>
<li>
<p>Su campi e metodi</p>
<ul>
<li>si antepone il simbolo <code>-</code> se privati, <code>+</code> se pubblici</li>
<li>si sottolineano se <code>static</code></li>
<li>dei metodi si riporta solo la signature, con sintassi: <code>nome(arg1: tipo1, arg2: tipo2, ..): tipo_ritorno</code></li>
</ul>
</li>
<li>
<p><em>archi</em> fra classi indicano <em>relazioni</em> speciali:</p>
<ul>
<li>con <em>rombo</em> (composizione), con <em>freccia</em> (semplice associazione)</li>
<li>con <em>triangolo</em> (generalizzazione/specializzazione)</li>
<li>l’arco può essere etichettato con la <em>molteplicità</em> (1, 2, 0..1, 0..n, 1..n)</li>
</ul>
</li>
</ul>
<p>A seconda dello scopo per cui si usa il diagramma, non è necessario riportare tutte le informazioni, ad esempio spesso si omettono le proprietà, le signature complete, ed alcune relazioni</p>
</section><section>
<h2 id="notazione-uml-completa-per-la-classe-lamp">Notazione UML completa per la classe <code>Lamp</code>:</h2>
<ul>
<li>tipicamente usata in fase di implementazione</li>
</ul>
<p><img src="imgs/lamp1.png" alt=""></p>
<!--
```mermaid
classDiagram

class Lamp {
    -int LEVELS$  
    -double DELTA$
    -int intensity
    -boolean switchedOn
    +Lamp()
    +switchOn()
    +switchOff()
    +isSwitchedOn() boolean
    -correctIntensity()
    +setIntensity(value: double)
    +dim()
    +brighten()
    +getIntensity() double
}
```
-->
</section><section>
<h2 id="notazione-parziale-solo-parte-pubblica">Notazione parziale: solo parte pubblica</h2>
<ul>
<li>tipicamente usata in fase di design</li>
</ul>
<div class="mermaid" data-processed="true" pre-rendered="true"><svg aria-labelledby="chart-title-mermaid-1699308919612 chart-desc-mermaid-1699308919612" role="img" viewBox="0 0 217.78125 249" style="max-width: 217.78125px;" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-1699308919612"><title id="chart-title-mermaid-1699308919612"></title><desc id="chart-desc-mermaid-1699308919612"></desc><style>#mermaid-1699308919612 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1699308919612 .error-icon{fill:#552222;}#mermaid-1699308919612 .error-text{fill:#552222;stroke:#552222;}#mermaid-1699308919612 .edge-thickness-normal{stroke-width:2px;}#mermaid-1699308919612 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1699308919612 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1699308919612 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1699308919612 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1699308919612 .marker{fill:#333333;stroke:#333333;}#mermaid-1699308919612 .marker.cross{stroke:#333333;}#mermaid-1699308919612 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1699308919612 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#mermaid-1699308919612 g.classGroup text .title{font-weight:bolder;}#mermaid-1699308919612 .nodeLabel,#mermaid-1699308919612 .edgeLabel{color:#131300;}#mermaid-1699308919612 .edgeLabel .label rect{fill:#ECECFF;}#mermaid-1699308919612 .label text{fill:#131300;}#mermaid-1699308919612 .edgeLabel .label span{background:#ECECFF;}#mermaid-1699308919612 .classTitle{font-weight:bolder;}#mermaid-1699308919612 .node rect,#mermaid-1699308919612 .node circle,#mermaid-1699308919612 .node ellipse,#mermaid-1699308919612 .node polygon,#mermaid-1699308919612 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1699308919612 .divider{stroke:#9370DB;stroke:1;}#mermaid-1699308919612 g.clickable{cursor:pointer;}#mermaid-1699308919612 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1699308919612 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1699308919612 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1699308919612 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1699308919612 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1699308919612 .dashed-line{stroke-dasharray:3;}#mermaid-1699308919612 #compositionStart,#mermaid-1699308919612 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1699308919612 #compositionEnd,#mermaid-1699308919612 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1699308919612 #dependencyStart,#mermaid-1699308919612 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1699308919612 #dependencyStart,#mermaid-1699308919612 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1699308919612 #extensionStart,#mermaid-1699308919612 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1699308919612 #extensionEnd,#mermaid-1699308919612 .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-1699308919612 #aggregationStart,#mermaid-1699308919612 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1699308919612 #aggregationEnd,#mermaid-1699308919612 .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1699308919612 #lollipopStart,#mermaid-1699308919612 .lollipop{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1699308919612 #lollipopEnd,#mermaid-1699308919612 .lollipop{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-1699308919612 .edgeTerminals{font-size:11px;}#mermaid-1699308919612 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="0" class="marker aggregation classDiagram" id="classDiagram-aggregationStart"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="19" class="marker aggregation classDiagram" id="classDiagram-aggregationEnd"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="0" class="marker extension classDiagram" id="classDiagram-extensionStart"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="19" class="marker extension classDiagram" id="classDiagram-extensionEnd"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="0" class="marker composition classDiagram" id="classDiagram-compositionStart"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="19" class="marker composition classDiagram" id="classDiagram-compositionEnd"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="0" class="marker dependency classDiagram" id="classDiagram-dependencyStart"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="19" class="marker dependency classDiagram" id="classDiagram-dependencyEnd"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="0" class="marker lollipop classDiagram" id="classDiagram-lollipopStart"><circle r="6" cy="7" cx="6" fill="white" stroke="black"></circle></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(108.890625, 124.5)" id="classid-Lamp-0" class="node default"><rect height="233" width="201.78125" y="-116.5" x="-100.890625" class="outer title-state"></rect><line y2="-86.5" y1="-86.5" x2="100.890625" x1="-100.890625" class="divider"></line><line y2="-70.5" y1="-70.5" x2="100.890625" x1="-100.890625" class="divider"></line><g class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"></span></div></foreignObject><foreignObject transform="translate( -21.3359375, -109)" height="18" width="42.671875" class="classTitle"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Lamp</span></div></foreignObject><foreignObject transform="translate( -93.390625, -63)" height="18" width="50.6875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Lamp()</span></div></foreignObject><foreignObject transform="translate( -93.390625, -41)" height="18" width="68.484375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">brighten()</span></div></foreignObject><foreignObject transform="translate( -93.390625, -19)" height="18" width="36.4375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">dim()</span></div></foreignObject><foreignObject transform="translate( -93.390625, 3)" height="18" width="153.875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">getIntensity() : double</span></div></foreignObject><foreignObject transform="translate( -93.390625, 25)" height="18" width="178.765625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">isSwitchedOn() : boolean</span></div></foreignObject><foreignObject transform="translate( -93.390625, 47)" height="18" width="186.78125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">setIntensity(value: double)</span></div></foreignObject><foreignObject transform="translate( -93.390625, 69)" height="18" width="76.453125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">switchOn()</span></div></foreignObject><foreignObject transform="translate( -93.390625, 91)" height="18" width="76.15625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">switchOff()</span></div></foreignObject></g></g></g></g></g></svg></div>

</section><section>
<h2 id="uml-lamp-e-twolampsdevice">UML: <code>Lamp</code> e <code>TwoLampsDevice</code></h2>
<p><img src="imgs/lamp3.png" alt=""></p>
<!--
```mermaid
classDiagram

direction LR

class Lamp {
    Lamp()
    brighten()
    dim()
    getIntensity() double
    isSwitchedOn() boolean
    setIntensity(value: double)
    switchOn()
    switchOff()
}

class TwoLampsDevice {
  TwoLampsDevice()
  getFirst() Lamp
  getSecond() Lamp
  switchOnBoth()
  switchOfBoth()
  ecoMode()
}

Lamp --* TwoLampsDevice : Composition
```
-->
</section><section>
<h2 id="altro-caso-di-composizione-lampsrow">Altro caso di composizione: <code>LampsRow</code></h2>
<div class="smaller">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">LampsRow</span> {
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">Lamp</span><span style="color:#000">[]</span> <span style="color:#000">row</span>; <span style="color:#177500">// Campo</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">LampsRow</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">size</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">row</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Lamp</span><span style="color:#000">[</span><span style="color:#000">size</span><span style="color:#000">]</span>; <span style="color:#177500">// Tutti i valori a null</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">installLamp</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">position</span>, <span style="color:#a90d91">final</span> <span style="color:#000">Lamp</span> <span style="color:#000">lamp</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">row</span><span style="color:#000">[</span><span style="color:#000">position</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#000">lamp</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">removeLamp</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">position</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">row</span><span style="color:#000">[</span><span style="color:#000">position</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#a90d91">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchAll</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">on</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">for</span> (<span style="color:#000">Lamp</span> <span style="color:#000">lamp</span>: <span style="color:#a90d91">this</span>.<span style="color:#836c28">row</span>) {
</span></span><span style="display:flex;"><span>    	    <span style="color:#a90d91">if</span> (<span style="color:#000">lamp</span> <span style="color:#000">!=</span> <span style="color:#a90d91">null</span>) { <span style="color:#177500">// Previene il NullPointException</span>
</span></span><span style="display:flex;"><span>    	    	<span style="color:#a90d91">if</span> (<span style="color:#000">on</span>){
</span></span><span style="display:flex;"><span>    	    	    <span style="color:#000">lamp</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>    	    	} <span style="color:#a90d91">else</span> {
</span></span><span style="display:flex;"><span>    	    	    <span style="color:#000">lamp</span>.<span style="color:#836c28">switchOff</span>();
</span></span><span style="display:flex;"><span>    	    	}
</span></span><span style="display:flex;"><span>    	    }
</span></span><span style="display:flex;"><span>    	}
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">Lamp</span> <span style="color:#000">getLamp</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">position</span>) { <span style="color:#177500">// Selettore</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">row</span><span style="color:#000">[</span><span style="color:#000">position</span><span style="color:#000">]</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isInstalled</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">position</span>) { <span style="color:#177500">// Selettore</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">row</span><span style="color:#000">[</span><span style="color:#000">position</span><span style="color:#000">]</span> <span style="color:#000">!=</span> <span style="color:#a90d91">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></div>
</section><section>
<h2 id="uml-lamp-e-lampsrow">UML: <code>Lamp</code> e <code>LampsRow</code></h2>
<p><img src="imgs/lamp4.png" alt=""></p>
<!--
```mermaid
classDiagram

direction LR

class Lamp {
    Lamp()
    brighten()
    dim()
    getIntensity() double
    isSwitchedOn() boolean
    setIntensity(value: double)
    switchOn()
    switchOff()
}

class LampsRow {
  LampsRow(size: int)
  installLamp(position: int, lamp: Lamp)
  removeLamp(position: int) 
  switchAll(on: boolean)
  getLamp(position: int) Lamp
  isInstalled(position: int) boolean
}

Lamp --* LampsRow
```
-->
</section><section>
<h2 id="scenario-domuscontroller">Scenario <code>DomusController</code></h2>
<ul>
<li>Come scrivereste il metodo <code>switchAll</code> in modo riusabile, e possibilmente rimandendo aperti all’introduzione di nuovi tipi di dispositivi?</li>
</ul>
<p><img src="imgs/uml3.pdf.png" alt=""></p>
<!--
```mermaid
classDiagram

class Lamp {
    switchOn()
    switchOff()
    ...
}

class DomusController {
  switchAll(on: boolean)
}

class AirConditioner {
  switchOn()
  switchOff()
  ...
}

class TV {
  switchOn()
  switchOff()
  ...
}

class Radio {
  switchOn()
  switchOff()
  ...
}

Lamp "0..n" --* DomusController 
TV "0..n" --* DomusController
Radio "0..n" --* DomusController 
AirConditioner "0..n" --* DomusController 
```
-->
</section><section>
<h2 id="realizzazione-senza-riuso-schema">Realizzazione senza riuso: schema</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">DomusController</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">Lamp</span><span style="color:#000">[]</span> <span style="color:#000">lamps</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">TV</span><span style="color:#000">[]</span> <span style="color:#000">tvs</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">AirConditioner</span><span style="color:#000">[]</span> <span style="color:#000">airs</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">Radio</span><span style="color:#000">[]</span> <span style="color:#000">radios</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">//...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchAll</span>(<span style="color:#a90d91">boolean</span> <span style="color:#000">on</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">for</span> (<span style="color:#000">Lamp</span> <span style="color:#000">lamp</span>: <span style="color:#a90d91">this</span>.<span style="color:#836c28">lamps</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a90d91">if</span> (<span style="color:#000">lamp</span> <span style="color:#000">!=</span> <span style="color:#a90d91">null</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a90d91">if</span> (<span style="color:#000">on</span>){ <span style="color:#000">lamp</span>.<span style="color:#836c28">switchOn</span>(); } <span style="color:#a90d91">else</span> { <span style="color:#000">lamp</span>.<span style="color:#836c28">switchOff</span>(); } <span style="color:#177500">// mal formattato!</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">for</span> (<span style="color:#000">TV</span> <span style="color:#000">tv</span>: <span style="color:#a90d91">this</span>.<span style="color:#836c28">tvs</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a90d91">if</span> (<span style="color:#000">tv</span> <span style="color:#000">!=</span> <span style="color:#a90d91">null</span>) { 
</span></span><span style="display:flex;"><span>                <span style="color:#a90d91">if</span> (<span style="color:#000">on</span>) { <span style="color:#000">tv</span>.<span style="color:#836c28">switchOn</span>(); } <span style="color:#a90d91">else</span> { <span style="color:#000">tv</span>.<span style="color:#836c28">switchOff</span>(); } <span style="color:#177500">// mal formattato!</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        ... <span style="color:#177500">// e così via per tutti i dispositivi</span>
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>Si noti come la struttura dei due cicli <code>for</code> sia essenzialmente identica!
<ul>
<li>Cambia solo il (tipo dei) receiver e il nome delle variabili coinvolte</li>
</ul>
</li>
</ul>
</section><section>
<h1 id="interfacce">Interfacce</h1>
</section><section>
<h2 id="motivazioni">Motivazioni</h2>
<h3 id="1-specifica-astratta-di-oggetti">1) Specifica astratta di oggetti</h3>
<ul>
<li>Serve un meccanismo per <em>separare esplicitamente</em>, ossia in dichiarazioni diverse, <em>l’interfaccia</em> della classe e la sua <em>realizzazione</em>
<ul>
<li>Si vuole poter <em>separare fisicamente</em> la parte di <em>“contratto”</em> (tipicamente fissa) con quella di <em>“implementazione”</em> (modificabile frequentemente)</li>
<li>Si vuole poter <em>astrarre</em> da molteplici possibili implementazioni</li>
</ul>
</li>
</ul>
<div class="container">
<div class="col">
<div class="smaller">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">Lamp</span> {
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">double</span> <span style="color:#000">DELTA</span> <span style="color:#000">=</span> <span style="color:#000">0</span>.<span style="color:#836c28">1</span>;
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">int</span> <span style="color:#000">intensity</span>;
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">switchedOn</span>;
</span></span><span style="display:flex;"><span>   <span style="color:#177500">// ...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#000">Lamp</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> <span style="color:#000">0</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">true</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isSwitchedOn</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">double</span> <span style="color:#000">getIntensity</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">*</span> <span style="color:#000">DELTA</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#177500">// ...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></div>
</div><div class="col">
<p>Estrazione del “contratto d’uso” della lampadina</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Lamp</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#000">Boolean</span> <span style="color:#000">isSwitchedOn</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#a90d91">double</span> <span style="color:#000">getIntensity</span>()
</span></span><span style="display:flex;"><span>  <span style="color:#177500">// ...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></div>
</div>
</section><section>
<h3 id="2-polimorfismo-accesso-uniforme-a-oggetti-diversi">2) Polimorfismo: accesso uniforme a oggetti diversi</h3>
<ul>
<li>Serve un meccanismo per poter fornire <em>diverse possibili realizzazioni di un contratto</em></li>
<li>Tutte devono poter essere <em>utilizzabili in modo omogeneo</em></li>
<li>Nel caso di <code>DomusController</code>:
<ul>
<li>Avere un unico contratto per i “dispositivi”, e …</li>
<li>… diverse classi che lo rispettano</li>
<li><code>DomusController</code> gestirà un unico array di “dispositivi”</li>
</ul>
</li>
</ul>
</section><section>
<h2 id="interfacce-in-java"><strong>Interfacce</strong> in Java</h2>
<h3 id="cosè-una-interface">Cos’è una <code>interface</code></h3>
<ul>
<li>È un nuovo <em><strong>tipo di dato</strong></em> dichiarabile (quindi come le classi)</li>
<li>Ha un nome, e include “solo” un insieme di intestazioni di metodi</li>
<li>Viene compilato da <code>javac</code> come una classe, e produce un <code>.class</code></li>
</ul>
<h3 id="una-interface-i-può-essere-implementata-da-una-classe">Una <code>interface</code> <code>I</code> può essere “implementata” da una classe</h3>
<ul>
<li>Attraverso una classe <code>C</code> che lo dichiara esplicitamente (<code>class C implements I { ... }</code>)</li>
<li><code>C</code> dovrà definire (il corpo di) tutti i metodi dichiarati in <code>I</code></li>
<li>Un oggetto istanza di <code>C</code>, avrà come tipo <code>C</code> al solito, ma anche <code>I</code>!!</li>
</ul>
<h3 id="esempio-dispositivi-in-domuscontroller">Esempio: dispositivi in <code>DomusController</code></h3>
<ul>
<li><code>Lamp</code>, <code>TV</code>, <code>Radio</code>, <code>AirConditioner</code> hanno una caratteristica comune: sono dispositivi e come tali possono come minimo essere accesi o spenti.</li>
<li>È possibile definire una interfaccia <code>Device</code> che tutti e 4 implementano.
<ul>
<li>Definiamo così una nuova <em>astrazione</em></li>
</ul>
</li>
</ul>
</section><section>
<h2 id="interface-device">Interface <code>Device</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">package</span> <span style="color:#000">it.unibo.interfaces.domo</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Interfaccia per dispositivi
</span></span></span><span style="display:flex;"><span><span style="color:#177500">Definisce un contratto:
</span></span></span><span style="display:flex;"><span><span style="color:#177500">- si può accendere
</span></span></span><span style="display:flex;"><span><span style="color:#177500">- si può spegnere
</span></span></span><span style="display:flex;"><span><span style="color:#177500">- si può verificare se acceso/spento 
</span></span></span><span style="display:flex;"><span><span style="color:#177500">Nota: nessuna indicazione public/private nei metodi!
</span></span></span><span style="display:flex;"><span><span style="color:#177500">*/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Device</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>(); 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">void</span> <span style="color:#000">switchOff</span>(); 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">boolean</span> <span style="color:#000">isSwitchedOn</span>(); 
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="implementazioni-di-device">Implementazioni di <code>Device</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Lamp</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Device</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// ...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* NOTA: Nessun cambiamento necessario rispetto a prima!
</span></span></span><span style="display:flex;"><span><span style="color:#177500">     * Di seguito si riporta la parte di `Lamp` che
</span></span></span><span style="display:flex;"><span><span style="color:#177500">     * permette di rispettare il contratto di `Device`,
</span></span></span><span style="display:flex;"><span><span style="color:#177500">     * ovvero di implementare l'interfaccia
</span></span></span><span style="display:flex;"><span><span style="color:#177500">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">switchedOn</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>(){
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOff</span>(){
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isSwitchedOn</span>(){
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// ...</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">TV</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Device</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Nessun cambiamento necessario rispetto a prima!</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Radio</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Device</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Nessun cambiamento necessario rispetto a prima!</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="notazione-uml-per-le-interfacce">Notazione UML per le interfacce</h2>
<ul>
<li>interfaccia come box con titolo “<code>&lt;&lt; interface &gt;&gt; Nome</code>”
<ul>
<li>essenzialmente, stessa notazione di una classe con in più lo <em>“stereotipo”</em> <code>&lt;&lt;interface&gt;&gt;</code></li>
</ul>
</li>
<li><em>arco tratteggiato con punta a triangolo</em> per la relazione <strong>“interface realization”</strong> (che modella <code>implements</code>)
<ul>
<li>eventualmente, archi raggruppati (che si diramano dallo stesso triangolo) per migliorare la resa grafica</li>
</ul>
</li>
</ul>
<p><img src="imgs/uml-int.png" alt=""></p>
<!--
```mermaid
classDiagram
class Device {
    <<interface>>
    switchOn()
    switchOff()
    isSwitchedOn() boolean
}

class Lamp { }
class TV { }
class Radio { }
class AirConditioner { }

Device <|-- Lamp
Device <|-- TV
Device <|-- Radio
Device <|-- AirConditioner
```
-->
</section><section>
<h2 id="interfacce-come-tipi-di-dato">Interfacce come tipi di dato</h2>
<h3 id="data-linterfaccia-i-in-che-senso-i-è-un-tipo">Data l’interfaccia <code>I</code>, in che senso <code>I</code> è un tipo?</h3>
<ul>
<li><code>I</code> è un tipo come gli altri (<code>int</code>, <code>float</code>, <code>String</code>, <code>Lamp</code>, <code>Lamp[]</code>)</li>
<li>è usabile per dichiarare variabili, come tipo di input/output di una funzione, come tipo di un campo</li>
</ul>
<h3 id="quali-operazioni-sono-consentite">Quali operazioni sono consentite?</h3>
<ul>
<li>esattamente (e solo) le <em>chiamate dei metodi definiti dall’interfaccia</em></li>
</ul>
<h3 id="quali-sono-i-valori-oggetti-di-quel-tipo">Quali sono i valori (oggetti) di quel tipo?</h3>
<ul>
<li>gli oggetti delle classi che dichiarano implementare quell’interfaccia</li>
</ul>
</section><section>
<h2 id="interfacce-e-assegnamenti">Interfacce e assegnamenti</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">/* Su Lamp effettuo le usuali operazioni */</span>
</span></span><span style="display:flex;"><span><span style="color:#000">Lamp</span> <span style="color:#000">lamp</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Lamp</span>();    
</span></span><span style="display:flex;"><span><span style="color:#000">lamp</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span><span style="color:#a90d91">boolean</span> <span style="color:#000">b</span> <span style="color:#000">=</span> <span style="color:#000">lamp</span>.<span style="color:#836c28">isSwitchedOn</span>(); 
</span></span><span style="display:flex;"><span><span style="color:#000">lamp</span>.<span style="color:#836c28">dim</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Una variabile di tipo Device può contenere un Lamp, 
</span></span></span><span style="display:flex;"><span><span style="color:#177500">   e su essa posso eseguire le  operazioni definite da Device */</span>
</span></span><span style="display:flex;"><span><span style="color:#000">Device</span> <span style="color:#000">dev</span>;	                      <span style="color:#177500">// creo la variabile</span>
</span></span><span style="display:flex;"><span><span style="color:#000">dev</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Lamp</span>();                 <span style="color:#177500">// assegnamento ok	</span>
</span></span><span style="display:flex;"><span><span style="color:#000">dev</span>.<span style="color:#836c28">switchOn</span>();	                  <span style="color:#177500">// operazione di Device</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">boolean</span> <span style="color:#000">b2</span> <span style="color:#000">=</span> <span style="color:#000">dev</span>.<span style="color:#836c28">isSwitchedOn</span>();  <span style="color:#177500">// operazioni di Device </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Attenzione: non si può invocare un metodo specifico di Lamp
</span></span></span><span style="display:flex;"><span><span style="color:#177500">   su una variabile di tipo Device! */</span>
</span></span><span style="display:flex;"><span><span style="color:#000">dev</span>.<span style="color:#836c28">dim</span>(); <span style="color:#177500">// NO!!!! </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">Device</span> <span style="color:#000">dev2</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Lamp</span>();         <span style="color:#177500">// Altro assegnamento</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Attenzione, le interfacce non sono istanziabili */</span>
</span></span><span style="display:flex;"><span><span style="color:#000">Device</span> <span style="color:#000">dev3</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Device</span>(); <span style="color:#177500">// NO!!!! </span>
</span></span></code></pre></div></section><section>
<h2 id="ridurre-la-molteplicità--aumentare-riuso----prima">Ridurre la molteplicità / aumentare riuso – prima</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">DeviceUtilities</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* Senza interfacce, non resta altro che... */</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOnIfCurrentlyOff</span>(<span style="color:#000">Lamp</span> <span style="color:#000">lamp</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">if</span> (<span style="color:#000">!</span><span style="color:#000">lamp</span>.<span style="color:#836c28">isSwitchedOn</span>()){
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">lamp</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>    	}
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOnIfCurrentlyOff</span>(<span style="color:#000">TV</span> <span style="color:#000">tv</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">if</span> (<span style="color:#000">!</span><span style="color:#000">tv</span>.<span style="color:#836c28">isSwitchedOn</span>()) {
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">tv</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>    	}
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOnIfCurrentlyOff</span>(<span style="color:#000">Radio</span> <span style="color:#000">radio</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">if</span> (<span style="color:#000">!</span><span style="color:#000">radio</span>.<span style="color:#836c28">isSwitchedOn</span>()) {
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">radio</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>    	}
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ..
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="ridurre-la-molteplicità--aumentare-riuso----dopo">Ridurre la molteplicità / aumentare riuso – dopo</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">DeviceUtilities</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// ...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* Grazie alle interfacce, fattorizzo in un solo metodo */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOnIfCurrentlyOff</span>(<span style="color:#000">Device</span> <span style="color:#000">device</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">if</span> (<span style="color:#000">!</span><span style="color:#000">device</span>.<span style="color:#836c28">isSwitchedOn</span>()){
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">device</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>    	}
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Codice cliente */</span>
</span></span><span style="display:flex;"><span><span style="color:#000">Lamp</span> <span style="color:#000">lamp</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Lamp</span>();
</span></span><span style="display:flex;"><span><span style="color:#000">TV</span> <span style="color:#000">tv</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">TV</span>();
</span></span><span style="display:flex;"><span><span style="color:#000">Radio</span> <span style="color:#000">radio</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Radio</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">switchOnIfCurrentlyOff</span>(<span style="color:#000">lamp</span>);  <span style="color:#177500">// OK, un Lamp è un Device </span>
</span></span><span style="display:flex;"><span><span style="color:#000">switchOnIfCurrentlyOff</span>(<span style="color:#000">tv</span>);    <span style="color:#177500">// OK, una TV è un Device</span>
</span></span><span style="display:flex;"><span><span style="color:#000">switchOnIfCurrentlyOff</span>(<span style="color:#000">radio</span>); <span style="color:#177500">// OK, una Radio è un Device</span>
</span></span></code></pre></div></section><section>
<h2 id="razionale-delle-interfacce">Razionale delle interfacce</h2>
<h3 id="quando-costruire-una-interfaccia">Quando costruire una interfaccia?</h3>
<ul>
<li>
<p>quando si ritiene utile separare contratto da implementazione (sempre vero per i concetti cardine in applicazioni complesse)</p>
</li>
<li>
<p>quando si prevede la possibilità che varie classi possano voler implementare un medesimo contratto</p>
</li>
<li>
<p>quando si vogliono costruire funzionalità che possano lavorare con <em><strong>qualunque</strong></em> oggetto che implementi il contratto</p>
</li>
<li>
<p>caso particolare: Quando si vuole comporre (“has-a”) un qualunque oggetto che implementi il contratto</p>
</li>
</ul>
<p>$\Rightarrow$ l’esperienza mostra che classi riusabili di norma hanno sempre una loro <code>interface</code></p>
<h3 id="quindi">Quindi:</h3>
<ul>
<li>laddove ci si aspetta un oggetto che implementi il contratto si usa il tipo dell’interfaccia</li>
<li>questo consente il riuso della funzionalità a tutte le classi che implementano il contratto</li>
</ul>
</section><section>
<h2 id="scenario-domuscontroller-rivisitato">Scenario <code>DomusController</code> rivisitato</h2>
<p><img src="imgs/uml-int-domus.pdf.png" alt=""></p>
<!--
```mermaid
classDiagram
class Device {
    <<interface>>
    switchOn()
    switchOff()
    isSwitchedOn() boolean
}

class DomusController {
    DomusController(size: int)
    installDevice(position: int, dev: Device)
    removeDevice(position: int)
    getDevice(position: int) Device
    switchAll(on: boolean)
    isCompletelySwitchedOn() boolean
}

class Lamp { }
class TV { }
class Radio { }
class AirConditioner { }

Device <|-- Lamp
Device <|-- TV
Device <|-- Radio
Device <|-- AirConditioner
```
-->
</section><section>
<h2 id="codice-domuscontroller">Codice <code>DomusController</code></h2>
<div class="container">
<div class="col">
<div class="smaller">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">package</span> <span style="color:#000">it.unibo.interfaces.domo</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">DomusController</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Compongo n oggetti che implementano Device */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">Device</span><span style="color:#000">[]</span> <span style="color:#000">devices</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">DomusController</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">size</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">devices</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Device</span><span style="color:#000">[</span><span style="color:#000">size</span><span style="color:#000">]</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Aggiungo un device */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">installDevice</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">position</span>, <span style="color:#a90d91">final</span> <span style="color:#000">Device</span> <span style="color:#000">dev</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">devices</span><span style="color:#000">[</span><span style="color:#000">position</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#000">dev</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Rimuovo un device */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">removeDevice</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">position</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">devices</span><span style="color:#000">[</span><span style="color:#000">position</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#a90d91">null</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">Device</span> <span style="color:#000">getDevice</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">position</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">devices</span><span style="color:#000">[</span><span style="color:#000">position</span><span style="color:#000">]</span>;
</span></span><span style="display:flex;"><span>	}
</span></span></code></pre></div></div>
</div><div class="col">
<div class="smaller">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>	<span style="color:#177500">/* Spengo/accendo tutti i device */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchAll</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">on</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> (<span style="color:#000">Device</span> <span style="color:#000">dev</span> : <span style="color:#a90d91">this</span>.<span style="color:#836c28">devices</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">if</span> (<span style="color:#000">dev</span> <span style="color:#000">!=</span> <span style="color:#a90d91">null</span>) { <span style="color:#177500">// Prevengo il NullPointerException</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">if</span> (<span style="color:#000">on</span>) {
</span></span><span style="display:flex;"><span>					<span style="color:#000">dev</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>				} <span style="color:#a90d91">else</span> {
</span></span><span style="display:flex;"><span>					<span style="color:#000">dev</span>.<span style="color:#836c28">switchOff</span>();
</span></span><span style="display:flex;"><span>				}
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Verifico se sono tutti accesi */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isCompletelySwitchedOn</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> (<span style="color:#000">Device</span> <span style="color:#000">dev</span> : <span style="color:#a90d91">this</span>.<span style="color:#836c28">devices</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">if</span> (<span style="color:#000">dev</span> <span style="color:#000">!=</span> <span style="color:#a90d91">null</span> <span style="color:#000">&amp;&amp;</span> <span style="color:#000">!</span><span style="color:#000">dev</span>.<span style="color:#836c28">isSwitchedOn</span>()) {
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span>;
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">true</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></div>
</div>
</div>
</section><section>
<h2 id="codice-tv">Codice <code>TV</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">TV</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Device</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Campi della classe */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">switchedOn</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Costruttore */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">TV</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Metodi per accendere e spegnere */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">true</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOff</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isSwitchedOn</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">toString</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#c41a16">"I'm a TV.."</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="uso-di-domuscontroller">Uso di <code>DomusController</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseDomusController</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#177500">// Creo un DomusController</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#000">DomusController</span> <span style="color:#000">dc</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">DomusController</span>(<span style="color:#000">10</span>);
</span></span><span style="display:flex;"><span>    	
</span></span><span style="display:flex;"><span>    	<span style="color:#177500">// Installo dei dispositivi</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">dc</span>.<span style="color:#836c28">installDevice</span>(<span style="color:#000">0</span>, <span style="color:#a90d91">new</span> <span style="color:#000">Lamp</span>());
</span></span><span style="display:flex;"><span>    	<span style="color:#000">dc</span>.<span style="color:#836c28">installDevice</span>(<span style="color:#000">1</span>, <span style="color:#a90d91">new</span> <span style="color:#000">Lamp</span>());
</span></span><span style="display:flex;"><span>    	<span style="color:#000">dc</span>.<span style="color:#836c28">installDevice</span>(<span style="color:#000">2</span>, <span style="color:#a90d91">new</span> <span style="color:#000">Lamp</span>());
</span></span><span style="display:flex;"><span>    	<span style="color:#000">dc</span>.<span style="color:#836c28">installDevice</span>(<span style="color:#000">3</span>, <span style="color:#a90d91">new</span> <span style="color:#000">TV</span>());
</span></span><span style="display:flex;"><span>    	<span style="color:#000">dc</span>.<span style="color:#836c28">installDevice</span>(<span style="color:#000">4</span>, <span style="color:#a90d91">new</span> <span style="color:#000">TV</span>());
</span></span><span style="display:flex;"><span>    	<span style="color:#000">dc</span>.<span style="color:#836c28">installDevice</span>(<span style="color:#000">5</span>, <span style="color:#a90d91">new</span> <span style="color:#000">Radio</span>());
</span></span><span style="display:flex;"><span>    	
</span></span><span style="display:flex;"><span>    	<span style="color:#177500">// Li accendo tutti</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">dc</span>.<span style="color:#836c28">switchAll</span>(<span style="color:#a90d91">true</span>);
</span></span><span style="display:flex;"><span>    	
</span></span><span style="display:flex;"><span>    	<span style="color:#177500">// Verifico l'accensione</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">b</span> <span style="color:#000">=</span> <span style="color:#000">dc</span>.<span style="color:#836c28">isCompletelySwitchedOn</span>(); <span style="color:#177500">// true</span>
</span></span><span style="display:flex;"><span>	    <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Completely switched on: "</span> <span style="color:#000">+</span> <span style="color:#000">b</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h1 id="tipi-sottotipi-sostituibilità-polimorfismo">Tipi, sottotipi, sostituibilità, polimorfismo</h1>
<h2 id="implements-come-relazione-di-sottotipo"><code>implements</code> come relazione di “sottotipo”</h2>
<h3 id="un-tipo-è-considerabile-come-un-set-di-valorioggetti">Un tipo è considerabile come un set di valori/oggetti</h3>
<ul>
<li>$T_{boolean} = \lbrace true, false \rbrace$</li>
<li>$T_{int} = \lbrace -2147483648,\ldots,-1,0,1,2,\ldots,2147483647 \rbrace$</li>
<li>$T_{Lamp} = \lbrace X|\textrm{$X$ is an object of class Lamp} \rbrace$</li>
<li>$T_{Device} = \lbrace X|\textrm{$X$ is an object of a class implementing Device} \rbrace$</li>
<li>$T_{String} = \lbrace X|\textrm{$X$ is an object of class String} \rbrace$</li>
</ul>
<h3 id="lamp-è-un-sottotipo-di-device"><code>Lamp</code> è un sottotipo di <code>Device</code>!</h3>
<ul>
<li>Un oggetto della classe <code>Lamp</code> è anche del tipo <code>Device</code></li>
<li>Quindi, da $X \in T_{Lamp}$ segue  $X \in T_{Device}$</li>
<li>Ossia, $T_{Lamp} \subseteq  T_{Device}$, scritto anche: <code>Lamp &lt;: Device</code></li>
</ul>
<p><strong>Ogni classe è sottotipo delle interfacce che implementa!</strong></p>
</section><section>
<h3 id="visione-insiemistica">Visione insiemistica</h3>
<p><img src="imgs/types-as-sets.png" alt=""></p>
<ul>
<li>Gli <em>insiemi</em> (ovali) denotano <em>tipi</em>
<ul>
<li>Un insieme contenuto in un altro insieme è un <em>sottotipo</em></li>
</ul>
</li>
<li>Gli <em>elementi</em> (punti neri) denotano <em>oggetti</em></li>
</ul>
</section><section>
<h2 id="sottotipi-e-principio-di-sostituibilità">Sottotipi e principio di sostituibilità</h2>
<h3 id="principio-di-sostituibilità-di-liskov-1993">Principio di sostituibilità di Liskov (1993)</h3>
<p>Se <code>B</code> è un sottotipo di <code>A</code> allora ogni oggetto (o valore) di <code>B</code> può(/deve) essere utilizzato dove un programma si attende un oggetto (o valore) di <code>A</code></p>
<h3 id="nel-caso-delle-interfacce">Nel caso delle interfacce</h3>
<p>Se la classe <code>C</code> implementa l’interfaccia <code>I</code>, allora ogni istanza di <code>C</code> può essere passata dove il programma si attende un elemento del tipo <code>I</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">Lamp</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Device</span> { ... }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">workOnDevice</span>(<span style="color:#000">Device</span> <span style="color:#000">d</span>) { <span style="color:#a90d91">if</span>(<span style="color:#000">d</span>.<span style="color:#836c28">isSwitchedOn</span>()) { ... } }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">Lamp</span> <span style="color:#000">l</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Lamp</span>();
</span></span><span style="display:flex;"><span><span style="color:#000">Device</span> <span style="color:#000">d</span> <span style="color:#000">=</span> <span style="color:#000">l</span>; <span style="color:#177500">// ok, ci si attende un Device</span>
</span></span><span style="display:flex;"><span><span style="color:#000">workOnDevice</span>(<span style="color:#000">l</span>); <span style="color:#177500">// ok, il parametro dev'essere un Device</span>
</span></span></code></pre></div><h3 id="si-rischiano-errori">Si rischiano errori?</h3>
<p>No. Il programma può manipolare gli elementi del tipo <code>I</code> solo mandando loro i messaggi dichiarati in <code>I</code>, che sono sicuramente “accettati” dagli oggetti di <code>C</code>. Il viceversa non è vero.</p>
<p><strong>Nota: <code>I</code> è più generale di <code>C</code>, ma fornisce meno funzionalità!</strong></p>
</section><section>
<h2 id="polimorfismo">Polimorfismo</h2>
<h3 id="polimorfismo--molte-forme-molti-tipi">Polimorfismo = molte forme (molti tipi)</h3>
<p>Ve ne sono di diversi tipi nei linguaggi OO</p>
<ul>
<li>Polimorfismo <em>inclusivo</em>: subtyping</li>
<li>Polimorfismo <em>parametrico</em>: genericità</li>
</ul>
<h3 id="polimorfismo-inclusivo">Polimorfismo inclusivo</h3>
<p>Il <strong>polimorfismo inclusivo</strong> precisamente l’applicazione del <em>principio di sostituibilità di Liskov</em></p>
<ul>
<li>Se il tipo <code>B</code> è una specializzazione di <code>A</code> (lo implementa)…</li>
<li>… allora si può usare un oggetto <code>B</code> dove se ne attende uno di <code>A</code></li>
</ul>
</section><section>
<h2 id="polimorfismo-e-interfacce">Polimorfismo e interfacce</h2>
<h3 id="una-delle-pietre-miliari-delloo">Una delle pietre miliari dell’OO</h3>
<ul>
<li><code>C</code> deve “usare” uno o più oggetti di un tipo non predeterminato
<ul>
<li>(l’uso potrebbe essere una composizione, come nel caso precedente)</li>
</ul>
</li>
<li>l’interfaccia <code>I</code> cattura il contratto comune di tali oggetti</li>
<li>varie classi <code>C1</code>, <code>C2</code>, <code>C3</code> (e altre in futuro) implementano <code>I</code></li>
<li><code>C</code> allora può focalizzarsi nel solo uso di oggetti di tipo <code>I</code> (astraendo da eventuali altri dettagli)
<ul>
<li>dunque <code>C</code> non avrebbe dipendenze rispetto <code>C1</code>, <code>C2</code>, <code>C3</code></li>
</ul>
</li>
</ul>
<img src="imgs/uml-int-general.pdf.png" style="margin-left:20%; width:50%">
<!--
```mermaid
classDiagram

class I { 
  <<interface>>
  contract 
}

class C
class C1 
class C2
class C3

I <-- C

I <|-- C1
I <|-- C2
I <|-- C3
```
-->
</section><section>
<h2 id="late-binding-o-dynamic-binding">Late binding (o dynamic binding)</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOnIfCurrentlyOff</span>(<span style="color:#000">Device</span> <span style="color:#000">device</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Collegamento dinamico con i metodi da invocare..</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">if</span> (<span style="color:#000">!</span><span style="color:#000">device</span>.<span style="color:#836c28">isSwitchedOn</span>()){
</span></span><span style="display:flex;"><span>        <span style="color:#000">device</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Codice cliente */</span>
</span></span><span style="display:flex;"><span><span style="color:#000">Lamp</span> <span style="color:#000">lamp</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Lamp</span>();
</span></span><span style="display:flex;"><span><span style="color:#000">switchOnIfCurrentlyOff</span>(<span style="color:#000">lamp</span>); <span style="color:#177500">// OK, un Lamp è un Device </span>
</span></span></code></pre></div><h3 id="collegamento-dinamicoritardato">Collegamento dinamico/ritardato</h3>
<p>Accade con le chiamate a metodi non-statici</p>
<ul>
<li>Dentro a <code>switchOnIfCurrentlyOff()</code> mandiamo a <code>device</code> due messaggi (<code>isSwitchedOn</code> e <code>switchOn</code>), ma il codice da eseguire viene scelto dinamicamente (ossia “late”), dipende dalla classe dell’oggetto <code>device</code> (<code>Lamp</code>, <code>TV</code>, …)</li>
<li>Terminologia: <code>device</code> ha tipo <code>Device</code> (<em>tipo statico</em>), ma a tempo di esecuzione è un <code>Lamp</code> (<em>tipo run-time</em>)</li>
</ul>
</section><section>
<h2 id="early-static-vs-late-dynamic-binding">Early (static) vs late (dynamic) binding</h2>
<ul>
<li>“statico” vuol dire “a tempo di compilazione” (compile-time)</li>
<li>“dinamico” vuol dire “a tempo di esecuzione” (run-time)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">interface</span> <span style="color:#3f6e75">I</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">m</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">C1</span> <span style="color:#a90d91">implements</span> <span style="color:#000">I</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">m</span>(){ <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"I'm istance of C1"</span>);}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">C2</span> <span style="color:#a90d91">implements</span> <span style="color:#000">I</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">m</span>(){ <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"I'm istance of C2"</span>);}
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">m2</span>(){ <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"I'm a static method of C2"</span>);} 
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">// Codice cliente</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">I</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">Math</span>.<span style="color:#836c28">random</span>() <span style="color:#000">&gt;</span> <span style="color:#000">0</span>.<span style="color:#836c28">5</span> <span style="color:#000">?</span> <span style="color:#a90d91">new</span> <span style="color:#000">C1</span>() : <span style="color:#a90d91">new</span> <span style="color:#000">C2</span>();
</span></span><span style="display:flex;"><span><span style="color:#000">i</span>.<span style="color:#836c28">m</span>(); <span style="color:#177500">// collegamento al body da eseguire è late, ossia dinamico</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">C2</span>.<span style="color:#836c28">m2</span>(); <span style="color:#177500">// collegamento al body da eseguire è early, ossia statico</span>
</span></span></code></pre></div><h3 id="differenze">Differenze</h3>
<ul>
<li>Early: con metodi statici (o finali–come vedremo nel caso dell’ereditarietà)</li>
<li>Late: negli altri casi</li>
</ul>
</section><section>
<h1 id="altri-meccanismi-delle-interfacce">Altri Meccanismi delle Interfacce</h1>
</section><section>
<h2 id="altri-aspetti-sulle-interfacce">Altri aspetti sulle interfacce</h2>
<h3 id="cosa-non-può-contenere-una-interface">Cosa non può contenere una <code>interface</code>?</h3>
<ul>
<li>Non può contenere campi istanza</li>
<li>Non può contenere il corpo di un metodo istanza</li>
<li>Non può contenere un costruttore</li>
</ul>
<h3 id="cosa-potrebbe-contenere-una-interface">Cosa potrebbe contenere una <code>interface</code>?</h3>
<ul>
<li>Java consentirebbe anche di includere dei campi statici e metodi statici (con tanto di corpo), ma è sconsigliato utilizzare questa funzionalità per il momento</li>
<li>Da Java 8, i metodi possono avere una implementazione di default, che vedremo</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">I4</span> <span style="color:#a90d91">extends</span> <span style="color:#000">I1</span>, <span style="color:#000">I2</span>, <span style="color:#000">I3</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">doSomething</span>(<span style="color:#000">String</span> <span style="color:#000">s</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// da Java 8</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">double</span> <span style="color:#000">E</span> <span style="color:#000">=</span> <span style="color:#000">2</span>.<span style="color:#836c28">718282</span>; <span style="color:#177500">// implicitamente public, static, final</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">default</span> <span style="color:#a90d91">void</span> <span style="color:#000">doSomethingTwice</span>(<span style="color:#000">String</span> <span style="color:#000">s</span>) { <span style="color:#000">doSomething</span>(<span style="color:#000">s</span>); <span style="color:#000">doSomething</span>(<span style="color:#000">s</span>); }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">static</span> <span style="color:#a90d91">double</span> <span style="color:#000">PI</span>() { <span style="color:#a90d91">return</span> <span style="color:#000">Math</span>.<span style="color:#836c28">PI</span>; }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Le <code>interface</code> includano solo intestazioni di metodi!</strong></p>
</section><section>
<h2 id="implementazione-multipla-di-interfacce">Implementazione multipla di interfacce</h2>
<h3 id="implementazione-multipla-di-interfacce-1">Implementazione multipla di interfacce</h3>
<p>Dichiarazione possibile: <code>class C implements I1,I2,I3 { ... }</code></p>
<ul>
<li>Una classe <code>C</code> implementa sia <code>I1</code> che <code>I2</code> che <code>I3</code></li>
<li>La classe <code>C</code> deve fornire un corpo per tutti i metodi di <code>I1</code>, tutti quelli di <code>I2</code>, tutti quelli di <code>I3</code>
<ul>
<li>se <code>I1</code>, <code>I2</code>, <code>I3</code> avessero metodi in comune non ci sarebbe problema, ognuno andrebbe implementato una volta sola</li>
</ul>
</li>
<li>Le istanze di <code>C</code> hanno tipo <code>C</code>, ma anche i tipi <code>I1</code>, <code>I2</code> e <code>I3</code></li>
</ul>
</section><section>
<h2 id="esempio-device-e-luminous">Esempio <code>Device</code> e <code>Luminous</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">/* Interfaccia per dispositivi */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Device</span> {       <span style="color:#177500">// Contratto:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>();            <span style="color:#177500">// - si può accendere</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">switchOff</span>();           <span style="color:#177500">// - si può spegnere</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">isSwitchedOn</span>();     <span style="color:#177500">// - si può verificare se acceso/spento</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Interfaccia per entità luminose */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Luminous</span> {     <span style="color:#177500">// Contratto:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">dim</span>();                 <span style="color:#177500">// - si può ridurre la luminosità</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">bright</span>();              <span style="color:#177500">// - si può aumentare la luminosità</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Lamp</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Device</span>, <span style="color:#000">Luminous</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// ...  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>(){ ... }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOff</span>(){ ... }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isSwitchedOn</span>(){ ... }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">dim</span>(){ ... }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">bright</span>(){ ... }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h3 id="visione-insiemistica-1">Visione insiemistica</h3>
<p><img src="imgs/types-as-sets-multiple.png" alt=""></p>
</section><section>
<h2 id="estensione-interfacce">Estensione interfacce</h2>
<h3 id="estensione">Estensione</h3>
<p>Dichiarazione possibile: <code>interface I extends I1,I2,I3 { ... }</code></p>
<ul>
<li>Una interfaccia  <code>I</code> definisce certi metodi, oltre a quelli di <code>I1</code>, <code>I2</code>, <code>I3</code></li>
<li>Una classe <code>C</code> che deve implementare <code>I</code> deve fornire un corpo per tutti i metodi indicati in <code>I</code>, più tutti quelli di <code>I1</code>, tutti quelli di <code>I2</code>, e tutti quelli di <code>I3</code></li>
<li>Le istanze di <code>C</code> hanno tipo <code>C</code>, ma anche i tipi <code>I</code>, <code>I1</code>, <code>I2</code> e <code>I3</code></li>
</ul>
</section><section>
<h2 id="esempio-luminousdevice">Esempio <code>LuminousDevice</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Device</span> {  
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>(); 
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">switchOff</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">isSwitchedOn</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Luminous</span> {     
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">dim</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">brighten</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Interfaccia per dispositivi luminosi */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">LuminousDevice</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Device</span>, <span style="color:#000">Luminous</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// non si aggiungono ulteriori metodi </span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Lamp</span> <span style="color:#a90d91">implements</span> <span style="color:#000">LuminousDevice</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// ...  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>(){ ... }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOff</span>(){ ... }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isSwitchedOn</span>(){ ... }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">dim</span>(){ ... }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">brighten</span>(){ ... }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="qualche-esempio-dalle-librerie-java">Qualche esempio dalle librerie Java</h2>
<p><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/module-summary.html">https://docs.oracle.com/en/java/javase/17/docs/api/java.base/module-summary.html</a></p>
<h3 id="interfacce-base">Interfacce base</h3>
<ul>
<li><code>java.lang.CharSequence</code>: contratto per oggetti rappresentanti “sequenze di caratteri” leggibili
<ul>
<li>implementata da, ad esempio: <code>String</code> e <code>StringBuffer</code> (stringhe mutabili)</li>
</ul>
</li>
<li><code>java.lang.Appendable</code>: contratto per oggetti su cui “appendere” (ovvero, aggiungere in coda) sequenze di caratteri (<code>CharSequence</code>)
<ul>
<li>implementata da, ad esempio: <code>StringBuffer</code></li>
</ul>
</li>
<li><code>java.io.DataInput</code>: lettura di oggetti di tipi primitivi a partire da un flusso di dati binario</li>
<li><code>java.io.Serializable</code>: interfaccia <em>“tag”</em> (vuota, senza metodi) per oggetti “serializzabili”</li>
<li><code>javax.swing.Icon</code>: interfaccia per icone in interfacce grafiche</li>
</ul>
<h3 id="implementazioni-multiple">Implementazioni multiple</h3>
<ul>
<li><code>final class String implements CharSequence, Serializable, ... { ... } </code></li>
<li><code>class ImageIcon implements Icon, Serializable, ... { ... }</code></li>
</ul>
<h3 id="estensioni-di-interfacce">Estensioni di interfacce</h3>
<ul>
<li><code>interface ObjectInput extends DataInput { ... }</code></li>
</ul>
</section><section>
<h2 id="preview-del-prossimo-laboratorio">Preview del prossimo laboratorio</h2>
<h3 id="obbiettivi">Obbiettivi</h3>
<p>Familiarizzare con:</p>
<ul>
<li>Costruzione di semplici classi con incapsulamento</li>
<li>Costruzione di classi con relazione d’uso verso una interfaccia</li>
</ul>
<!-- *  Relativa costruzione di test -->
</section>

  


</div>
      

    </div>
<script type="text/javascript" src="/reveal-hugo/object-assign.js"></script>

<a href="/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"900","highlight_theme":"default","history":true,"mermaid":[{"startOnLoad":false}],"slide_number":true,"theme":"white","transition":"slide","transition_speed":"fast","width":"1440"}</script>
<script type="application/json" id="reveal-hugo-page-params">null</script>

<script src="/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }

  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = { 
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>






  

  

  

  

  

  

  
    
  

  
    
  

  

  
    
  

  

  
    
  

  

  

  
    
  

  
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  



  <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({"startOnLoad":false});

    let render = (event) => {
      let mermaidElems = event.currentSlide.querySelectorAll('.mermaid');
      if (!mermaidElems.length){
          return
      }
      mermaidElems.forEach(mermaidElem => {
          let processed = mermaidElem.getAttribute('data-processed');
          if (!processed){
              
              mermaid.init(undefined, mermaidElem);
          }
      });
    };
    
    render({currentSlide: Reveal.getCurrentSlide()});

    Reveal.on('slidechanged', render);
    Reveal.on('ready', render);
  </script>

    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<script>
  if (/.*?(\?|&)print-pdf/.test(window.location.toString())) {
      var ytVideos = document.getElementsByTagName("iframe")
      for (let i = 0; i < ytVideos.length; i++) {
          var videoFrame = ytVideos[i]
          var isYouTube = /^https?:\/\/(www.)youtube\.com\/.*/.test(videoFrame.src)
          if (isYouTube) {
              console.log(`Removing ${videoFrame.src}`)
              var parent = videoFrame.parentElement
              videoFrame.remove()
              var p = document.createElement('p')
              p.append(
                  document.createTextNode(
                      "There was an embedded video here, but it is disabled in the printed version of the slides."
                  )
              )
              p.append(document.createElement('br'))
              p.append(
                  document.createTextNode(
                      `Visit instead ${
                          videoFrame.src
                      } or ${
                          videoFrame.src.replace(
                              /(^https?:\/\/(www.)youtube\.com)\/(embed\/)(\w+).*/,
                              "https://www.youtube.com/watch?v=$4"
                          )
                      }`
                  )
              )
              parent.appendChild(p)
          }
      }
  }
</script>

    
  

</body></html>