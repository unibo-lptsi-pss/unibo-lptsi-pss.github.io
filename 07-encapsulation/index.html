<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
<title>Progettazione e Sviluppo del Software</title>
<meta name="description" content="Progettazione e Sviluppo del Software, Tecnologie dei Sistemi Informatici">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/css/custom-theme.min.64b25e8fc79cb2d6ebd4c0f19d110cd870679489e26e7e2cf19b4b743498a84c.css" id="theme"><link rel="stylesheet" href="/highlight-js/default.min.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="incapsulamento">Incapsulamento</h1>
<h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="danilo-pianini"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini — <code>danilo.pianini@unibo.it</code></a></h3>
<h3 id="gianluca-aguzzi"><a href="mailto:gianluca.aguzzi@unibo.it">Gianluca Aguzzi — <code>gianluca.aguzzi@unibo.it</code></a></h3>
<h3 id="angelo-filaseta"><a href="mailto:angelo.filaseta@unibo.it">Angelo Filaseta — <code>angelo.filaseta@unibo.it</code></a></h3>
<p>Compiled on: 2025-09-08
 — <a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
<p><a href=".."><i class="fa fa-undo" aria-hidden="true"></i> back</a></p>
</section><section>
<h2 id="outline">Outline</h2>
<h3 id="goal-della-lezione">Goal della lezione</h3>
<ul>
<li>Illustrare concetti generali di <em>incapsulamento</em> e <em>information hiding</em></li>
<li>Mostrare <em>tecniche di programmazione</em> “standard”</li>
<li>Fornire primi <em>esempi di classi ben progettate</em></li>
</ul>
<h3 id="argomenti">Argomenti</h3>
<ul>
<li><em>Incapsulamento</em> in Java</li>
<li>Una metodologia di progettazione</li>
</ul>
<!--

  *  Convenzioni su *formattazione* di codice sorgente Java
  *  Ulteriori convenzioni

-->
</section><section>
<h1 id="alcuni-principi-di-buona-progettazione">Alcuni principi di buona progettazione</h1>
</section><section>
<!--
  % information hiding permette di calare le interdipendenze
    % encapsulation è il modo di risolvere la cosa nei ling OO
      % controllo d'accesso (mopdifiers)
      % impacchettamento di dati e funzioni (classe)
-->
<h2 id="dai-meccanismi-alla-buona-progettazioneprogrammazione">Dai meccanismi alla buona progettazione/programmazione</h2>
<h3 id="la-nostra-analisi-delloo-in-java-finora-ci-ha-insegnato">La nostra analisi dell’OO in Java finora, ci ha insegnato:</h3>
<ul>
<li>Parte imperativa/procedurale di Java (tipi primitivi, operatori, cicli)</li>
<li>Classi, oggetti, costruttori, campi, metodi</li>
<li>Codice statico, controllo d’accesso</li>
</ul>
<h3 id="detto-ciò-come-realizziamo-un-buon-sistema">Detto ciò, come realizziamo un buon sistema?</h3>
<p>Come programmiamo il sistema</p>
<ul>
<li>per giungere al risultato voluto (<em>soddisfacimento requisiti</em>, funzionali e non), e</li>
<li>così che sia <em>facilmente manutenibile (estendibile, flessibile, leggibile)</em>?</li>
</ul>
<p>$\Rightarrow$ un lunghissimo percorso: muoviamo i primi passi..</p>
<h3 id="il-nostro-approccio-per-passi">Il nostro approccio: per passi</h3>
<!-- *  Ricapitoleremo le principali convenzioni sul codice Java -->
<ul>
<li>Anticiperemo alcune tecniche di programmazione efficace basate su
<ul>
<li>tecniche di <em><strong>incapsulamento</strong></em></li>
<li>principio di <em><strong>decomposizione</strong></em> ($\Leftarrow$ aspetto cruciale della OO)</li>
</ul>
</li>
<li>Daremo qualche linea guida utile in future per costruire sistemi di più grosse dimensioni</li>
</ul>
<p>Nota: sono tecniche/linee guida importanti per gestire il livello di articolazione di Java</p>
<!-- Nota: tutte queste tecniche e linee guida sono necessarie per gestire il livello di articolazione del linguaggio Java, ossia per rendere il suo uso più semplice possibile -->
</section><section>
<h1 id="decomposizione-incapsulamento-information-hiding">Decomposizione, incapsulamento, information hiding</h1>
</section><section>
<h2 id="il-principo-di-decomposizione-divide-et-impera">Il principo di decomposizione: <strong>divide et impera</strong></h2>
<h3 id="dividi-e-conquista-approccio-top-down">Dividi e conquista: approccio <em><strong>top-down</strong></em></h3>
<ul>
<li>La soluzione di un problema complesso avviene dividendolo in problemi più semplici</li>
<li>La suddivisione è spesso multi-livello</li>
</ul>
<h3 id="esempi">Esempi</h3>
<ul>
<li>SW calcolatrice con GUI: GUI, gestione eventi, calcoli matematici</li>
<li>Disegno Mandelbrot: Complex, Mandelbrot, MandelbrotApp</li>
</ul>
</section><section>
<h2 id="decomposizione-modularità-e-dipendenze">Decomposizione, modularità, e dipendenze</h2>
<h3 id="un-punto-cruciale-della-decomposizione-è-la-modularità">Un punto cruciale della decomposizione è la <strong>modularità</strong></h3>
<ul>
<li><strong>Modularità</strong>: il grado con cui un sistema è formato da “moduli” separati e combinabili
<ul>
<li>La suddivisione (in moduli) va fatta in modo tale che sia effettivamente conveniente</li>
<li>Bisogna isolare i “sottoproblemi” più semplici</li>
</ul>
</li>
<li><strong>Dipendenza</strong>: modulo $A$ è una <em>dipendenza</em> del modulo $B$ se $B$ ha bisogno di $A$ per alcune sue funzioni
<ul>
<li>Una dipendenza crea un <strong>accoppiamento (coupling)</strong></li>
</ul>
</li>
<li>Bisogna cercare di ridurre al massimo le <em>“dipendenze”</em> fra i sottoproblemi (ovvero, di favorire un <em>accoppiamento lasco</em> [<em>loose coupling</em>]), il che consente:
<ul>
<li>più autonomia decisionale</li>
<li>meno interazione con altri</li>
<li><em><strong>meno influenze negative nel caso di modifiche</strong></em> (se il modulo $A$ cambia, può essere necessario modificare come conseguenza il modulo “dipendente” $B$)</li>
</ul>
</li>
<li><strong>Coesione</strong>: il grado con cui una serie di componenti lavora bene insieme</li>
</ul>
</section><section>
<p><img src="imgs/modularity.png" alt=""></p>
<p><strong>modularità = alta coesione intra-modulo + basso accoppiamento inter-moduli</strong></p>
<!--

---
  
### Esempi di decomposizione per la calcolatrice



*  Caso 1: calcolatrice completa per soli numeri naturali, e parte separata per i reali
*  Caso 2: grafica separata da calcoli matematici
* $\Rightarrow$ quale dei due casi porta a meno dipendenze (ossia è più modulare)?
  
-->
</section><section>
<h2 id="decomposizione-e-programmazione-oo">Decomposizione e programmazione OO</h2>
<h3 id="nella-programmazione-oo-almeno-3-livelli-di-decomposizione">Nella programmazione OO, almeno 3 livelli di decomposizione</h3>
<ul>
<li>Suddivisione in <em>package</em> (dell’intero programma)</li>
<li>Suddivisione in <em>classi</em> (di un package o programma)</li>
<li>Suddivisione in <em>metodi</em> (di una classe)</li>
</ul>
<h3 id="il-punto-cruciale-da-affrontare-ora-è-la-suddivisone-in-classi">Il punto cruciale da affrontare ora è la suddivisone in classi</h3>
<ul>
<li>È necessario suddividire il codice in classi nel modo opportuno</li>
<li>Creando il miglior link col <em>“problem space”</em></li>
<li><em><strong>Diminuendo il più possibile le dipendenze fra classi</strong></em></li>
</ul>
<h3 id="tecnica">Tecnica</h3>
<ul>
<li>Esistono consolidate pratiche di programmazione efficace che risolvono il problema, e che cominceremo ad analizzare in questa lezione – farlo bene richiede molto tempo ed esperienza!</li>
</ul>
</section><section>
<h2 id="dipendenze-e-oo">Dipendenze e OO</h2>
<h3 id="dipendenza">Dipendenza</h3>
<p>Una classe <code>A</code> <strong>dipende da</strong> una classe <code>B</code> se in <code>A</code> <em>si menziona</em> <code>B</code> (ad es. come input di un metodo) o qualche sua proprietà.</p>
<ul>
<li>La dipendenza è tanto più profonda (<strong>high coupling</strong>) quanto più in <code>A</code> si usano anche <em>costruttori / campi / metodi</em> di <code>B</code>.</li>
</ul>
<p>Implicazione</p>
<ul>
<li><em>Una dipendenza vincola fortemente la capacità di fare modifiche, perché ne comporta altre in cascata</em>.
<ul>
<li>Se <code>A</code> dipende da <code>B</code> e modifico <code>B</code>, dovrò probabilmente modificare anche <code>A</code>.</li>
</ul>
</li>
</ul>
<h3 id="la-sindrome-dellintoccabilitàsw">La sindrome dell’“intoccabilità”—<em>SW “rigido”</em></h3>
<p>Costruendo software complesso con troppe dipendenze, si giunge al punto che ogni singola modifica ne richiederebbe molte altre, e rischierebbe quindi di essere troppo costosa – risultato: non si cambia più il software!</p>
</section><section>
<h2 id="incapsulamento-1">Incapsulamento</h2>
<h3 id="definizione">Definizione</h3>
<p><strong>Incapsulamento</strong>: il grado con cui un insieme di dati e funzioni sono <em>“parte interna”</em> di un oggetto</p>
<p>L’incapsulamento si fonda su due ingredienti cruciali della programmazione OO:</p>
<ol>
<li><strong>Impacchettamento dati + funzioni per manipolarli</strong></li>
<li><strong>Information hiding</strong> (via <em>controllo d’accesso</em>)</li>
</ol>
</section><section>
<h3 id="incapsulamento-linee-guida">Incapsulamento: linee guida</h3>
<ul>
<li>Ogni classe dichiari <code>public</code> solo quei (pochi) metodi/costruttori necessari a interagire con (o creare) le sue istanze</li>
<li>Il resto (che quindi include meri aspetti realizzativi) sia <code>private</code>
<ul>
<li>metodi/costruttori a solo uso interno</li>
<li><strong>tutti</strong> i campi (ossia lo stato interno)</li>
</ul>
</li>
</ul>
<h3 id="lincapsulamento-aiuta-a-limitare-dipendenzeaccoppiamento">L’incapsulamento aiuta a limitare dipendenze/accoppiamento</h3>
<ul>
<li>Limitando la parti <code>public</code>, si riduce la superficie accessibile e quindi la dipendenza potenziale</li>
<li>Il “cliente” è debolmente influenzato da possibili modifiche future riguardanti meri aspetti realizzativi.</li>
</ul>
</section><section>
<h2 id="esempio-base-conteggio-non-incapsulato">Esempio base: conteggio (NON incapsulato)</h2>
<ul>
<li>dati e funzioni sono tenuti separati</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">package</span> <span style="color:#000">it.unibo.encapsulation.bad</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">CounterValue</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">value</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">CounterValue</span>(<span style="color:#a90d91">int</span> <span style="color:#000">value</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span>.<span style="color:#836c28">value</span> <span style="color:#000">=</span> <span style="color:#000">value</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">package</span> <span style="color:#000">it.unibo.encapsulation.bad</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">CounterFunctions</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">static</span> <span style="color:#000">CounterValue</span> <span style="color:#000">increment</span>(<span style="color:#000">CounterValue</span> <span style="color:#000">cv</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">return</span> <span style="color:#a90d91">new</span> <span style="color:#000">CounterValue</span>(<span style="color:#000">cv</span>.<span style="color:#836c28">value</span> <span style="color:#000">+</span> <span style="color:#000">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#000">CounterValue</span> <span style="color:#000">result</span> <span style="color:#000">=</span> <span style="color:#000">CounterFunctions</span>.<span style="color:#836c28">increment</span>(<span style="color:#a90d91">new</span> <span style="color:#000">CounterValue</span>(<span style="color:#000">10</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Result: "</span> <span style="color:#000">+</span> <span style="color:#000">result</span>.<span style="color:#836c28">value</span>);
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="esempio-base-classe-counter-poco-incapsulata">Esempio base: classe <code>Counter</code> (POCO incapsulata)</h2>
<ul>
<li>dati e funzioni sono tenuti insieme (cosa piuttosto naturale nella OOP)</li>
<li>ma i dati sono ben visibili dall’esterno (no information hiding)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">package</span> <span style="color:#000">it.unibo.encapsulation.bad</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Counter</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">int</span> <span style="color:#000">value</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">increment</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#000">value</span><span style="color:#000">++</span>;
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">package</span> <span style="color:#000">it.unibo.encapsulation.bad</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseCounter</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#000">Counter</span> <span style="color:#000">c</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Counter</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000">c</span>.<span style="color:#836c28">increment</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000">c</span>.<span style="color:#836c28">increment</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Current value: "</span> <span style="color:#000">+</span> <span style="color:#000">c</span>.<span style="color:#836c28">value</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#000">c</span>.<span style="color:#836c28">value</span> <span style="color:#000">-=</span> <span style="color:#000">10</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Current value: "</span> <span style="color:#000">+</span> <span style="color:#000">c</span>.<span style="color:#836c28">value</span>);
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="esempio-base-classe-counter-ben-incapsulata">Esempio base: classe <code>Counter</code> (ben incapsulata)</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">Counter</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Il campo è reso inaccessibile */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">int</span> <span style="color:#000">countValue</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* E' il costruttore che inizializza i campi! */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">Counter</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">countValue</span> <span style="color:#000">=</span> <span style="color:#000">0</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Unico modo per osservare lo stato */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">getValue</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">countValue</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* Unico modo per modificare lo stato */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">increment</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">countValue</span><span style="color:#000">++</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="semplice-uso">Semplice uso</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseCounter</span> {
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#000">Counter</span> <span style="color:#000">c</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Counter</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">c</span>.<span style="color:#836c28">getValue</span>()); <span style="color:#177500">// 0</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">c</span>.<span style="color:#836c28">increment</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">c</span>.<span style="color:#836c28">increment</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">c</span>.<span style="color:#836c28">increment</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">c</span>.<span style="color:#836c28">increment</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">c</span>.<span style="color:#836c28">getValue</span>()); <span style="color:#177500">// 4</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="uso-contatore">Uso contatore</h2>
<h3 id="la-classe-contatore">La classe contatore</h3>
<ul>
<li>Incapsula una semplice funzionalità di conteggio</li>
<li>Dà un approccio più astratto rispetto all’uso di un <code>int</code></li>
<li>Consende di agire sul conteggio solo con <code>getValue()</code> e <code>increment()</code></li>
<li>$\Rightarrow$ è impossibile modificare il conteggio a piacimento (o per errore), ad esempio decrementando invece che incrementando, o azzerando</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseCounter2</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#177500">/* Conto su un array, con Contatore creato internamente */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">countElements</span>(<span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">array</span>, <span style="color:#a90d91">int</span> <span style="color:#000">elem</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#000">Counter</span> <span style="color:#000">c</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Counter</span>();
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">for</span> (<span style="color:#a90d91">int</span> <span style="color:#000">i</span> : <span style="color:#000">array</span>) { <span style="color:#177500">// schema "for-each"</span>
</span></span><span style="display:flex;"><span>         <span style="color:#a90d91">if</span> (<span style="color:#000">i</span> <span style="color:#000">==</span> <span style="color:#000">elem</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#000">c</span>.<span style="color:#836c28">increment</span>();
</span></span><span style="display:flex;"><span>         }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">return</span> <span style="color:#000">c</span>.<span style="color:#836c28">getValue</span>();
</span></span><span style="display:flex;"><span>   }
</span></span></code></pre></div></section><section>
<h2 id="uso-contatore-pt-2">Uso contatore, pt 2</h2>
<h3 id="altra-possibilità">Altra possibilità</h3>
<ul>
<li>Passo il contatore alle funzioni che hanno bisogno di conteggi</li>
<li>Ciò consente un più ampio grado di riuso</li>
<li>In generale, ho aperto nuove possibilità d’uso</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>   <span style="color:#177500">/* Conto su un array, con Contatore passato in input */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">countInArray</span>(<span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">array</span>, <span style="color:#a90d91">int</span> <span style="color:#000">elem</span>, <span style="color:#000">Counter</span> <span style="color:#000">c</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">for</span> (<span style="color:#a90d91">int</span> <span style="color:#000">i</span> : <span style="color:#000">array</span>) {
</span></span><span style="display:flex;"><span>         <span style="color:#a90d91">if</span> (<span style="color:#000">i</span> <span style="color:#000">==</span> <span style="color:#000">elem</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#000">c</span>.<span style="color:#836c28">increment</span>();
</span></span><span style="display:flex;"><span>         }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#177500">/* Conto su una matrice, riusando appieno la countInArray */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">countInMatrix</span>(<span style="color:#a90d91">int</span><span style="color:#000">[][]</span> <span style="color:#000">matrix</span>, <span style="color:#a90d91">int</span> <span style="color:#000">elem</span>, <span style="color:#000">Counter</span> <span style="color:#000">c</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">for</span> (<span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">array</span> : <span style="color:#000">matrix</span>) {
</span></span><span style="display:flex;"><span>         <span style="color:#000">countInArray</span>(<span style="color:#000">array</span>, <span style="color:#000">elem</span>, <span style="color:#000">c</span>);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="riflessione-incapsulamento-e-contratto">Riflessione: incapsulamento e contratto</h2>
<h3 id="contratto">Contratto</h3>
<ul>
<li>Nel diritto, un contratto è un accordo tra due o più parti, per regolare un rapporto</li>
<li>Nell’OOP, un <strong>contratto</strong> è una specifica del <em>rapporto tra un oggetto e i suoi utilizzatori</em>
<ul>
<li>indica cosa l’oggetto si attende dai suoi utilizzatori (“obblighi”)</li>
<li>indica cosa gli utilizzatori si possono attendere dall’uso dell’oggetto (“benefici”)</li>
</ul>
</li>
<li><em>Grazie all’incapsulamento, è possibile vincolare fortemente questi contratti, controllando meglio il comportamento degli oggetti!</em></li>
</ul>
<!--
* Il contratto di un oggetto corrisponde ai suoi scenari di utilizzo
* E quindi alle aspettative che un cliente ha quando usa l'oggetto
-->
<h3 id="il-caso-del-contatore">Il caso del Contatore</h3>
<ul>
<li>L’utilizzatore può solo (1) creare un contatore; (2) ottenere il valore del contatore; e (3) incrementare il contatore</li>
<li>Il valore del conteggio all’atto della costruzione è <code>0</code></li>
<li>Il valore del conteggio in ogni altro istante è pari al numero di chiamate di <code>increment()</code></li>
</ul>
<h3 id="osservazione">Osservazione</h3>
<p>È grazie a questa idea che è più facile comporre oggetti in sistemi più complicati (vedi funzione <code>countInMatrix</code>)</p>
</section><section>
<h2 id="oggetti-immutabili">Oggetti immutabili</h2>
<h3 id="cosa-sono">Cosa sono</h3>
<ul>
<li><strong>Oggetto immutabile</strong>: oggetto per il quale è garantito che <em>il valore iniziale dei campi non cambierà mai</em></li>
<li>Portano un ulteriore livello di indipendenza (e eleganza) nel codice</li>
<li>In alcuni casi potrebbero portare a soluzioni poco performanti</li>
</ul>
<h3 id="come-si-costruiscono">Come si costruiscono</h3>
<ul>
<li>I campi della classe sono dichiarati <code>final</code> (oltre che <code>private</code>), e..
<ul>
<li>..contengono a loro volta valori primitivi o oggetti immutabili</li>
</ul>
</li>
<li>Quindi nessun metodo può modificarli (<em>solo i costruttori possono, la prima volta</em>)</li>
<li>Pattern di utilizzo: <em>invece che cambiare i campi si possono solo creare nuovi oggetti con il nuovo stato desiderato</em></li>
</ul>
<h3 id="osservazione-1">Osservazione</h3>
<p>Per ora è sufficiente saperli riconoscere e costruire</p>
<h3 id="favorire-sempre-immutabilità-ove-possibile--un-principio-avanzato">Favorire sempre immutabilità ove possibile – un principio avanzato</h3>
<p>Indicare anche <code>final</code> variabili e argomenti che non verranno modificati</p>
</section><section>
<h2 id="immutablepoint3d"><code>ImmutablePoint3D</code></h2>
<div class="smaller">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">ImmutablePoint3D</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">x</span>; <span style="color:#177500">// x coordinate</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">y</span>; <span style="color:#177500">// y coordinate</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">z</span>; <span style="color:#177500">// z coordinate</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#000">ImmutablePoint3D</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">x</span>, <span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">y</span>, <span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">z</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">x</span> <span style="color:#000">=</span> <span style="color:#000">x</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">y</span> <span style="color:#000">=</span> <span style="color:#000">y</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">z</span> <span style="color:#000">=</span> <span style="color:#000">z</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">double</span> <span style="color:#000">getSquareModule</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">x</span> <span style="color:#000">*</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">x</span> <span style="color:#000">+</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">y</span> <span style="color:#000">*</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">y</span> <span style="color:#000">+</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">z</span> <span style="color:#000">*</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">z</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">double</span> <span style="color:#000">getX</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">x</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">double</span> <span style="color:#000">getY</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">y</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">double</span> <span style="color:#000">getZ</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">z</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#177500">/* A method that changes state is mimicked by creating a new object */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#000">ImmutablePoint3D</span> <span style="color:#000">translate</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">x</span>, <span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">y</span>, <span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">z</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">return</span> <span style="color:#a90d91">new</span> <span style="color:#000">ImmutablePoint3D</span>(<span style="color:#a90d91">this</span>.<span style="color:#836c28">x</span> <span style="color:#000">+</span> <span style="color:#000">x</span>, <span style="color:#a90d91">this</span>.<span style="color:#836c28">y</span> <span style="color:#000">+</span> <span style="color:#000">y</span>, <span style="color:#a90d91">this</span>.<span style="color:#836c28">z</span> <span style="color:#000">+</span> <span style="color:#000">z</span>);
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></div>
</section><section>
<h2 id="useimmutablepoint3d"><code>UseImmutablePoint3D</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseImmutablePoint3D</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">final</span> <span style="color:#000">ImmutablePoint3D</span> <span style="color:#000">p</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">ImmutablePoint3D</span>(<span style="color:#000">10</span>, <span style="color:#000">20</span>, <span style="color:#000">30</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#177500">// l'oggetto puntato da p non potrà essere modificato</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">ImmutablePoint3D</span> <span style="color:#000">q</span> <span style="color:#000">=</span> <span style="color:#000">p</span>.<span style="color:#836c28">translate</span>(<span style="color:#000">1</span>, <span style="color:#000">1</span>, <span style="color:#000">1</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#177500">// q punta ad un nuovo oggetto</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">p</span>.<span style="color:#836c28">getX</span>() <span style="color:#000">+</span> <span style="color:#c41a16">" "</span> <span style="color:#000">+</span> <span style="color:#000">p</span>.<span style="color:#836c28">getY</span>() <span style="color:#000">+</span> <span style="color:#c41a16">" "</span> <span style="color:#000">+</span> <span style="color:#000">p</span>.<span style="color:#836c28">getZ</span>());
</span></span><span style="display:flex;"><span>      <span style="color:#177500">// 10,20,30</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">q</span>.<span style="color:#836c28">getX</span>() <span style="color:#000">+</span> <span style="color:#c41a16">" "</span> <span style="color:#000">+</span> <span style="color:#000">q</span>.<span style="color:#836c28">getY</span>() <span style="color:#000">+</span> <span style="color:#c41a16">" "</span> <span style="color:#000">+</span> <span style="color:#000">q</span>.<span style="color:#836c28">getZ</span>());
</span></span><span style="display:flex;"><span>      <span style="color:#177500">// 11,21,31</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">q</span> <span style="color:#000">=</span> <span style="color:#000">q</span>.<span style="color:#836c28">translate</span>(<span style="color:#000">1</span>, <span style="color:#000">1</span>, <span style="color:#000">1</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#177500">// la variabile q punta ad un nuovo oggetto</span>
</span></span><span style="display:flex;"><span>      <span style="color:#177500">// il vecchio verrà eleminato dal GC</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">q</span>.<span style="color:#836c28">getX</span>() <span style="color:#000">+</span> <span style="color:#c41a16">" "</span> <span style="color:#000">+</span> <span style="color:#000">q</span>.<span style="color:#836c28">getY</span>() <span style="color:#000">+</span> <span style="color:#c41a16">" "</span> <span style="color:#000">+</span> <span style="color:#000">q</span>.<span style="color:#836c28">getZ</span>());
</span></span><span style="display:flex;"><span>      <span style="color:#177500">// 12,22,32</span>
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h1 id="una-metodologia-basata-sullincapsulamento">Una metodologia basata sull’incapsulamento</h1>
<h2 id="altro-esempio-classe-lamp">Altro esempio: classe <code>Lamp</code></h2>
<h3 id="analisi-del-problema">Analisi del problema</h3>
<p>In un sistema domotico, dovremo gestire un certo numero di lampadine (da accendere/spegnere e pilotare tramite un apposito controllore centralizzato, oltre che tramite i comandi a muro). Tali comandi sono a pulsante con controllo di intensità (10 livelli). Il controllore deve poter accedere alla situazione di ogni lampadina (accesa/spenta, livello di intensità) e modificarla a piacimento. Al primo avvio, le lampadine sono spente e il controllo di intensità è a zero (in un intervallo $[0,1]$).</p>
<p>Come procediamo alla costruzione della classe <code>Lamp</code>?</p>
</section><section>
<h2 id="progettazione-e-implementazione-fasi">Progettazione e implementazione: fasi</h2>
<h3 id="fasi-nella-costruzione-di-una-classe">Fasi nella costruzione di una classe</h3>
<ul>
<li>Progettazione della <em>parte pubblica</em> della classe</li>
<li>Costruzione dello <em>stato</em></li>
<li>Completamento <em>implementazione</em></li>
<li>Miglioramento codice finale (<em>refactoring</em>)</li>
<li><em>Test</em> del risultato</li>
</ul>
</section><section>
<h2 id="fase-1-progettazione-della-parte-pubblica-della-classe">Fase 1: Progettazione della parte pubblica della classe</h2>
<p>Ovvero, del nome della classe e delle signature di operazioni pubbliche (metodi e costruttori)</p>
<h3 id="linee-guida">Linee guida</h3>
<ul>
<li>Considerare tutti i vari <em>casi d’uso</em> di un oggetto della classe</li>
<li>Inserire <em>costruttori e metodi pubblici solo per le operazioni necessarie</em>
<ul>
<li>Evitare ove possibile di inserire un numero elevato di tali operazioni</li>
</ul>
</li>
</ul>
<h3 id="il-caso-lamp">Il caso <code>Lamp</code></h3>
<ul>
<li>Un costruttore unico senza argomenti</li>
<li>Metodi per accendere/spegnere</li>
<li>Metodi per aumentare/ridurre/impostare intensità</li>
<li>Metodi per accedere allo stato della lampadina</li>
</ul>
</section><section>
<h2 id="parte-pubblica-della-classe-lamp">Parte pubblica della classe <code>Lamp</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">/* Classe d'esempio che modella il concetto di Lampadina
</span></span></span><span style="display:flex;"><span><span style="color:#177500">   in un sistema Domotico */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Lamp</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* Inizializzazione */</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">Lamp</span>() { .. }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* Accendo/Spengo */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>() { .. }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOff</span>() { .. }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* Meno intenso/Più intenso/Quanto intenso */</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">dim</span>() { .. }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">brighten</span>() { .. }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">setIntensity</span>(<span style="color:#a90d91">double</span> <span style="color:#000">value</span>) { .. }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* Selezione */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">double</span> <span style="color:#000">getIntensity</span>() { .. }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isSwitchedOn</span>() { .. }
</span></span><span style="display:flex;"><span>} 
</span></span></code></pre></div></section><section>
<h2 id="fase-2-costruzione-dello-stato">Fase 2: Costruzione dello stato</h2>
<p>Ovvero, dei campi privati della classe</p>
<h3 id="linee-guida-1">Linee guida</h3>
<ul>
<li>Considerare che esistono varie scelte possibili (è un aspetto implementativo, ritrattabile successivamente)</li>
<li>L’insieme dei campi deve essere più piccolo possibile, per esigenze di performance (spazio in memoria) e di non duplicazione</li>
<li>L’insieme dei campi deve essere sufficiente a tenere traccia di tutti i modi in cui il comportamento dell’oggetto può cambiare a fronte dei messaggi ricevuti</li>
</ul>
<h3 id="il-caso-lamp-1">Il caso <code>Lamp</code></h3>
<ul>
<li>Dovremo sapere se è accesa o spenta (<code>boolean switchedOn</code>)</li>
<li>Dovremo sapere il livello attuale di intensità (<code>double intensity</code>)</li>
<li>Non sembrano servire altre informazioni</li>
</ul>
</section><section>
<h2 id="stato-e-metodi-della-classe-lamp">Stato e metodi della classe <code>Lamp</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">/* Classe d'esempio che modella il concetto di Lampadina
</span></span></span><span style="display:flex;"><span><span style="color:#177500">   in un sistema Domotico */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Lamp</span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* Campi */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">switchedOn</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">double</span> <span style="color:#000">intensity</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* Costruttore */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">Lamp</span>(){ .. }
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* Metodi */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>(){ .. }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOff</span>(){ .. }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">dim</span>(){ .. }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">brighten</span>(){ .. }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">setIntensity</span>(<span style="color:#a90d91">double</span> <span style="color:#000">value</span>){ .. }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">double</span> <span style="color:#000">getIntensity</span>(){ .. }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isSwitchedOn</span>(){ .. }
</span></span><span style="display:flex;"><span>} 
</span></span></code></pre></div></section><section>
<h2 id="fase-3-completamento-implementazione">Fase 3: Completamento implementazione</h2>
<p>Ovvero, del corpo di costruttori e metodi</p>
<h3 id="linee-guida-2">Linee guida</h3>
<ul>
<li>Realizzare il corpo di ogni costruttore e metodo in modo compatibile col contratto previsto per la classe</li>
<li>Accettare il fatto che la prima versione prodotta non necessariamente sarà quella finale</li>
</ul>
<h3 id="il-caso-lamp-2">Il caso <code>Lamp</code></h3>
<ul>
<li><code>switchOn()</code>, <code>switchOff()</code> sono semplici <em><strong>setter</strong></em> del campo <code>switchedOn</code></li>
<li><code>isSwitchedOn()</code>, <code>getIntensity()</code> semplici <em><strong>getter</strong></em> dei due campi</li>
<li><code>dim()</code> e <code>brigthen()</code> modificano il campo <code>intensity</code> (se nel range!)</li>
</ul>
</section><section>
<h2 id="prima-versione-classe-lamp">Prima versione Classe Lamp</h2>
<div class="smaller">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Lamp</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">double</span> <span style="color:#000">intensity</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">switchedOn</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">Lamp</span>(){
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span>;
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> <span style="color:#000">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>(){
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOff</span>(){
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">dim</span>(){
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> (<span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span>.<span style="color:#836c28">1</span> <span style="color:#000">?</span> <span style="color:#000">0</span> : <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span><span style="color:#000">-</span><span style="color:#000">0</span>.<span style="color:#836c28">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">brighten</span>(){
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> (<span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">&gt;</span> <span style="color:#000">0</span>.<span style="color:#836c28">9</span>  <span style="color:#000">?</span> <span style="color:#000">1</span> : <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span><span style="color:#000">+</span><span style="color:#000">0</span>.<span style="color:#836c28">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">setIntensity</span>(<span style="color:#a90d91">double</span> <span style="color:#000">value</span>){
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> <span style="color:#000">value</span>;
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">if</span> (<span style="color:#000">value</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span>) { <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> <span style="color:#000">0</span>; } <span style="color:#177500">// Mal formattato!</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">if</span> (<span style="color:#000">value</span> <span style="color:#000">&gt;</span> <span style="color:#000">1</span>) { <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> <span style="color:#000">1</span>; } <span style="color:#177500">// Mal formattato!</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">double</span> <span style="color:#000">getIntensity</span>(){
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isSwitchedOn</span>(){
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>} 
</span></span></code></pre></div></div>
</section><section>
<h2 id="fase-4-miglioramento-codice-finale">Fase 4: Miglioramento codice finale</h2>
<h3 id="linee-guida-3">Linee guida</h3>
<ul>
<li>Inserire commenti nel codice</li>
<li>Verificare la necessità di costanti per evitare numeri “magici”</li>
<li>Eventualmente fattorizzare sotto-funzioni in metodi/costruttori pubblici/privati, per evitare duplicazioni</li>
</ul>
<h3 id="in-concreto-in-questo-caso">In concreto in questo caso</h3>
<ul>
<li>Vi sono numeri magici, usare costanti!</li>
<li>Gestire meglio il limite $0..1$</li>
<li>Evitare livelli intermedi ($0.145$) di luminosità</li>
<li>Ritrattare la scelta del tipo del campo <code>intensity</code> – meglio un <code>int</code> fra $0$ e $10$!!</li>
</ul>
</section><section>
<h2 id="versione-finale-classe-lamp">Versione finale Classe Lamp</h2>
<div class="container">
<div class="col">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Lamp</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#177500">/* Costanti luminosità */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">LEVELS</span> <span style="color:#000">=</span> <span style="color:#000">10</span>;
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">DELTA</span> <span style="color:#000">=</span> <span style="color:#000">0</span>.<span style="color:#836c28">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#177500">/* Campi della classe */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">int</span> <span style="color:#000">intensity</span>;
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">switchedOn</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#177500">/* Costruttore */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#000">Lamp</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> <span style="color:#000">0</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#177500">/* Gestione switching */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOn</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">true</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOff</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isSwitchedOn</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">switchedOn</span>;
</span></span><span style="display:flex;"><span>   }
</span></span></code></pre></div></div>
<div class="col">
<div class="smaller">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>   <span style="color:#177500">/* Gestione intensita' */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">void</span> <span style="color:#000">correctIntensity</span>() { <span style="color:#177500">// A solo uso interno</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">if</span> (<span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span>) {
</span></span><span style="display:flex;"><span>         <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> <span style="color:#000">0</span>;
</span></span><span style="display:flex;"><span>      } <span style="color:#a90d91">else</span> <span style="color:#a90d91">if</span> (<span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">&gt;</span> <span style="color:#000">LEVELS</span>) {
</span></span><span style="display:flex;"><span>         <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> <span style="color:#000">LEVELS</span>;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">setIntensity</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">value</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">=</span> <span style="color:#000">Math</span>.<span style="color:#836c28">round</span>((<span style="color:#a90d91">float</span>) (<span style="color:#000">value</span> <span style="color:#000">/</span> <span style="color:#000">DELTA</span>));
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">correctIntensity</span>();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">dim</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span><span style="color:#000">--</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">correctIntensity</span>();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">brighten</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span><span style="color:#000">++</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">this</span>.<span style="color:#836c28">correctIntensity</span>();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">double</span> <span style="color:#000">getIntensity</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">intensity</span> <span style="color:#000">*</span> <span style="color:#000">DELTA</span>;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">toString</span>() {
</span></span><span style="display:flex;"><span>	   <span style="color:#a90d91">return</span> <span style="color:#c41a16">"Acceso: "</span> <span style="color:#000">+</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">isSwitchedOn</span>() <span style="color:#000">+</span> <span style="color:#c41a16">" Intensità: "</span> <span style="color:#000">+</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">getIntensity</span>();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></div>
</div>
</div>
</section><section>
<h2 id="fase-5-test-del-risultato">Fase 5: Test del risultato</h2>
<h3 id="linee-guida-4">Linee guida</h3>
<ul>
<li>Definire un insieme di scenari d’uso di un oggetto</li>
<li>Per ognuno costruire una procedura che crea l’oggetto, lo usa, e stampa i risultati necessari</li>
</ul>
<h3 id="il-caso-lamp-3">Il caso <code>Lamp</code></h3>
<p>Un possibile caso (non costituisce da solo un test esaustivo):</p>
<ul>
<li>Costruisco l’oggetto lampadina</li>
<li>La accendo</li>
<li>Imposto la luminosità, poi la vario un poco</li>
<li>Leggo e stampo lo stato del sistema</li>
</ul>
</section><section>
<h2 id="classe-uselamp">Classe UseLamp</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseLamp</span> {
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">test1</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">final</span> <span style="color:#000">Lamp</span> <span style="color:#000">l</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Lamp</span>();
</span></span><span style="display:flex;"><span>      <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">l</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#000">l</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>      <span style="color:#000">l</span>.<span style="color:#836c28">setIntensity</span>(<span style="color:#000">0</span>.<span style="color:#836c28">5</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#000">l</span>.<span style="color:#836c28">dim</span>();
</span></span><span style="display:flex;"><span>      <span style="color:#000">l</span>.<span style="color:#836c28">dim</span>();
</span></span><span style="display:flex;"><span>      <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">l</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#000">l</span>.<span style="color:#836c28">brighten</span>();
</span></span><span style="display:flex;"><span>      <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">l</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#177500">// Acceso: true Intensità: 0.4</span>
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#a90d91">final</span> <span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#000">UseLamp</span>.<span style="color:#836c28">test1</span>();
</span></span><span style="display:flex;"><span>      <span style="color:#177500">// altri test...</span>
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="il-metodo-tostring">Il metodo toString()</h2>
<h3 id="una-convenzione-java">Una convenzione Java</h3>
<ul>
<li>Ogni classe dovrebbe definire un metodo <code>toString()</code></li>
<li>Questo deve restituire una rappresentazione in stringa dell’oggetto</li>
<li>Così si incapsula anche la funzionalità di presentazione (su console)</li>
<li>Tale metodo è quello che viene automaticamente chiamato quando si usa l’operatore <code>+</code> per concatenare stringhe a oggetti</li>
</ul>
</section><section>
<h2 id="uselamp-uso-di-tostring">UseLamp: uso di toString</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseLampString</span> {
</span></span><span style="display:flex;"><span>  	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#000">LampString</span> <span style="color:#000">l</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">LampString</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000">l</span>.<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000">l</span>.<span style="color:#836c28">setIntensity</span>(<span style="color:#000">0</span>.<span style="color:#836c28">5</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#000">l</span>.<span style="color:#836c28">dim</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000">l</span>.<span style="color:#836c28">dim</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000">l</span>.<span style="color:#836c28">brighten</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">l</span>.<span style="color:#836c28">toString</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Oppure : "</span> <span style="color:#000">+</span> <span style="color:#000">l</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="il-collaudo-di-lamp-è-completato">Il collaudo di Lamp è completato?</h2>
<h3 id="quanti-scenari-di-test-vanno-preparati">Quanti scenari di test vanno preparati?</h3>
<ul>
<li>
<p>Non c’è un numero giusto</p>
</li>
<li>
<p>Non è possibile in generale controllare in modo completo</p>
</li>
<li>
<p>Bisogna trovare il giusto rapporto tempo/risultato</p>
</li>
<li>
<p>Certamente, un unico scenario è insufficiente</p>
</li>
<li>
<p>La metodologia <em>test-driven development</em> consiglia di costruire test esaustivi prima dell’effettivo sviluppo di ogni funzionalità</p>
<ul>
<li>Inizialmente percepito come un po’ noioso</li>
<li>Sembra far perdere tempo</li>
<li>Spesso ripaga in termini di temi complessivi e qualità del software profotto</li>
<li>Supportata da framework dedicati ai test (<em>JUnit</em>)</li>
</ul>
</li>
</ul>
</section><section>
<h1 id="incapsulamento-2">Incapsulamento</h1>
<h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="danilo-pianini"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini — <code>danilo.pianini@unibo.it</code></a></h3>
<h3 id="gianluca-aguzzi"><a href="mailto:gianluca.aguzzi@unibo.it">Gianluca Aguzzi — <code>gianluca.aguzzi@unibo.it</code></a></h3>
<h3 id="angelo-filaseta"><a href="mailto:angelo.filaseta@unibo.it">Angelo Filaseta — <code>angelo.filaseta@unibo.it</code></a></h3>
<p>Compiled on: 2025-09-08
 — <a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
<p><a href=".."><i class="fa fa-undo" aria-hidden="true"></i> back</a></p>
<!--

---



# Ulteriori convenzioni e linee guida


## Convenzione Java sui nomi di metodi getter/setter


  
### Metodi getter/setter



*  Un metodo *__getter__* è un metodo che senza input restituisce un valore, una proprietà dell'oggetto
*  Un metodo *__setter__* è un metodo che restituisce `void` e accetta un valore che modifica una proprietà dell'oggetto
*  (Tali proprietà sono spesso campi, ma ciò non è necessario)
*  In `Lamp`, `getIntensity` e `isSwitchedOn` sono getter, `setIntensity` è un setter
  


  
### Convenzione sul nome del metodo: sia data la proprietà `XYZ` di tipo `T`



*  Getter non booleano: `T getXYZ(){...}`
*  Getter booleano: `boolean getXYZ(){...}` o anche `boolean isXYZ() {...}`
*  Setter: `void setXYZ() {...}`
  




---


## Getter/setter in Lamp

```java
public class Lamp{
    ...
    
    // Setter per proprieta' Intensity di tipo double 
    public void setIntensity(double value){
    	...
    }
    
    // Getter per proprieta' Intensity di tipo double
    public double getIntensity(){
    	...
    }
    
    // Getter per proprieta' SwitchedOn di tipo boolean
    public boolean isSwitchedOn(){
    	...
    }
} 
```



---



## LampUtilities


```java
public class LampUtilities {

   /* Costruisco una fila di lampadine */
   public static Lamp[] buildLampRow(final int size) {
      final Lamp[] array = new Lamp[size];
      for (int index = 0; index < size; index++) {
         array[index] = new Lamp();
      }
      return array;
   }

   /* Accendo/spengo una fila di lampadine */
   public static void switchAll(final boolean switchedOn, final Lamp[] array) {
      for (Lamp l : array) {
         if (switchedOn) {
            l.switchOn();
         } else {
            l.switchOff();
         }
      }
   }
}

```

--></section>

  


</div>
      

    </div>
<script type="text/javascript" src="/reveal-hugo/object-assign.js"></script>

<a href="/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"900","highlight_theme":"default","history":true,"mermaid":[{"startOnLoad":false}],"slide_number":true,"theme":"white","transition":"slide","transition_speed":"fast","width":"1440"}</script>
<script type="application/json" id="reveal-hugo-page-params">null</script>

<script src="/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }

  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = { 
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>






  

  

  

  

  

  

  
    
  

  
    
  

  
    
  

  

  
    
  

  

  
    
  

  

  

  
    
  

  
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  



  <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({"startOnLoad":false});

    let render = (event) => {
      let mermaidElems = event.currentSlide.querySelectorAll('.mermaid');
      if (!mermaidElems.length){
          return
      }
      mermaidElems.forEach(mermaidElem => {
          let processed = mermaidElem.getAttribute('data-processed');
          if (!processed){
              
              mermaid.init(undefined, mermaidElem);
          }
      });
    };
    
    render({currentSlide: Reveal.getCurrentSlide()});

    Reveal.on('slidechanged', render);
    Reveal.on('ready', render);
  </script>

    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<script>
  if (/.*?(\?|&)print-pdf/.test(window.location.toString())) {
      var ytVideos = document.getElementsByTagName("iframe")
      for (let i = 0; i < ytVideos.length; i++) {
          var videoFrame = ytVideos[i]
          var isYouTube = /^https?:\/\/(www.)youtube\.com\/.*/.test(videoFrame.src)
          if (isYouTube) {
              console.log(`Removing ${videoFrame.src}`)
              var parent = videoFrame.parentElement
              videoFrame.remove()
              var p = document.createElement('p')
              p.append(
                  document.createTextNode(
                      "There was an embedded video here, but it is disabled in the printed version of the slides."
                  )
              )
              p.append(document.createElement('br'))
              p.append(
                  document.createTextNode(
                      `Visit instead ${
                          videoFrame.src
                      } or ${
                          videoFrame.src.replace(
                              /(^https?:\/\/(www.)youtube\.com)\/(embed\/)(\w+).*/,
                              "https://www.youtube.com/watch?v=$4"
                          )
                      }`
                  )
              )
              parent.appendChild(p)
          }
      }
  }
</script>

    
  

</body></html>