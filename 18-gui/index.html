<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
<title>Progettazione e Sviluppo del Software</title>
<meta name="description" content="Progettazione e Sviluppo del Software, Tecnologie dei Sistemi Informatici">
<meta name="author" content="Danilo Pianini">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/css/custom-theme.min.a4fa52f33d9607dcbf50620a7322e56fd2e40ee60098a906694a07340df33ce7.css" id="theme"><link rel="stylesheet" href="/highlight-js/default.min.css">
    
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="interfacce-utente-grafiche-gui-con-javafx">Interfacce utente grafiche (GUI) con JavaFX</h1>
<h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="roberto-casadei-----robycasadeiuniboitmailtorobycasadeiuniboit"><a href="mailto:roby.casadei@unibo.it">Roberto Casadei — <code>roby.casadei@unibo.it</code></a></h3>
<h3 id="danilo-pianini-----danilopianiniuniboitmailtodanilopianiniuniboit"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini — <code>danilo.pianini@unibo.it</code></a></h3>
<p><a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
</section><section>
<!-- <h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="roberto-casadei-----robycasadeiuniboitmailtorobycasadeiuniboit"><a href="mailto:roby.casadei@unibo.it">Roberto Casadei &mdash; <code>roby.casadei@unibo.it</code></a></h3>
<h3 id="danilo-pianini-----danilopianiniuniboitmailtodanilopianiniuniboit"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini &mdash; <code>danilo.pianini@unibo.it</code></a></h3>
<p><a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
</section><section>
<h2 id="nota">Nota</h2>
<ul>
<li>
<p>Questo materiale è ampiamente basato su quello realizzato dal Prof.
Mirko Viroli, che ringrazio.</p>
</li>
<li>
<p>Ogni errore riscontratovi è esclusiva responsabilità degli autori di questo documento.</p>
</li>
</ul>
 -->
<h2 id="introduzione-a-javafx">Introduzione a JavaFX</h2>
</section><section>
<h3 id="javafx">JavaFX</h3>
<ul>
<li>
<p>Libreria Java per la creazione di GUI per Rich Applications multi-piattaforma</p>
<ul>
<li>Disponibile dal 2008 (v. 1.0 – 2.2) come libreria stand-alone</li>
<li>Presente ``<em>stabilmente</em>’’ nel JDK da Java 8 (v. JavaFX 8)</li>
<li><del>Introdotto ufficialmente in Java con l’idea di sostituire (gradualmente) Swing</del></li>
<li>Torna ad essere una <em>libreria stand-alone da Java 11</em>:
è opensource e parte del progetto OpenJDK – <a href="https://openjfx.io">https://openjfx.io</a></li>
</ul>
</li>
<li>
<p>Propone un look-and-feel personalizzabile</p>
<ul>
<li>La descrizione dello stile/aspetto dei componenti della GUI è separato dalla relativa implementazione</li>
<li>Segue il pattern MVC</li>
</ul>
</li>
<li>
<p>Consente la creazione di GUI moderne, di qualità e ben adattabili a qualunque piattaforma e supporto hardware</p>
</li>
</ul>
</section><section>
<h2 id="javafx-funzionalità-principali">JavaFX: funzionalità principali</h2>
<h3 id="java-apis">Java APIs</h3>
<ul>
<li>Libreria che include classi e interfacce scritte in Java <!-- e compilato con retro compatibilità fino a Java 7 --></li>
<li>Nel 2022, la versione più recente, <em>JavaFX 19</em>, richiede <em>JDK &gt;= 11</em></li>
</ul>
<h3 id="fxml-e-css-per-lo-stile">FXML (e CSS per lo stile)</h3>
<ul>
<li><strong>FXML</strong> è un linguaggio dichiarativo per definire la GUI di un’applicazione JavaFX-based</li>
<li>Il suo impiego non è indispensabile, ma fortemente consigliato per una buona <em>separation of concerns</em></li>
</ul>
<h3 id="interoperabilità-bidirezionale-con-la-libreria-java-built-in-per-gui-swing">Interoperabilità bidirezionale con la libreria Java built-in per GUI <em>Swing</em></h3>
<ul>
<li>GUI Swing esistenti possono includere componenti JavaFX (cf. <code>JFXPanel</code>)</li>
<li>E’ possibile inserire componenti Swing in interfacce JavaFX (cf. <code>SwingNode</code>)</li>
</ul>
</section><section>
<h3 id="graphics-api">Graphics API</h3>
<ul>
<li>Supporto nativo per la grafica 3D (geometrie, camere, luci)</li>
<li>Abilita la possibilità di disegnare direttamente sulla superficie (canvas) dell’applicazione</li>
</ul>
<h3 id="supporto-per-schermi-multi-touch-e-hi-dpi">Supporto per schermi Multi-touch e Hi-DPI</h3>
<ul>
<li>Fornisce il supporto per funzionalità  multi-touch (cf. <code>SwipeEvent</code>), in funzione della piattaforma in cui l’applicazione è in esecuzione</li>
<li>Garantisce una buona visualizzazione della GUI anche su schermi ad alta densità di pixel</li>
</ul>
</section><section>
<h2 id="astrazioni-fondamentali">Astrazioni fondamentali</h2>
<h3 id="stage">Stage</h3>
<ul>
<li>
<p>Il contenitore (esterno) dove la GUI sarà visualizzata</p>
<ul>
<li>es. una finestra del S.O.</li>
<li>Equivalente al <code>JFrame</code> di Swing</li>
<li>Non è compito del programmatore creare una sua istanza.</li>
</ul>
</li>
<li>
<p><a href="https://openjfx.io/javadoc/15/javafx.graphics/javafx/stage/Stage.html">https://openjfx.io/javadoc/15/javafx.graphics/javafx/stage/Stage.html</a></p>
</li>
</ul>
<h3 id="scene">Scene</h3>
<ul>
<li>
<p>Una <strong>scene</strong> rappresenta un contenuto (una <em>pagina</em> della GUI) visualizzabile sullo Stage</p>
</li>
<li>
<p>ogni Stage può avere più istanze diverse di Scene</p>
</li>
<li>
<p>Di fatto, è un container di Node(s)</p>
</li>
<li>
<p><a href="https://openjfx.io/javadoc/15/javafx.graphics/javafx/scene/Scene.html">https://openjfx.io/javadoc/15/javafx.graphics/javafx/scene/Scene.html</a></p>
</li>
</ul>
</section><section>
<h3 id="application">Application</h3>
<ul>
<li><code>Application</code>: entry point di un’applicazione JavaFX application</li>
<li>Consente di definire metodi hook sul ciclo di vita dell’applicazione (<code>init</code>, <code>start</code>, <code>stop</code>, …)</li>
<li><a href="https://openjfx.io/javadoc/15/javafx.graphics/javafx/application/Application.html">https://openjfx.io/javadoc/15/javafx.graphics/javafx/application/Application.html</a></li>
</ul>
<p>Esempio: GUI vuota</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">App</span> <span style="color:#a90d91">extends</span> <span style="color:#000">javafx</span><span style="color:#000">.</span><span style="color:#836c28">application</span><span style="color:#000">.</span><span style="color:#836c28">Application</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">@Override</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">start</span><span style="color:#000">(</span><span style="color:#000">Stage</span> <span style="color:#000">stage</span><span style="color:#000">)</span> <span style="color:#a90d91">throws</span> <span style="color:#000">Exception</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">Group</span> <span style="color:#000">root</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Group</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">Scene</span> <span style="color:#000">scene</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Scene</span><span style="color:#000">(</span><span style="color:#000">root</span><span style="color:#000">,</span> <span style="color:#000">500</span><span style="color:#000">,</span> <span style="color:#000">300</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">stage</span><span style="color:#000">.</span><span style="color:#836c28">setTitle</span><span style="color:#000">(</span><span style="color:#c41a16">"JavaFX Demo"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">stage</span><span style="color:#000">.</span><span style="color:#836c28">setScene</span><span style="color:#000">(</span><span style="color:#000">scene</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">stage</span><span style="color:#000">.</span><span style="color:#836c28">show</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h3 id="applicazione-javafx-runner">Applicazione JavaFX: runner</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">javafx.application.Application</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Main</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">)</span> <span style="color:#000">{</span> 
</span></span><span style="display:flex;"><span>	    <span style="color:#177500">// App è la classe definita nella slide precedente
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>	    <span style="color:#000">Application</span><span style="color:#000">.</span><span style="color:#836c28">launch</span><span style="color:#000">(</span><span style="color:#000">App</span><span style="color:#000">.</span><span style="color:#836c28">class</span><span style="color:#000">,</span> <span style="color:#000">args</span><span style="color:#000">);</span> 
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>   
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div><ul>
<li>ATTENZIONE: per motivi tecnici che non approfondiremo, definire il metodo <code>main()</code> dentro la classe <code>App</code> (che estende <code>Application</code>) può risultare nel seguente errore: <em>“Error: JavaFX runtime components are missing, and are required to run this application”</em> (richiederebbe l’aggiunta di JavaFX al module path all’avvio dell’applicazione)</li>
<li>Di conseguenza, si consiglia di definire <code>main</code> in una <em>classe separata da quella dell’applicazione JavaFX</em></li>
</ul>
</section><section>
<h3 id="ciclo-di-vita-di-applicazioni-javafx">Ciclo di vita di applicazioni JavaFX</h3>
<p>L’avvio mediante <code>Application.launch(App.class)</code> comporta:</p>
<ol>
<li>Avvio del runtime JavaFX <!-- %(se necessario) --></li>
<li>Istanziazione di <code>App</code> (la classe specificata che estende <code>Application</code>)</li>
<li>Invocazione metodo <code>start(javafx.stage.Stage)</code></li>
<li>Attesa terminazione applicazione
<ul>
<li>(a) mediante <code>Platform.exit()</code></li>
<li>(b) chiusura dell’ultima finestra (e <code>Platform.isImplicitExit()</code> è true)</li>
</ul>
</li>
<li>Invocazione metodo <code>stop()</code></li>
</ol>
</section><section>
<h3 id="node"><code>Node</code></h3>
<ul>
<li>Un <strong>nodo</strong> è un elemento/componente della scena</li>
<li>Ciascun nodo ha sia la parte di view (aspetto) sia la parte di controller (comportamento)</li>
<li>Hanno <strong>proprietà</strong> (con supporto al <em>binding</em>) e possono generare <strong>eventi</strong></li>
<li>Possono essere organizzati gerarchicamente
<ul>
<li>La sottoclasse <code>Parent</code> rappresenta nodi che possono avere figli (recuperabili via <code>getChildren()</code>)</li>
</ul>
</li>
<li>Un nodo ha un ID univoco, coordinate locali, può subire trasformazioni (ad es. rotazione), ha un bounding rectangle associato, e può essere stilizzato via CSS</li>
<li>Sottoclassi di <code>Node</code>: <code>SwingNode</code>, <code>Canvas</code>, <code>Parent</code></li>
<li>Sottoclassi di <code>Parent</code>: <code>Group</code> (gestisce un insieme di figli; ogni trasformazione/effetto è applicata su ogni figlio), <code>Region</code> (classe base per tutti i controlli UI e i layout)</li>
<li><a href="https://openjfx.io/javadoc/15/javafx.graphics/javafx/scene/Node.html">https://openjfx.io/javadoc/15/javafx.graphics/javafx/scene/Node.html</a></li>
</ul>
</section><section>
<h3 id="sommario">Sommario</h3>
<p><img src="imgs/javafx-app.png" alt=""></p>
</section><section>
<h3 id="struttura-di-unapplicazione-javafx-based">Struttura di un’applicazione JavaFX-based</h3>
<p><img src="imgs/javafx-app-structure.png" alt=""></p>
</section><section>
<h3 id="linee-guida">Linee guida</h3>
<ul>
<li>Si faccia riferimento al repository di esempio:
<a href="https://github.com/APICe-at-DISI/sample-javafx-project">https://github.com/APICe-at-DISI/sample-javafx-project</a></li>
</ul>
<ol>
<li>La classe principale di un’applicazione JavaFX deve estendere la classe <code>javafx.application.Application</code></li>
<li>Il metodo <code>main()</code> deve chiamare il metodo <code>launch()</code>
<ul>
<li>Si tratta di un metodo statico della classe <code>Application</code></li>
</ul>
</li>
<li>Il metodo <code>void start(Stage primaryStage)</code> è, di fatto, l’entry point dell’applicazione JavaFX (lo stage primario è creato dalla piattaforma)</li>
<li>La scena definita per lo stage (vedi metodo <code>setScene()</code>) costituisce il container principale per tutti i componenti della GUI</li>
</ol>
</section><section>
<h3 id="nodi-e-proprietà">Nodi e Proprietà</h3>
<ul>
<li>
<p>Ogni scena può essere popolata con una gerarchia di nodi</p>
</li>
<li>
<p>Ciascun nodo (componente) espone diverse proprietà</p>
</li>
<li>
<p>relative all’aspetto (es. <code>size</code>, <code>posizion</code>, <code>color</code>, \dots)</p>
</li>
<li>
<p>relative al contenuto (es. <code>text</code>, <code>value</code>, \dots)</p>
</li>
<li>
<p>relative al comportamento (es. <em>event handler</em>, <code>controller</code>, \dots)</p>
</li>
<li>
<p>Ciascun nodo genera eventi in relazione ad azioni dell’utente</p>
</li>
</ul>
</section><section>
<h3 id="gui-con-bottone-e-label">GUI con bottone e label</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Example1</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Application</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">@Override</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">start</span><span style="color:#000">(</span><span style="color:#000">Stage</span> <span style="color:#000">stage</span><span style="color:#000">)</span> <span style="color:#a90d91">throws</span> <span style="color:#000">Exception</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">Label</span> <span style="color:#000">lbl</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Label</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">lbl</span><span style="color:#000">.</span><span style="color:#836c28">setText</span><span style="color:#000">(</span><span style="color:#c41a16">"Label text here..."</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">Button</span> <span style="color:#000">btn</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Button</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">btn</span><span style="color:#000">.</span><span style="color:#836c28">setText</span><span style="color:#000">(</span><span style="color:#c41a16">"Click me"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">HBox</span> <span style="color:#000">root</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">HBox</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">root</span><span style="color:#000">.</span><span style="color:#836c28">getChildren</span><span style="color:#000">().</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">btn</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">root</span><span style="color:#000">.</span><span style="color:#836c28">getChildren</span><span style="color:#000">().</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">lbl</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">stage</span><span style="color:#000">.</span><span style="color:#836c28">setTitle</span><span style="color:#000">(</span><span style="color:#c41a16">"JavaFX - Example 1"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">stage</span><span style="color:#000">.</span><span style="color:#836c28">setScene</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Scene</span><span style="color:#000">(</span><span style="color:#000">root</span><span style="color:#000">,</span> <span style="color:#000">300</span><span style="color:#000">,</span><span style="color:#000">250</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">stage</span><span style="color:#000">.</span><span style="color:#836c28">show</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div><p>%	public static void main(String[] args) { launch(args); }</p>
</section><section>
<h3 id="binding-e-proprietà">Binding e proprietà</h3>
<ul>
<li>
<p>Per <strong>binding</strong> si intende il meccanismo che consente di collegare due proprietà fra loro, in modo unidirezionale o bidirezionale</p>
</li>
<li>
<p>Una <code>Property&lt;T&gt;</code> è un <code>ObservableValue&lt;T&gt;</code> che può essere collegato/scollegato ad altri osservabili o proprietà attraverso</p>
</li>
<li>
<p><code>bind(ObservableValue&lt;? extends T&gt; observable)</code></p>
</li>
<li>
<p><code>bindBidirectional(Property&lt;T&gt; other)</code></p>
</li>
<li>
<p><code>unbind()</code></p>
</li>
<li>
<p><code>unbindBidirectional(Property&lt;T&gt; other)</code></p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">final</span> <span style="color:#000">TextField</span> <span style="color:#000">input</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">TextField</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">final</span> <span style="color:#000">Label</span> <span style="color:#000">mirror</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Label</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">// connette la label con il valore del textfield
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span><span style="color:#000">mirror</span><span style="color:#000">.</span><span style="color:#836c28">textProperty</span><span style="color:#000">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">.</span><span style="color:#836c28">bindBidirectional</span><span style="color:#000">(</span><span style="color:#000">input</span><span style="color:#000">.</span><span style="color:#836c28">textProperty</span><span style="color:#000">());</span>
</span></span></code></pre></div></section><section>
<h3 id="layouts-13">Layouts (1/3)</h3>
<h4 id="group">Group</h4>
<ul>
<li>Non impone nessun posizionamento per i componenti figli</li>
<li>Da utilizzare per posizionare i componenti figli in posizioni fisse</li>
</ul>
<h4 id="region">Region</h4>
<ul>
<li>Tutte le sue specializzazioni forniscono diversi layout general purpose</li>
<li>Sono simili a quelli offerti da Swing</li>
</ul>
<h4 id="control">Control</h4>
<ul>
<li>Costituisce l’insieme dei layout personalizzabili</li>
<li>Ciascun layout di questo tipo fornisce specifiche API per l’aggiunta dei componenti figli</li>
</ul>
<p><a href="https://openjfx.io/javadoc/13/javafx.graphics/javafx/scene/layout/package-summary.html">https://openjfx.io/javadoc/13/javafx.graphics/javafx/scene/layout/package-summary.html</a></p>
</section><section>
<h3 id="layouts-23">Layouts (2/3)</h3>
<p><img src="imgs/layouts.png" alt=""></p>
<h4 id="aggiungere-componenti-ad-un-layout">Aggiungere componenti ad un layout</h4>
<ul>
<li>Il metodo <code>ObservableList&lt;Node&gt; getChildren()</code> restituisce la lista di nodi figli di un qualunque nodo/layout</li>
<li>Alla lista possono essere aggiunti (<code>boolean add(Node e)</code>) e gestiti i componenti figli</li>
</ul>
</section><section>
<h3 id="layouts-33">Layouts (3/3)</h3>
<p>\centering
<img src="imgs/javafx-layouts.drawio.png" alt=""></p>
</section><section>
<h3 id="eventi">Eventi</h3>
<ul>
<li>
<p>Possono essere generati in relazione nodi e alle scene</p>
</li>
<li>
<p>Fanno riferimento alla classe <code>javafx.event.Event</code></p>
</li>
<li>
<p>Come in swing, si generano in funzione di azioni dell’utente sulla GUI</p>
</li>
<li>
<p>Possono essere gestiti attraverso <em>event handlers</em> (devono implementare l’interfaccia <code>EventHandler</code>)</p>
</li>
<li>
<p>Ogni nodo può registrare uno o più event handlers</p>
</li>
<li>
<p>In generale, attraverso i metodi <code>setOn...</code>()</p>
</li>
<li>
<p>Ogni event handler deve implementare il metodo <code>void handle(ActionEvent e)</code></p>
</li>
</ul>
<h4 id="es-gestione-del-click-su-un-button-node">Es. Gestione del click su un Button Node</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000">btn</span><span style="color:#000">.</span><span style="color:#836c28">setOnMouseClicked</span><span style="color:#000">(</span><span style="color:#000">event</span> <span style="color:#000">-&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">lbl</span><span style="color:#000">.</span><span style="color:#836c28">setText</span><span style="color:#000">(</span><span style="color:#c41a16">"Hello, JavaFX World!"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">});</span>
</span></span></code></pre></div></section><section>
<h3 id="esempio-con-più-stage-12">Esempio con più Stage (1/2)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">App</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Application</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a90d91">public</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">void</span> <span style="color:#000">start</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Stage</span> <span style="color:#000">mainStage</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">final</span> <span style="color:#000">Scene</span> <span style="color:#000">scene</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Scene</span><span style="color:#000">(</span><span style="color:#000">initSceneUI</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">mainStage</span><span style="color:#000">.</span><span style="color:#836c28">setScene</span><span style="color:#000">(</span><span style="color:#000">scene</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">mainStage</span><span style="color:#000">.</span><span style="color:#836c28">setTitle</span><span style="color:#000">(</span><span style="color:#c41a16">"JavaFX Example"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">mainStage</span><span style="color:#000">.</span><span style="color:#836c28">show</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a90d91">private</span> <span style="color:#000">Parent</span> <span style="color:#000">initSceneUI</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">final</span> <span style="color:#000">Label</span> <span style="color:#000">inputLbl</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Label</span><span style="color:#000">(</span><span style="color:#c41a16">"Input: "</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">final</span> <span style="color:#000">TextField</span> <span style="color:#000">inputArea</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">TextField</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">final</span> <span style="color:#000">Button</span> <span style="color:#000">okBtn</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Button</span><span style="color:#000">(</span><span style="color:#c41a16">"Open a new Stage with the input data!"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">okBtn</span><span style="color:#000">.</span><span style="color:#836c28">setOnMouseClicked</span><span style="color:#000">(</span><span style="color:#000">event</span> <span style="color:#000">-&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a90d91">new</span> <span style="color:#000">SecondStage</span><span style="color:#000">(</span><span style="color:#000">inputArea</span><span style="color:#000">.</span><span style="color:#836c28">getText</span><span style="color:#000">()).</span><span style="color:#836c28">show</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">final</span> <span style="color:#000">BorderPane</span> <span style="color:#000">root</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">BorderPane</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">root</span><span style="color:#000">.</span><span style="color:#836c28">setRight</span><span style="color:#000">(</span><span style="color:#000">okBtn</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">root</span><span style="color:#000">.</span><span style="color:#836c28">setLeft</span><span style="color:#000">(</span><span style="color:#000">inputLbl</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">root</span><span style="color:#000">.</span><span style="color:#836c28">setCenter</span><span style="color:#000">(</span><span style="color:#000">inputArea</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">BorderPane</span><span style="color:#000">.</span><span style="color:#836c28">setAlignment</span><span style="color:#000">(</span><span style="color:#000">inputLbl</span><span style="color:#000">,</span> <span style="color:#000">Pos</span><span style="color:#000">.</span><span style="color:#836c28">CENTER_LEFT</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">BorderPane</span><span style="color:#000">.</span><span style="color:#836c28">setAlignment</span><span style="color:#000">(</span><span style="color:#000">okBtn</span><span style="color:#000">,</span> <span style="color:#000">Pos</span><span style="color:#000">.</span><span style="color:#836c28">CENTER_RIGHT</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">return</span> <span style="color:#000">root</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h3 id="esempio-con-più-stage-22">Esempio con più Stage (2/2)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">SecondStage</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Stage</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">Label</span> <span style="color:#000">lbl</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">SecondStage</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">message</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">super</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>	    <span style="color:#000">setTitle</span><span style="color:#000">(</span><span style="color:#c41a16">"New Window..."</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>	    <span style="color:#000">setScene</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Scene</span><span style="color:#000">(</span><span style="color:#000">initSceneUI</span><span style="color:#000">(),</span> <span style="color:#000">400</span><span style="color:#000">,</span> <span style="color:#000">200</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>	    <span style="color:#000">lbl</span><span style="color:#000">.</span><span style="color:#836c28">setText</span><span style="color:#000">(</span><span style="color:#000">message</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">Parent</span> <span style="color:#000">initSceneUI</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">lbl</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Label</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>	    <span style="color:#000">FlowPane</span> <span style="color:#000">root</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">FlowPane</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>	    <span style="color:#000">root</span><span style="color:#000">.</span><span style="color:#836c28">setAlignment</span><span style="color:#000">(</span><span style="color:#000">Pos</span><span style="color:#000">.</span><span style="color:#836c28">CENTER</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>	    <span style="color:#000">root</span><span style="color:#000">.</span><span style="color:#836c28">getChildren</span><span style="color:#000">().</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">lbl</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>	    <span style="color:#a90d91">return</span> <span style="color:#000">root</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Main</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">Application</span><span style="color:#000">.</span><span style="color:#836c28">launch</span><span style="color:#000">(</span><span style="color:#000">App</span><span style="color:#000">.</span><span style="color:#836c28">class</span><span style="color:#000">,</span> <span style="color:#000">args</span><span style="color:#000">);</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h3 id="javafx-e-concorrenza">JavaFX e concorrenza</h3>
<ul>
<li>Similarmente a Swing, JavaFX
ha un singolo thread che gestisce il processing degli eventi: <strong>JavaFX Application Thread</strong> (JFXAT)</li>
<li>Tutte le modifiche allo <em>scene graph</em> devono essere effettuate su JFXAT</li>
<li>Nota: è opportuno conoscere quali metodi hook dell’<code>Application</code> sono eseguiti (ad es. <code>start</code>) oppure no (ad es. <code>init</code>) su JFXAT</li>
<li><strong>Platform.runLater(Runnable)</strong>
accoda il runnable nella coda degli eventi del JFXAT</li>
</ul>
<p>\section{FXML}</p>
</section><section>
<h3 id="separazioni-di-ruoli-e-contenuti">Separazioni di ruoli e contenuti</h3>
<ul>
<li>In JavaFX è possibile separare il design della GUI dal codice sorgente che la riguarda</li>
<li>Il design della GUI può essere descritto attraverso un linguaggio di markup denominato FXML</li>
</ul>
<p><img src="imgs/soc.png" alt=""></p>
</section><section>
<h3 id="fxml">FXML</h3>
<p>*sep20pt</p>
<ul>
<li>
<p>Linguaggio di markup basato su XML</p>
</li>
<li>
<p>Descrive la struttura della GUI</p>
</li>
<li>
<p>Tutti i componenti della GUI sono specificati mediante tag specifici</p>
</li>
<li>
<p>Le proprietà sono specificate come attributi su ciascun tag, nella forma chiave-valore</p>
</li>
<li>
<p>Ogni file FXML (con estensione <code>.fxml</code>) deve essere un file XML valido</p>
</li>
<li>
<p>Deve iniziare con il tag: <code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</code></p>
</li>
</ul>
</section><section>
<h3 id="esempio-di-gui-in-fxml">Esempio di GUI in FXML</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000">&lt;?</span><span style="color:#000">xml</span> <span style="color:#000">version</span><span style="color:#000">=</span><span style="color:#c41a16">"1.0"</span> <span style="color:#000">encoding</span><span style="color:#000">=</span><span style="color:#c41a16">"UTF-8"</span><span style="color:#000">?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">&lt;?</span><span style="color:#a90d91">import</span> <span style="color:#000">javafx.scene.control.*</span><span style="color:#000">?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">&lt;?</span><span style="color:#a90d91">import</span> <span style="color:#000">javafx.scene.layout.*</span><span style="color:#000">?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">&lt;</span><span style="color:#000">VBox</span> <span style="color:#000">xmlns</span><span style="color:#000">=</span><span style="color:#c41a16">"http://javafx.com/javafx"</span> 
</span></span><span style="display:flex;"><span>      <span style="color:#000">xmlns</span><span style="color:#000">:</span><span style="color:#000">fx</span><span style="color:#000">=</span><span style="color:#c41a16">"http://javafx.com/fxml"</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">&lt;</span><span style="color:#000">children</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">Button</span> <span style="color:#000">fx</span><span style="color:#000">:</span><span style="color:#000">id</span><span style="color:#000">=</span><span style="color:#c41a16">"btn"</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">alignment</span><span style="color:#000">=</span><span style="color:#c41a16">"CENTER"</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">text</span><span style="color:#000">=</span><span style="color:#c41a16">"Say Hello!"</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">textAlignment</span><span style="color:#000">=</span><span style="color:#c41a16">"CENTER"</span> <span style="color:#000">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">Label</span> <span style="color:#000">fx</span><span style="color:#000">:</span><span style="color:#000">id</span><span style="color:#000">=</span><span style="color:#c41a16">"lbl"</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">alignment</span><span style="color:#000">=</span><span style="color:#c41a16">"CENTER_LEFT"</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">text</span><span style="color:#000">=</span><span style="color:#c41a16">"Label Text Here!"</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">textAlignment</span><span style="color:#000">=</span><span style="color:#c41a16">"LEFT"</span> <span style="color:#000">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">&lt;/</span><span style="color:#000">children</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">&lt;/</span><span style="color:#000">VBox</span><span style="color:#000">&gt;</span>
</span></span></code></pre></div></section><section>
<h3 id="esempio-di-gui-in-fxml----note">Esempio di GUI in FXML – Note</h3>
<p>\begin{enumerate}*sep15pt</p>
<ul>
<li>
<p>Attraverso il tag <code>&lt;?import ... ?&gt;</code> è possibile specificare i package in cui recuperare le classi dei componenti d’interesse</p>
</li>
<li>
<p>E’ equivalente all’<code>import</code> di Java</p>
</li>
<li>
<p>Il container principale (unico per il singolo file) \underline{deve} specificare gli attributi <code>xmlns</code> e <code>xmlns:fx</code></p>
</li>
<li>
<p>\begin{verbatim}xmlns=“<a href="http://javafx.com/javafx%22">http://javafx.com/javafx"</a>\end{verbatim}</p>
</li>
<li>
<p>\begin{verbatim}xmlns:fx=“<a href="http://javafx.com/fxml%22">http://javafx.com/fxml"</a>\end{verbatim}</p>
</li>
<li>
<p>Ogni container deve specificare i nodi figli all’interno dei tag <code>$&lt;$children$&gt;$</code> e <code>$&lt;$/children$&gt;$</code></p>
</li>
<li>
<p>Ogni nodo deve definire il proprio ID mediante l’attributo <code>fx:id</code></p>
</li>
<li>
<p>Es. <code>$&lt;$TextField fx:id="textField1"/$&gt;$</code></p>
</li>
</ul>
<p>\end{enumerate}</p>
</section><section>
<h3 id="collegare-il-design-della-gui-al-codice-java">Collegare il design della GUI al codice Java</h3>
<ul>
<li>
<p>La GUI descritta nel file FXML deve essere collegata alla scena agganciata allo stage dell’applicazione</p>
</li>
<li>
<p>Si può utilizzare il componente <code>javafx.fxml.FXMLLoader</code></p>
</li>
<li>
<p>Il metodo statico <code>load(URL location)</code></p>
</li>
<li>
<p>Nota: occorre dichiarare il modulo <code>javafx.fxml</code> (si veda ad es. la build Gradle più avanti)</p>
</li>
</ul>
<h4 id="fxmlloader-esempio">FXMLLoader (esempio)</h4>
<ul>
<li>Si suppone che nel progetto sia presente il file <code>main.fxml</code> contenente una descrizione valida per la GUI da caricare</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000">Parent</span> <span style="color:#000">root</span> <span style="color:#000">=</span> <span style="color:#000">FXMLLoader</span><span style="color:#000">.</span><span style="color:#836c28">load</span><span style="color:#000">(</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">ClassLoader</span><span style="color:#000">.</span><span style="color:#836c28">getSystemResource</span><span style="color:#000">(</span><span style="color:#c41a16">"layouts/main.fxml"</span><span style="color:#000">));</span>
</span></span></code></pre></div></section><section>
<h3 id="fxmlloader-esempio-completo">FXMLLoader (esempio completo)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Example3</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Application</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">@Override</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">start</span><span style="color:#000">(</span><span style="color:#000">Stage</span> <span style="color:#000">stage</span><span style="color:#000">)</span> <span style="color:#a90d91">throws</span> <span style="color:#000">Exception</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	    <span style="color:#000">Parent</span> <span style="color:#000">root</span> <span style="color:#000">=</span> <span style="color:#000">FXMLLoader</span><span style="color:#000">.</span><span style="color:#836c28">load</span><span style="color:#000">(</span><span style="color:#000">ClassLoader</span><span style="color:#000">.</span><span style="color:#836c28">getSystemResource</span><span style="color:#000">(</span><span style="color:#c41a16">"layouts/main.fxml"</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">Scene</span> <span style="color:#000">scene</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Scene</span><span style="color:#000">(</span><span style="color:#000">root</span><span style="color:#000">,</span> <span style="color:#000">500</span><span style="color:#000">,</span> <span style="color:#000">250</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">stage</span><span style="color:#000">.</span><span style="color:#836c28">setTitle</span><span style="color:#000">(</span><span style="color:#c41a16">"JavaFX - Example 3"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">stage</span><span style="color:#000">.</span><span style="color:#836c28">setScene</span><span style="color:#000">(</span><span style="color:#000">scene</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">stage</span><span style="color:#000">.</span><span style="color:#836c28">show</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">launch</span><span style="color:#000">(</span><span style="color:#000">args</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h3 id="lookup-dei-componenti-della-gui">Lookup dei componenti della GUI</h3>
<ul>
<li>
<p>Il riferimento ai componenti (nodi) inseriti nella GUI definita nel file FXML può essere recuperato tramite la scena a cui la GUI è stata collegata</p>
</li>
<li>
<p>Metodo <code>Node lookup(String id)</code></p>
</li>
</ul>
<h4 id="node-lookup-esempio">Node Lookup (esempio)</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000">Label</span> <span style="color:#000">lbl</span> <span style="color:#000">=</span> <span style="color:#000">(</span><span style="color:#000">Label</span><span style="color:#000">)</span> <span style="color:#000">scene</span><span style="color:#000">.</span><span style="color:#836c28">lookup</span><span style="color:#000">(</span><span style="color:#c41a16">"#lbl"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">Button</span> <span style="color:#000">btn</span> <span style="color:#000">=</span> <span style="color:#000">(</span><span style="color:#000">Button</span><span style="color:#000">)</span> <span style="color:#000">scene</span><span style="color:#000">.</span><span style="color:#836c28">lookup</span><span style="color:#000">(</span><span style="color:#c41a16">"#btn"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">btn</span><span style="color:#000">.</span><span style="color:#836c28">setOnMouseClicked</span><span style="color:#000">(</span><span style="color:#000">handler</span> <span style="color:#000">-&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">lbl</span><span style="color:#000">.</span><span style="color:#836c28">setText</span><span style="color:#000">(</span><span style="color:#c41a16">"Hello, FXML!"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">});</span>
</span></span></code></pre></div><ul>
<li><strong>Attenzione</strong>: il metodo <code>lookup</code> richiede come parametro l’id specificato per il componente (attributo <code>fx:id</code> nel file FXML) preceduto dal simbolo #</li>
</ul>
</section><section>
<h3 id="gui-controller-e-node-injection">GUI Controller e Node Injection</h3>
<p>*sep20pt</p>
<ul>
<li>
<p>Per una corretta separazione dei contenuti (e una buona implementazione del pattern MVC in JavaFX) è opportuno specificare un oggetto <em>controller</em> per ciascuna GUI</p>
</li>
<li>
<p>Il parent component della GUI deve definire l’attributo <code>fx:controller</code> con valore riferito al nome pienamente qualificato della classe che fungerà da controller</p>
</li>
<li>
<p>Mediante l’annotazione <code>@FXML</code> è possibile recuperare:</p>
</li>
<li>
<p>I riferimenti ai vari nodi
\iz{</p>
<ul>
<li>senza utilizzare esplicitamente il meccanismo di lookup—usando la corrispondenza tra l’ID del nodo nel file FXML e il nome della variabile d’istanza annotata nella classe controller
}</li>
</ul>
</li>
<li>
<p>Associare gli event handler ai vari eventi dei componenti</p>
</li>
</ul>
</section><section>
<h3 id="esempio-completo-13----application">Esempio Completo (1/3) – Application</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">CompleteExample</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Application</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">@Override</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">start</span><span style="color:#000">(</span><span style="color:#000">Stage</span> <span style="color:#000">stage</span><span style="color:#000">)</span> <span style="color:#a90d91">throws</span> <span style="color:#000">Exception</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">VBox</span> <span style="color:#000">root</span> <span style="color:#000">=</span> <span style="color:#000">FXMLLoader</span><span style="color:#000">.</span><span style="color:#836c28">load</span><span style="color:#000">(</span><span style="color:#000">ClassLoader</span><span style="color:#000">.</span><span style="color:#836c28">getSystemResource</span><span style="color:#000">(</span><span style="color:#c41a16">"layouts/main.fxml"</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">Scene</span> <span style="color:#000">scene</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Scene</span><span style="color:#000">(</span><span style="color:#000">root</span><span style="color:#000">,</span> <span style="color:#000">500</span><span style="color:#000">,</span> <span style="color:#000">250</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">stage</span><span style="color:#000">.</span><span style="color:#836c28">setTitle</span><span style="color:#000">(</span><span style="color:#c41a16">"JavaFX - Complete Example"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">stage</span><span style="color:#000">.</span><span style="color:#836c28">setScene</span><span style="color:#000">(</span><span style="color:#000">scene</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">stage</span><span style="color:#000">.</span><span style="color:#836c28">show</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">launch</span><span style="color:#000">(</span><span style="color:#000">args</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h3 id="esempio-completo-23----gui-fxml-file">Esempio Completo (2/3) – GUI (FXML file)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000">&lt;?</span><span style="color:#000">xml</span> <span style="color:#000">version</span><span style="color:#000">=</span><span style="color:#c41a16">"1.0"</span> <span style="color:#000">encoding</span><span style="color:#000">=</span><span style="color:#c41a16">"UTF-8"</span><span style="color:#000">?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">&lt;?</span><span style="color:#a90d91">import</span> <span style="color:#000">javafx.scene.control.*</span><span style="color:#000">?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">&lt;?</span><span style="color:#a90d91">import</span> <span style="color:#000">javafx.scene.layout.*</span><span style="color:#000">?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">&lt;</span><span style="color:#000">VBox</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">xmlns</span><span style="color:#000">=</span><span style="color:#c41a16">"http://javafx.com/javafx"</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">xmlns</span><span style="color:#000">:</span><span style="color:#000">fx</span><span style="color:#000">=</span><span style="color:#c41a16">"http://javafx.com/fxml"</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">fx</span><span style="color:#000">:</span><span style="color:#000">controller</span><span style="color:#000">=</span><span style="color:#c41a16">"it.unibo.oop.lab.javafx.UIController"</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">&lt;</span><span style="color:#000">children</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">Button</span> <span style="color:#000">fx</span><span style="color:#000">:</span><span style="color:#000">id</span><span style="color:#000">=</span><span style="color:#c41a16">"btn"</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">alignment</span><span style="color:#000">=</span><span style="color:#c41a16">"CENTER"</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">text</span><span style="color:#000">=</span><span style="color:#c41a16">"Say Hello!"</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">onMouseClicked</span><span style="color:#000">=</span><span style="color:#c41a16">"#btnOnClickHandler"</span> <span style="color:#000">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">Label</span> <span style="color:#000">fx</span><span style="color:#000">:</span><span style="color:#000">id</span><span style="color:#000">=</span><span style="color:#c41a16">"lbl"</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">alignment</span><span style="color:#000">=</span><span style="color:#c41a16">"CENTER_LEFT"</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">text</span><span style="color:#000">=</span><span style="color:#c41a16">"Label Text Here!"</span> <span style="color:#000">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">&lt;/</span><span style="color:#000">children</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">&lt;/</span><span style="color:#000">VBox</span><span style="color:#000">&gt;</span>
</span></span></code></pre></div></section><section>
<h3 id="esempio-completo-33----gui-controller">Esempio Completo (3/3) – GUI Controller</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UIController</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">@FXML</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#000">Label</span> <span style="color:#000">lbl</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">@FXML</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#000">Button</span> <span style="color:#000">btn</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">@FXML</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">btnOnClickHandler</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">lbl</span><span style="color:#000">.</span><span style="color:#836c28">setText</span><span style="color:#000">(</span><span style="color:#c41a16">"Hello, World!"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div><p>\section{Integrazione JavaFX e Swing}</p>
</section><section>
<h3 id="integrare-javafx-e-swing">Integrare JavaFX e Swing</h3>
<ul>
<li>
<p>L’integrazione può avvenire nelle due direzioni
\iz{</p>
<ul>
<li>Si possono includere elementi Swing in applicazioni JavaFX attraverso <code>SwingNode</code></li>
<li>Si possono includere elementi JavaFX in applicazioni Swing attraverso <code>JFXPanel</code></li>
<li>Nota: <code>SwingNode</code> e <code>JFXPanel</code> si trovano nel modulo <code>javafx.swing</code>
}
%* In Java, un’applicazione può contenere sia GUI programmate in Swing, sia altre programmate in JavaFX
%
%* La Main UI deve essere in Swing
%* Si integrano Scene di JavaFX in JFrame avvalendosi di componenti che sono istanze di <code>JFXPanel</code>, eseguite nel thread specifico di JavaFX
%</li>
</ul>
</li>
<li>
<p>Va prestata particolare attenzione a dove viene eseguito il codice che gestisce la GUI</p>
</li>
<li>
<p><code>javafx.application.Platform.runLater()</code>, per eseguire codice nel thread dedicato a JavaFX</p>
</li>
<li>
<p><code>javax.swing.SwingUtilities.invokeLater()</code>, per eseguire codice nel thread dedicato a Swing</p>
</li>
</ul>
</section><section>
<h3 id="usare-javafx-in-applicazioni-swing-esempio">Usare JavaFX in applicazioni Swing: esempio</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">initMainJFrame</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">JFrame</span><span style="color:#000">(</span><span style="color:#c41a16">"JFrame GUI"</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">initMainJFrame</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">JFrame</span> <span style="color:#000">frame</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a90d91">final</span> <span style="color:#000">JButton</span> <span style="color:#000">button</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">JButton</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">button</span><span style="color:#000">.</span><span style="color:#836c28">setText</span><span style="color:#000">(</span><span style="color:#c41a16">"Launch JavaFX Scene"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">button</span><span style="color:#000">.</span><span style="color:#836c28">addActionListener</span><span style="color:#000">(</span><span style="color:#000">event</span> <span style="color:#000">-&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">final</span> <span style="color:#000">JFXPanel</span> <span style="color:#000">jfxPanel</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">JFXPanel</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Platform</span><span style="color:#000">.</span><span style="color:#836c28">runLater</span><span style="color:#000">(()</span> <span style="color:#000">-&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">jfxPanel</span><span style="color:#000">.</span><span style="color:#836c28">setScene</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Scene</span><span style="color:#000">(</span><span style="color:#000">initJavaFXSceneUI</span><span style="color:#000">(),</span> <span style="color:#000">300</span><span style="color:#000">,</span> <span style="color:#000">300</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">SwingUtilities</span><span style="color:#000">.</span><span style="color:#836c28">invokeLater</span><span style="color:#000">(()</span> <span style="color:#000">-&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">final</span> <span style="color:#000">JFrame</span> <span style="color:#000">frameWithJavaFX</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">JFrame</span><span style="color:#000">(</span><span style="color:#c41a16">"JFrame with JavaFX embedded!"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">frameWithJavaFX</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">jfxPanel</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">frameWithJavaFX</span><span style="color:#000">.</span><span style="color:#836c28">pack</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">frameWithJavaFX</span><span style="color:#000">.</span><span style="color:#836c28">setVisible</span><span style="color:#000">(</span><span style="color:#a90d91">true</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">});</span> <span style="color:#000">});</span> <span style="color:#000">});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a90d91">final</span> <span style="color:#000">JPanel</span> <span style="color:#000">panel</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">JPanel</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">panel</span><span style="color:#000">.</span><span style="color:#836c28">setLayout</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">FlowLayout</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">panel</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">button</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">frame</span><span style="color:#000">.</span><span style="color:#836c28">setContentPane</span><span style="color:#000">(</span><span style="color:#000">panel</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">frame</span><span style="color:#000">.</span><span style="color:#836c28">setSize</span><span style="color:#000">(</span><span style="color:#000">300</span><span style="color:#000">,</span> <span style="color:#000">300</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">frame</span><span style="color:#000">.</span><span style="color:#836c28">setDefaultCloseOperation</span><span style="color:#000">(</span><span style="color:#000">JFrame</span><span style="color:#000">.</span><span style="color:#836c28">EXIT_ON_CLOSE</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">frame</span><span style="color:#000">.</span><span style="color:#836c28">setVisible</span><span style="color:#000">(</span><span style="color:#a90d91">true</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#000">Parent</span> <span style="color:#000">initJavaFXSceneUI</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a90d91">final</span> <span style="color:#000">Label</span> <span style="color:#000">lbl</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Label</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">lbl</span><span style="color:#000">.</span><span style="color:#836c28">setText</span><span style="color:#000">(</span><span style="color:#c41a16">"Hello, JavaFX World!"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a90d91">final</span> <span style="color:#000">Button</span> <span style="color:#000">btn</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Button</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">btn</span><span style="color:#000">.</span><span style="color:#836c28">setText</span><span style="color:#000">(</span><span style="color:#c41a16">"Say Hello"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">btn</span><span style="color:#000">.</span><span style="color:#836c28">setOnMouseClicked</span><span style="color:#000">(</span><span style="color:#000">event</span> <span style="color:#000">-&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">lbl</span><span style="color:#000">.</span><span style="color:#836c28">setText</span><span style="color:#000">(</span><span style="color:#c41a16">"Hello from Button!"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a90d91">final</span> <span style="color:#000">VBox</span> <span style="color:#000">root</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">VBox</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">root</span><span style="color:#000">.</span><span style="color:#836c28">getChildren</span><span style="color:#000">().</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">lbl</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">root</span><span style="color:#000">.</span><span style="color:#836c28">getChildren</span><span style="color:#000">().</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">btn</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a90d91">return</span> <span style="color:#000">root</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h3 id="usare-swing-in-applicazioni-javafx">Usare Swing in applicazioni JavaFX</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">JavaFXAppWithSwing</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Application</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">start</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Stage</span> <span style="color:#000">primaryStage</span><span style="color:#000">)</span> <span style="color:#a90d91">throws</span> <span style="color:#000">Exception</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">final</span> <span style="color:#000">SwingNode</span> <span style="color:#000">msg</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">SwingNode</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">SwingUtilities</span><span style="color:#000">.</span><span style="color:#836c28">invokeLater</span><span style="color:#000">(()</span> <span style="color:#000">-&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">msg</span><span style="color:#000">.</span><span style="color:#836c28">setContent</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">JLabel</span><span style="color:#000">(</span><span style="color:#c41a16">"Hello by Swing JLabel"</span><span style="color:#000">)));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">HBox</span> <span style="color:#000">pane</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">HBox</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">pane</span><span style="color:#000">.</span><span style="color:#836c28">getChildren</span><span style="color:#000">().</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">msg</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">primaryStage</span><span style="color:#000">.</span><span style="color:#836c28">setScene</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Scene</span><span style="color:#000">(</span><span style="color:#000">pane</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">primaryStage</span><span style="color:#000">.</span><span style="color:#836c28">show</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span><span style="color:#000">}</span>
</span></span></code></pre></div><p>\section{Utilizzo di JavaFX con Eclipse e Gradle}</p>
<p>%—</p>
<h2 id="javafx-con-jdk-8">JavaFX con JDK 8</h2>
<p>%
%—</p>
<h3 id="javafx-in-eclipse-jdk-8">JavaFX in Eclipse (JDK 8)</h3>
<p>%<em>sep20pt
%</em> La libreria JavaFX è presente unicamente nel JDK 8
%
%* Distribuita attraverso il file <code>jfxrt.jar</code> presente nella directory <code>/lib/ext</code> della propria installazione del JDK
%
%* Tutti le librerire <em>esterne</em> \underline{non} sono automaticamente accessibili da tutti i progetti aperti nell’IDE Eclipse
%
%* In realtà dipende dalla versione di Eclipse\dots
%
%* Deve essere definita una regola d’accesso per JavaFX in relazione allo specifico progetto Java aperto in Eclipse
%
%
%
%—</p>
<h3 id="configurazione-del-progetto-12">Configurazione del progetto (1/2)</h3>
<p>%
%* (tasto DX sul progetto) $&gt;$ Properties $&gt;$ Java Build Path
%* (tab Libraries) $&gt;$ Click sul JRE System Library $&gt;$ Selezionare \textit{Access rules} $&gt;$ Click su Edit
%
%
%<img src="imgs/conf01.png" alt="">
%
%
%
%—</p>
<h3 id="configurazione-del-progetto-22">Configurazione del progetto (2/2)</h3>
<p>%
%* Click su Add $&gt;$ Aggiungere una regola con:
%
%* Resolution: <strong>Accessible</strong>
%* Rule pattern: <strong>javafx/</strong>**
%
%* OK $&gt;$ OK $&gt;$ Apply and Close
%
%
%<img src="imgs/conf02.png" alt="">
%
%</p>
<p>%—</p>
<h2 id="esecuzione-di-applicazioni-javafx">Esecuzione di applicazioni JavaFX</h2>
</section><section>
<h3 id="javafx-in-eclipse-via-gradle-ed-esportazione-runnable-jar">JavaFX in Eclipse via Gradle ed esportazione runnable JAR</h3>
<ul>
<li>
<p>Da Java 11, JavaFX deve essere importato nel progetto come <strong>libreria esterna</strong></p>
</li>
<li>
<p>Due alternative:
\begin{enumerate}</p>
</li>
<li>
<p>Si aggiungono tutti i JAR della libreria direttamente nel progetto</p>
</li>
<li>
<p>Scaricabili da <a href="https://gluonhq.com/products/javafx/">https://gluonhq.com/products/javafx/</a></p>
</li>
<li>
<p>Si specificano le dipendenze via <strong>Gradle</strong>
\end{enumerate}</p>
</li>
<li>
<p>Oggigiorno, è preferibile optare per la seconda alternativa
\iz{</p>
<ul>
<li>NOTA: l’export di un Runnable JAR con Eclipse non consente di impacchettare librerie esterne (come quelle configurate quando si importa un progetto Gradle)</li>
<li>Per creare il runnable JAR comprendente tutte le dipendenze dell’applicazione, si usi il plugin Gradle <strong>shadow</strong> e il relativo task <strong>shadowJar</strong>
}</li>
</ul>
</li>
<li>
<p>Si faccia riferimento a
<a href="https://github.com/APICe-at-DISI/sample-javafx-project">https://github.com/APICe-at-DISI/sample-javafx-project</a></p>
</li>
</ul>
</section><section>
<h3 id="textttbuildgradlekts">\texttt{build.gradle.kts</h3>
<p>(completo – sintassi Kotlin)}</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000">plugins</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">java</span> <span style="color:#177500">// add support for Java
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#177500">// Apply the application plugin to add support for building a CLI application
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#177500">// You can run your app via task "run": ./gradlew run
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">application</span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Adds task 'shadowJar' to export a runnable jar.
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#177500">// The runnable jar will be found in build/libs/projectname-all.jar
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">id</span><span style="color:#000">(</span><span style="color:#c41a16">"com.github.johnrengelman.shadow"</span><span style="color:#000">)</span> <span style="color:#000">version</span> <span style="color:#c41a16">"5.2.0"</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">repositories</span> <span style="color:#000">{</span> <span style="color:#000">mavenCentral</span><span style="color:#000">()</span> <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">val</span> <span style="color:#000">javaFXModules</span> <span style="color:#000">=</span> <span style="color:#000">listOf</span><span style="color:#000">(</span> <span style="color:#c41a16">"base"</span><span style="color:#000">,</span> <span style="color:#c41a16">"controls"</span><span style="color:#000">,</span> <span style="color:#c41a16">"fxml"</span><span style="color:#000">,</span> <span style="color:#c41a16">"swing"</span><span style="color:#000">,</span> <span style="color:#c41a16">"graphics"</span><span style="color:#000">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000">val</span> <span style="color:#000">supportedPlatforms</span> <span style="color:#000">=</span> <span style="color:#000">listOf</span><span style="color:#000">(</span><span style="color:#c41a16">"linux"</span><span style="color:#000">,</span> <span style="color:#c41a16">"mac"</span><span style="color:#000">,</span> <span style="color:#c41a16">"win"</span><span style="color:#000">)</span> <span style="color:#177500">// All required for OOP
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span><span style="color:#000">val</span> <span style="color:#000">javaFxVersion</span> <span style="color:#000">=</span> <span style="color:#000">15</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">dependencies</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#000">platform</span> <span style="color:#000">in</span> <span style="color:#000">supportedPlatforms</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#000">module</span> <span style="color:#000">in</span> <span style="color:#000">javaFXModules</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">implementation</span><span style="color:#000">(</span><span style="color:#c41a16">"org.openjfx:javafx-$module:$javaFxVersion:$platform"</span><span style="color:#000">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// JUnit API and testing engine
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">testImplementation</span><span style="color:#000">(</span><span style="color:#c41a16">"org.junit.jupiter:junit-jupiter-api:5.5.2"</span><span style="color:#000">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">testRuntimeOnly</span><span style="color:#000">(</span><span style="color:#c41a16">"org.junit.jupiter:junit-jupiter-engine:5.5.2"</span><span style="color:#000">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">tasks</span><span style="color:#000">.</span><span style="color:#836c28">withType</span><span style="color:#000">&lt;</span><span style="color:#000">Test</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span> <span style="color:#000">useJUnitPlatform</span><span style="color:#000">()</span> <span style="color:#000">}</span> <span style="color:#177500">// Enables JUnit 5 Jupiter module 
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">application</span> <span style="color:#000">{</span> <span style="color:#000">mainClassName</span> <span style="color:#000">=</span> <span style="color:#c41a16">"it.unibo.samplejavafx.App"</span> <span style="color:#000">}</span>
</span></span></code></pre></div><p>%java {
%    sourceCompatibility = JavaVersion.VERSION_11
%    targetCompatibility = JavaVersion.VERSION_11
%}</p>
<p>%—</p>
<h3 id="textttbuildgradle">\texttt{build.gradle</h3>
<p>(completo – sintassi Groovy)}
%<code>java %plugins { %  id 'application' %  id 'org.openjfx.javafxplugin' version '0.0.9' %} % %repositories { %  mavenCentral() %} % %dependencies { %  /* for cross-platform jar: */ %  runtimeOnly "org.openjfx:javafx-graphics:$javafx.version:win" %  runtimeOnly "org.openjfx:javafx-graphics:$javafx.version:linux" %  runtimeOnly "org.openjfx:javafx-graphics:$javafx.version:mac" %} % %javafx { %  version = "14" %  modules = [ 'javafx.controls', 'javafx.fxml' ] %} % %mainClassName = 'application.Main' % %jar { %  manifest { %    attributes 'Main-Class': 'application.Main' %  } % %  from { %    configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) } %  } %} %</code>
%</p>
<p>\section{Scene Builder}</p>
</section><section>
<h3 id="scene-builder-20">Scene Builder 2.0</h3>
<ul>
<li>Strumento per la creazione di GUI JavaFX-based in modalità drag-n-drop (GUI Builder)</li>
<li>Consente di esportare il file FXML relativo alla GUI disegnata</li>
<li>Distribuito come strumento esterno al JDK, non integrato (direttamente) in Eclipse</li>
<li><a href="https://gluonhq.com/products/scene-builder/">https://gluonhq.com/products/scene-builder/</a></li>
</ul>
</section><section>
<h3 id="scene-builder-20-1">Scene Builder 2.0</h3>
<p><img src="imgs/scenebuilder.png" alt=""></p>
</section>

  


</div>
      

    </div>
<script type="text/javascript" src="/reveal-hugo/object-assign.js"></script>

<a href="/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"900","highlight_theme":"default","history":true,"mermaid":[{"startOnLoad":false}],"slide_number":true,"theme":"white","transition":"slide","transition_speed":"fast","width":"1440"}</script>
<script type="application/json" id="reveal-hugo-page-params">null</script>

<script src="/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }
  
  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = { 
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>










  <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({"startOnLoad":false});

    let render = (event) => {
      let mermaidElems = event.currentSlide.querySelectorAll('.mermaid');
      if (!mermaidElems.length){
          return
      }
      mermaidElems.forEach(mermaidElem => {
          let processed = mermaidElem.getAttribute('data-processed');
          if (!processed){
              
              mermaid.init(undefined, mermaidElem);
          }
      });
    };
    Reveal.addEventListener('slidechanged', render);
    Reveal.addEventListener('ready', render);
  </script>

    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<script>
  if (/.*?(\?|&)print-pdf/.test(window.location.toString())) {
      var ytVideos = document.getElementsByTagName("iframe")
      for (let i = 0; i < ytVideos.length; i++) {
          var videoFrame = ytVideos[i]
          var isYouTube = /^https?:\/\/(www.)youtube\.com\/.*/.test(videoFrame.src)
          if (isYouTube) {
              console.log(`Removing ${videoFrame.src}`)
              var parent = videoFrame.parentElement
              videoFrame.remove()
              var p = document.createElement('p')
              p.append(
                  document.createTextNode(
                      "There was an embedded video here, but it is disabled in the printed version of the slides."
                  )
              )
              p.append(document.createElement('br'))
              p.append(
                  document.createTextNode(
                      `Visit instead ${
                          videoFrame.src
                      } or ${
                          videoFrame.src.replace(
                              /(^https?:\/\/(www.)youtube\.com)\/(embed\/)(\w+).*/,
                              "https://www.youtube.com/watch?v=$4"
                          )
                      }`
                  )
              )
              parent.appendChild(p)
          }
      }
  }
</script>

    
  

</body></html>