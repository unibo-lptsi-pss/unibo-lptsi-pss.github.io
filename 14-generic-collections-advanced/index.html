<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
<title>Progettazione e Sviluppo del Software</title>
<meta name="description" content="Progettazione e Sviluppo del Software, Tecnologie dei Sistemi Informatici">
<meta name="author" content="Danilo Pianini">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/css/custom-theme.min.c5d5307c22aeba26e5f63813bdbc90c5483e809383467a8e6f523d7f756010c5.css" id="theme"><link rel="stylesheet" href="/highlight-js/default.min.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="collezioni-generiche-avanzate">Collezioni generiche (avanzate)</h1>
<h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="danilo-pianini"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini — <code>danilo.pianini@unibo.it</code></a></h3>
<h3 id="gianluca-aguzzi"><a href="mailto:gianluca.aguzzi@unibo.it">Gianluca Aguzzi — <code>gianluca.aguzzi@unibo.it</code></a></h3>
<h3 id="angelo-filaseta"><a href="mailto:angelo.filaseta@unibo.it">Angelo Filaseta — <code>angelo.filaseta@unibo.it</code></a></h3>
<p>Compiled on: 2025-10-02
 — <a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
<p><a href=".."><i class="fa fa-undo" aria-hidden="true"></i> back</a></p>
</section><section>
<h2 id="outline">Outline</h2>
<h3 id="goal-della-lezione">Goal della lezione</h3>
<ul>
<li>Approfondire alcuni concetti sui generici</li>
</ul>
<h3 id="argomenti">Argomenti</h3>
<ul>
<li>Il problema della type-erasure</li>
<li>Polimorfismo vincolato</li>
<li>Approfondimento sulle Wildcards</li>
</ul>
</section><section>
<h1 id="il-problema-della-type-erasure">Il problema della <strong>type-erasure</strong></h1>
</section><section>
<h2 id="la-classe-generica-list">La classe generica <code>List</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">/* Classe generica in X:
</span></span></span><span style="display:flex;"><span><span style="color:#177500">   - X è il tipo degli elementi della lista */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">List</span><span style="color:#000">&lt;</span><span style="color:#000">X</span><span style="color:#000">&gt;</span> {	
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">X</span> <span style="color:#000">head</span>;	   <span style="color:#177500">// Testa della lista, tipo X</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">X</span><span style="color:#000">&gt;</span> <span style="color:#000">tail</span>;  <span style="color:#177500">// Coda della lista, tipo List&lt;X&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">List</span>(<span style="color:#a90d91">final</span> <span style="color:#000">X</span> <span style="color:#000">head</span>, <span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">X</span><span style="color:#000">&gt;</span> <span style="color:#000">tail</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">head</span> <span style="color:#000">=</span> <span style="color:#000">head</span>;
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">tail</span> <span style="color:#000">=</span> <span style="color:#000">tail</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">X</span> <span style="color:#000">getHead</span>() {			
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">head</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">X</span><span style="color:#000">&gt;</span> <span style="color:#000">getTail</span>() {	
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">tail</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// getLength() e toString() invariate</span>
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>} 
</span></span></code></pre></div></section><section>
<h2 id="uso-di-una-classe-generica">Uso di una classe generica</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseList</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span>){
</span></span><span style="display:flex;"><span>    	<span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">list</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span>(<span style="color:#000">10</span>, <span style="color:#177500">// Autoboxing</span>
</span></span><span style="display:flex;"><span>    	    		     <span style="color:#a90d91">new</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span>(<span style="color:#000">20</span>,
</span></span><span style="display:flex;"><span>    	    		     <span style="color:#a90d91">new</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span>(<span style="color:#000">30</span>,
</span></span><span style="display:flex;"><span>    	    		     <span style="color:#a90d91">new</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span>(<span style="color:#000">40</span>,<span style="color:#a90d91">null</span>))));
</span></span><span style="display:flex;"><span>    	<span style="color:#177500">// Cast NON necessari</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">int</span> <span style="color:#000">first</span> <span style="color:#000">=</span> <span style="color:#000">list</span>.<span style="color:#836c28">getHead</span>(); <span style="color:#177500">// Unboxing</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">int</span> <span style="color:#000">second</span> <span style="color:#000">=</span> <span style="color:#000">list</span>.<span style="color:#836c28">getTail</span>().<span style="color:#836c28">getHead</span>();
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">int</span> <span style="color:#000">third</span> <span style="color:#000">=</span> <span style="color:#000">list</span>.<span style="color:#836c28">getTail</span>().<span style="color:#836c28">getTail</span>().<span style="color:#836c28">getHead</span>();
</span></span><span style="display:flex;"><span>    	<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">first</span><span style="color:#000">+</span><span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">second</span><span style="color:#000">+</span><span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">third</span>);
</span></span><span style="display:flex;"><span>    	<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">list</span>.<span style="color:#836c28">toString</span>());
</span></span><span style="display:flex;"><span>    	<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">list</span>.<span style="color:#836c28">getLength</span>());
</span></span><span style="display:flex;"><span>    	
</span></span><span style="display:flex;"><span>    	<span style="color:#177500">// Usabile anche con le stringhe</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">list2</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span>(<span style="color:#c41a16">"a"</span>,
</span></span><span style="display:flex;"><span>    	    		     <span style="color:#a90d91">new</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span>(<span style="color:#c41a16">"b"</span>,
</span></span><span style="display:flex;"><span>    	    		     <span style="color:#a90d91">new</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span>(<span style="color:#c41a16">"c"</span>,
</span></span><span style="display:flex;"><span>    	    		     <span style="color:#a90d91">new</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span>(<span style="color:#c41a16">"d"</span>,<span style="color:#a90d91">null</span>))));
</span></span><span style="display:flex;"><span>    	<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">list2</span>.<span style="color:#836c28">toString</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>} 
</span></span></code></pre></div></section><section>
<h2 id="terminologia-e-elementi-essenziali">Terminologia, e elementi essenziali</h2>
<h3 id="data-una-classe-generica-cxy">Data una classe generica <code>C&lt;X,Y&gt;</code>..</h3>
<ul>
<li><code>C</code> è detta <strong>tipo parametrico</strong></li>
<li><code>X</code> e <code>Y</code> sono dette le sue <em><strong>type-variable</strong></em> o <strong>parametri di tipo</strong></li>
<li><code>X</code> e <code>Y</code> possono essere usati come un qualunque tipo dentro la classe (con alcune limitazioni che vedremo)</li>
</ul>
<h3 id="i-clienti-delle-classi-generiche">I clienti delle classi generiche</h3>
<ul>
<li>Devono usare <em>tipi specifici</em> ottenuti dai <em><strong>tipi generici</strong></em>, ovvero versioni “istanziate” delle classi generiche
<ul>
<li><code>C&lt;String,Integer&gt;</code>, <code>C&lt;C&lt;Object,Object&gt;,Object&gt;</code></li>
<li>Non <code>C</code> senza parametri, altrimenti vengono segnalati dei warning</li>
</ul>
</li>
<li>Ogni type-variable va sostituita con un tipo effettivo, ossia con un <em><strong>argomento di tipo</strong></em>, che può essere
<ul>
<li>una classe (non-generica), p.e. <code>Object</code>, <code>String</code>,..</li>
<li>una type-variable definita, p.e. <code>X,Y</code> (usate dentro la classe <code>C&lt;X,Y&gt;</code>)</li>
<li>un tipo generico completamente istanziato, p.e. <code>C&lt;Object,Object&gt;</code></li>
<li>..o  parzialmente istanziato, p.e. <code>C&lt;Object,X&gt;</code> (in <code>C&lt;X,Y&gt;</code>)</li>
<li><em>NON con un tipo primitivo</em></li>
</ul>
</li>
</ul>
</section><section>
<h2 id="limitazioni-alluso-dei-generici">Limitazioni all’uso dei generici</h2>
<h3 id="una-type-variable-x-non-è-usabile-in-istruzioni-del-tipo">Una type-variable (<code>X</code>) non è usabile in istruzioni del tipo:</h3>
<ul>
<li><code>new X()</code>, <code>new X[] {...}</code>, <code>new X[10]</code>, <code>instanceof X</code></li>
<li>Il compilatore segnala un errore</li>
<li>errore anche l’<code>instanceof</code> su un tipo generico: <code>o instanceof C&lt;String&gt;</code></li>
</ul>
<h3 id="type-variable-e-tipi-generici-danno-warning-se-usati-in-situazioni-borderline">Type-variable, e tipi generici danno warning se usati in situazioni “borderline”</h3>
<ul>
<li>… <code>(X)o</code>, <code>(C&lt;String&gt;)o</code></li>
<li>il compilatore segnala un “unchecked warning”</li>
</ul>
<h3 id="perché-queste-limitazioni">Perché queste limitazioni? <!-- (Odersky \& Runne \& Wadler, 1998) --></h3>
<ul>
<li>Derivano dallo schema di supporto <em>“ad erasure”</em>
<ul>
<li>Il compilatore prende la classe <code>List&lt;X&gt;</code> e la trasforma in qualcosa di simile alla classe <code>ObjectList</code> prima di compilarla effettivamente..</li>
</ul>
</li>
</ul>
</section><section>
<h2 id="qualche-prova">Qualche prova</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.util.List</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">P</span><span style="color:#000">&lt;</span><span style="color:#000">X</span><span style="color:#000">&gt;</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">void</span> <span style="color:#000">m</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#000">X</span> <span style="color:#000">x</span> <span style="color:#000">=</span> (<span style="color:#000">X</span>) <span style="color:#a90d91">new</span> <span style="color:#000">Object</span>(); <span style="color:#177500">// warning</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// X x = new X(); // error</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">X</span><span style="color:#000">[]</span> <span style="color:#000">a</span> <span style="color:#000">=</span> (<span style="color:#000">X</span><span style="color:#000">[]</span>) <span style="color:#a90d91">new</span> <span style="color:#000">Object</span><span style="color:#000">[</span><span style="color:#000">10</span><span style="color:#000">]</span>; <span style="color:#177500">// warning</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// X[] a = new X[10]; // error</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// boolean b = new Object() instanceof X; // error</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">ErasurePitfalls</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#000">Object</span> <span style="color:#000">o</span> <span style="color:#000">=</span> (<span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span>) <span style="color:#a90d91">new</span> <span style="color:#000">Object</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// boolean b = new Object() instanceof List&lt;String&gt; // error</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Object o = new List&lt;Pair&gt;[10]; // error</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="la-classe-generica-vector">La classe generica <code>Vector</code></h2>
<h3 id="un-dettaglio-della-sua-implementazione">Un dettaglio della sua implementazione:</h3>
<p>Per via della type erasure, il suo campo non può essere di tipo <code>X[]</code>, bensì <code>Object[]</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">X</span><span style="color:#000">&gt;</span>{ 
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// X è la type-variable, ossia il tipo degli elementi</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">Vector</span>() { <span style="color:#177500">/* ... */</span> }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">addElement</span>(<span style="color:#000">X</span> <span style="color:#000">e</span>) { <span style="color:#177500">/* ... */</span> } 	<span style="color:#177500">// Input di tipo X</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">X</span> <span style="color:#000">getElementAt</span>(<span style="color:#a90d91">int</span> <span style="color:#000">pos</span>) { <span style="color:#177500">/* ... */</span> } <span style="color:#177500">// Output di tipo X</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">getLength</span>() { <span style="color:#177500">/* ... */</span> }
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">toString</span>() { <span style="color:#177500">/* ... */</span> }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="uso-di-vectorx">Uso di <code>Vector&lt;X&gt;</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseVector</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#177500">// Il tipo di vs è Vector&lt;String&gt;</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#177500">// Ma la sua classe è Vector&lt;X&gt;</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">vs</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span>(); 
</span></span><span style="display:flex;"><span>    	<span style="color:#000">vs</span>.<span style="color:#836c28">addElement</span>(<span style="color:#c41a16">"Prova"</span>);		
</span></span><span style="display:flex;"><span>    	<span style="color:#000">vs</span>.<span style="color:#836c28">addElement</span>(<span style="color:#c41a16">"di"</span>);		
</span></span><span style="display:flex;"><span>    	<span style="color:#000">vs</span>.<span style="color:#836c28">addElement</span>(<span style="color:#c41a16">"Vettore"</span>);
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">str</span> <span style="color:#000">=</span> <span style="color:#000">vs</span>.<span style="color:#836c28">getElementAt</span>(<span style="color:#000">0</span>) <span style="color:#000">+</span> <span style="color:#c41a16">" "</span> <span style="color:#000">+</span> 
</span></span><span style="display:flex;"><span>    		<span style="color:#000">vs</span>.<span style="color:#836c28">getElementAt</span>(<span style="color:#000">1</span>) <span style="color:#000">+</span> <span style="color:#c41a16">" "</span> <span style="color:#000">+</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#000">vs</span>.<span style="color:#836c28">getElementAt</span>(<span style="color:#000">2</span>); <span style="color:#177500">// Nota, nessun cast!</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">str</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">vi</span><span style="color:#000">=</span><span style="color:#a90d91">new</span> <span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span>(); 
</span></span><span style="display:flex;"><span>    	<span style="color:#000">vi</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">10</span>); <span style="color:#177500">// Autoboxing</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">vi</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">20</span>);
</span></span><span style="display:flex;"><span>    	<span style="color:#000">vi</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">30</span>);
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">vi</span>.<span style="color:#836c28">getElementAt</span>(<span style="color:#000">0</span>) <span style="color:#000">+</span> <span style="color:#177500">// Unboxing </span>
</span></span><span style="display:flex;"><span>    		<span style="color:#000">vi</span>.<span style="color:#836c28">getElementAt</span>(<span style="color:#000">1</span>) <span style="color:#000">+</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#000">vi</span>.<span style="color:#836c28">getElementAt</span>(<span style="color:#000">2</span>);
</span></span><span style="display:flex;"><span>    	<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">i</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="implementazione-di-vector-pt-1">Implementazione di <code>Vector</code> pt 1</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">X</span><span style="color:#000">&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">INITIAL_SIZE</span> <span style="color:#000">=</span> <span style="color:#000">10</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">elements</span>; 	<span style="color:#177500">// Deposito elementi, non posso usare X[]!!</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">int</span> <span style="color:#000">size</span>;		<span style="color:#177500">// Numero di elementi</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">Vector</span>() {		<span style="color:#177500">// Inizialmente vuoto</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">elements</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Object</span><span style="color:#000">[</span><span style="color:#000">INITIAL_SIZE</span><span style="color:#000">]</span>;
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">size</span> <span style="color:#000">=</span> <span style="color:#000">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">addElement</span>(<span style="color:#a90d91">final</span> <span style="color:#000">X</span> <span style="color:#000">e</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">if</span> (<span style="color:#a90d91">this</span>.<span style="color:#836c28">size</span> <span style="color:#000">==</span> <span style="color:#000">elements</span>.<span style="color:#836c28">length</span>){
</span></span><span style="display:flex;"><span>    	    <span style="color:#a90d91">this</span>.<span style="color:#836c28">expand</span>();	<span style="color:#177500">// Se non c'è spazio</span>
</span></span><span style="display:flex;"><span>    	}
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">elements</span><span style="color:#000">[</span><span style="color:#a90d91">this</span>.<span style="color:#836c28">size</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#000">e</span>;
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">size</span><span style="color:#000">++</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">X</span> <span style="color:#000">getElementAt</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">position</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#177500">// unchecked warning</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> (<span style="color:#000">X</span>)<span style="color:#a90d91">this</span>.<span style="color:#836c28">elements</span><span style="color:#000">[</span><span style="color:#000">position</span><span style="color:#000">]</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span></code></pre></div></section><section>
<h2 id="implementazione-di-vector-pt-2">Implementazione di <code>Vector</code> pt 2</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">getLength</span>(){
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">size</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">void</span> <span style="color:#000">expand</span>() {	<span style="color:#177500">// Raddoppio lo spazio..</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">newElements</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Object</span><span style="color:#000">[</span><span style="color:#a90d91">this</span>.<span style="color:#836c28">elements</span>.<span style="color:#836c28">length</span><span style="color:#000">*</span><span style="color:#000">2</span><span style="color:#000">]</span>;
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">for</span> (<span style="color:#a90d91">int</span> <span style="color:#000">i</span><span style="color:#000">=</span><span style="color:#000">0</span>; <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">elements</span>.<span style="color:#836c28">length</span>; <span style="color:#000">i</span><span style="color:#000">++</span>){
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">newElements</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">elements</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]</span>;
</span></span><span style="display:flex;"><span>    	}
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">elements</span> <span style="color:#000">=</span> <span style="color:#000">newElements</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">toString</span>(){
</span></span><span style="display:flex;"><span>    	<span style="color:#000">String</span> <span style="color:#000">s</span><span style="color:#000">=</span><span style="color:#c41a16">"|"</span>;
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">for</span> (<span style="color:#a90d91">int</span> <span style="color:#000">i</span><span style="color:#000">=</span><span style="color:#000">0</span>; <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">size</span>; <span style="color:#000">i</span><span style="color:#000">++</span>){
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">s</span> <span style="color:#000">=</span> <span style="color:#000">s</span> <span style="color:#000">+</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">elements</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]</span> <span style="color:#000">+</span> <span style="color:#c41a16">"|"</span>;
</span></span><span style="display:flex;"><span>    	}
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#000">s</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="ancora-sugli-unchecked-warning-coi-generici">Ancora sugli “unchecked warning” coi generici</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">ShowCast</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">v</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Vector</span><span style="color:#000">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">v</span>.<span style="color:#836c28">addElement</span>(<span style="color:#c41a16">"a"</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">v</span>.<span style="color:#836c28">addElement</span>(<span style="color:#c41a16">"b"</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">v</span>.<span style="color:#836c28">addElement</span>(<span style="color:#c41a16">"c"</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">Object</span> <span style="color:#000">o</span> <span style="color:#000">=</span> <span style="color:#000">v</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">v2</span> <span style="color:#000">=</span> (<span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span>)<span style="color:#000">o</span>; <span style="color:#177500">// unchecked warning</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Da qui in poi siamo in situazione "pericolosa"</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Cosa può succedere?</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">v2</span>.<span style="color:#836c28">getElementAt</span>(<span style="color:#000">0</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">v2</span>.<span style="color:#836c28">getElementAt</span>(<span style="color:#000">0</span>).<span style="color:#836c28">intValue</span>());
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h1 id="polimorfismo-vincolato">Polimorfismo vincolato</h1>
</section><section>
<h2 id="polimorfismo-vincolato-1">Polimorfismo vincolato</h2>
<h3 id="negli-esempi-visti-finora">Negli esempi visti finora..</h3>
<ul>
<li>Data una classe <code>C&lt;X&gt;</code>, il type-parameter <code>X</code> può essere istanziato a qualunque sottotipo di <code>Object</code></li>
<li>In effetti la definizione <code>class C&lt;X&gt; { ... }</code> equivale a <code>class C &lt;X extends Object&gt; { ... }</code></li>
</ul>
<h3 id="polimorfismo-vincolato-2">Polimorfismo <em>vincolato</em> <!-- (Igarashi \& Pierce \& Wadler, 2000) --></h3>
<ul>
<li>In generale invece, può essere opportuno <em>vincolare</em> in qualche modo <em>le possibili istanziazioni di <code>X</code></em>, ad essere sottotipo di un tipo più specifico di <code>Object</code></li>
<li><code>class C&lt;X extends D&gt; { ... }</code>
<ul>
<li>In tal caso, <em>dentro <code>C</code>, si potrà assumere che gli oggetti di tipo <code>X</code> rispondano ai metodi della classe <code>D</code></em></li>
</ul>
</li>
</ul>
</section><section>
<h2 id="lampsrow-generica-definizione"><code>LampsRow</code> generica: Definizione</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">LampsRow</span><span style="color:#000">&lt;</span><span style="color:#000">L</span> <span style="color:#a90d91">extends</span> <span style="color:#000">SimpleLamp</span><span style="color:#000">&gt;</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">L</span><span style="color:#000">&gt;</span> <span style="color:#000">lamps</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">LampsRow</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span>.<span style="color:#836c28">lamps</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Vector</span><span style="color:#000">&lt;&gt;</span>(); <span style="color:#177500">// inferenza</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">L</span> <span style="color:#000">getLamp</span>(<span style="color:#a90d91">int</span> <span style="color:#000">position</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">lamps</span>.<span style="color:#836c28">getElementAt</span>(<span style="color:#000">position</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">addLamp</span>(<span style="color:#000">L</span> <span style="color:#000">lamp</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span>.<span style="color:#836c28">lamps</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">lamp</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">switchOffAll</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">for</span> (<span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">0</span>; <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">lamps</span>.<span style="color:#836c28">getLength</span>(); <span style="color:#000">i</span><span style="color:#000">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a90d91">this</span>.<span style="color:#836c28">getLamp</span>(<span style="color:#000">i</span>).<span style="color:#836c28">switchOff</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">toString</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">lamps</span>.<span style="color:#836c28">toString</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="uso">Uso</h2>
<h3 id="motivazione-per-questa-genericità-ha-senso-se">Motivazione per questa genericità. Ha senso se:</h3>
<ul>
<li>si ritiene molto frequente l’uso di <code>SimpleLamp</code> simili tra loro, ossia di una comune specializzazione (classe)</li>
<li>è frequente l’uso di <code>getLamp()</code>  e quindi del cast</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseLampsRow</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">LampsRow</span><span style="color:#000">&lt;</span><span style="color:#000">UnlimitedLamp</span><span style="color:#000">&gt;</span> <span style="color:#000">lr</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">LampsRow</span><span style="color:#000">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">lr</span>.<span style="color:#836c28">addLamp</span>(<span style="color:#a90d91">new</span> <span style="color:#000">UnlimitedLamp</span>());
</span></span><span style="display:flex;"><span>		<span style="color:#000">lr</span>.<span style="color:#836c28">addLamp</span>(<span style="color:#a90d91">new</span> <span style="color:#000">UnlimitedLamp</span>());
</span></span><span style="display:flex;"><span>		<span style="color:#000">lr</span>.<span style="color:#836c28">addLamp</span>(<span style="color:#a90d91">new</span> <span style="color:#000">UnlimitedLamp</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">lr</span>.<span style="color:#836c28">getLamp</span>(<span style="color:#000">0</span>).<span style="color:#836c28">switchOn</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">lr</span>.<span style="color:#836c28">switchOffAll</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">lr</span>.<span style="color:#836c28">getLamp</span>(<span style="color:#000">0</span>).<span style="color:#836c28">isOver</span>());
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">lr</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h1 id="java-wildcards-e-sostituibilità">Java Wildcards e sostituibilità</h1>
<h2 id="java-wildcards">Java Wildcards</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">// Gerarchia dei wrapper Numbers in java.lang</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">abstract</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Number</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Object</span> { <span style="color:#177500">/* ... */</span> }
</span></span><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">Integer</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Number</span> { <span style="color:#177500">/* ... */</span> }
</span></span><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">Double</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Number</span> { <span style="color:#177500">/* ... */</span> }
</span></span><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">Long</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Number</span> { <span style="color:#177500">/* ... */</span> }
</span></span><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">Float</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Number</span> { <span style="color:#177500">/* ... */</span> }
</span></span><span style="display:flex;"><span> <span style="color:#177500">/* ... */</span> 
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">// Accetta qualunque Vector&lt;T&gt; con T &lt;: Number</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">// Vector&lt;Integer&gt;, Vector&lt;Double&gt;, Vector&lt;Float&gt;, ...</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">void</span> <span style="color:#000">m</span>(<span style="color:#000">Vector</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Number</span><span style="color:#000">&gt;</span> <span style="color:#000">arg</span>){ <span style="color:#177500">/* ... */</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">// Accetta qualunque Vector&lt;T&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">void</span> <span style="color:#000">m</span>(<span style="color:#000">Vector</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">arg</span>){ <span style="color:#177500">/* ... */</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">// Accetta qualunque Vector&lt;T&gt; con Integer &lt;: T </span>
</span></span><span style="display:flex;"><span><span style="color:#177500">// Vector&lt;Integer&gt;, Vector&lt;Number&gt;, e Vector&lt;Object&gt; solo!</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">void</span> <span style="color:#000">m</span>(<span style="color:#000">Vector</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">arg</span>){ <span style="color:#177500">/* ... */</span> }
</span></span></code></pre></div></section><section>
<h2 id="java-wildcards-1">Java Wildcards</h2>
<!-- ### 3 tipi di wildcard (Igarashi \& Viroli, 2002) -->
<h3 id="3-tipi-di-wildcard">3 tipi di wildcard</h3>
<ul>
<li>
<p>Bounded (covariante): <code>C&lt;? extends T&gt;</code></p>
<ul>
<li>accetta un qualunque <code>C&lt;S&gt;</code> con <code>S &lt;: T</code></li>
</ul>
</li>
<li>
<p>Bounded (controvariante): <code>C&lt;? super T&gt;</code></p>
<ul>
<li>accetta un qualunque <code>C&lt;S&gt;</code> con <code>S &gt;: T</code></li>
</ul>
</li>
<li>
<p>Unbounded: <code>C&lt;?&gt;</code></p>
<ul>
<li>accetta un qualunque <code>C&lt;S&gt;</code></li>
</ul>
</li>
</ul>
<h3 id="uso-delle-librerie-che-dichiarano-tipi-wildcard"><em>Uso</em> delle librerie che dichiarano tipi wildcard</h3>
<ul>
<li>Piuttosto semplice: basta passare un argomento compatibile o si ha un errore a tempo di compilazione</li>
</ul>
<h3 id="progettazione-di-librerie-che-usano-tipi-wildcard"><em>Progettazione</em> di librerie che usano tipi wildcard</h3>
<ul>
<li>Molto avanzato: le wildcard pongono limiti alle operazioni che uno può eseguire, derivanti dal principio di sostituibilità (!)</li>
</ul>
</section><section>
<h2 id="approfondimento-sulla-sostituibilità-dei-generici">Approfondimento: sulla sostituibilità dei generici</h2>
<h3 id="domanda-vectorinteger-è-un-sottotipo-di-vectorobject">Domanda: <code>Vector&lt;Integer&gt;</code> è un sottotipo di <code>Vector&lt;Object&gt;</code>?</h3>
<p>Ovvero, possiamo pensare di passare un <code>Vector&lt;Integer&gt;</code> in tutti i contesti in cui invece ci si aspetta un <code>Vector&lt;Object&gt;</code>?</p>
<h3 id="risposta-no-sembrerebbe-di-si-ma">Risposta: no!! Sembrerebbe di si.. ma:</h3>
<p>cosa succede se nel metodo qui sotto passiamo un <code>Vector&lt;Integer&gt;</code>?<br>
$\Rightarrow$ potremmo facilmente compromettere l’integrità del vettore</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">void</span> <span style="color:#000">addAString</span>(<span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">Object</span><span style="color:#000">&gt;</span> <span style="color:#000">vector</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#000">vector</span>.<span style="color:#836c28">addElement</span>(<span style="color:#c41a16">"warning!"</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">vec</span><span style="color:#000">=</span><span style="color:#a90d91">new</span> <span style="color:#000">Vector</span><span style="color:#000">&lt;&gt;</span>(); <span style="color:#177500">// Inferenza</span>
</span></span><span style="display:flex;"><span><span style="color:#000">vec</span>.<span style="color:#836c28">addElement</span>(<span style="color:#a90d91">new</span> <span style="color:#000">Integer</span>(<span style="color:#000">0</span>));
</span></span><span style="display:flex;"><span><span style="color:#000">vec</span>.<span style="color:#836c28">addElement</span>(<span style="color:#a90d91">new</span> <span style="color:#000">Integer</span>(<span style="color:#000">1</span>));
</span></span><span style="display:flex;"><span><span style="color:#000">vec</span>.<span style="color:#836c28">addElement</span>(<span style="color:#a90d91">new</span> <span style="color:#000">Integer</span>(<span style="color:#000">2</span>));
</span></span><span style="display:flex;"><span><span style="color:#000">addAString</span>(<span style="color:#000">vec</span>); 	<span style="color:#177500">// ATTENZIONE!!</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">int</span> <span style="color:#000">n</span> <span style="color:#000">=</span> <span style="color:#000">vec</span>.<span style="color:#836c28">getElementAt</span>(<span style="color:#000">3</span>).<span style="color:#836c28">intValue</span>(); <span style="color:#177500">// break!</span>
</span></span></code></pre></div></section><section>
<h2 id="subtyping-e-safety">Subtyping e safety</h2>
<h3 id="safety-di-un-linguaggio-oo"><em><strong>Safety</strong></em> di un linguaggio OO</h3>
<p>Def. semplificata: un linguaggio OO è <strong>safe</strong> nessuna combinazione di istruzioni porta a poter invocare un metodo su un oggetto la cui classe non lo definisce</p>
<ul>
<li>È necessario che il subtyping segua il principio di sostituibilità</li>
<li>Nell’esempio precedente: su un <code>Vector&lt;Integer&gt;</code> non possiamo invocare <code>addElement(String)</code>
<ul>
<li>Quindi, non è vero che <code>Vector&lt;Integer&gt; &lt;: Vector&lt;Object&gt;</code></li>
</ul>
</li>
</ul>
<p>Più in generale, se non possono accadere errori a tempo di esecuzione..</p>
<h3 id="java">Java</h3>
<ul>
<li>Si pone dove possibile l’obiettivo della safety</li>
</ul>
<h3 id="generici-e-safety">Generici e safety</h3>
<p><em>In generale, istanziazioni diverse di una classe generica sono scollegate</em></p>
<ul>
<li>non c’è <em><strong>covarianza</strong></em>: non è vero che <code>C&lt;T&gt; &lt;: C&lt;S&gt;</code> con <code>T &lt;: S</code></li>
<li>non c’è <em><strong>controvarianza</strong></em>: non è vero che <code>C&lt;S&gt; &lt;: C&lt;T&gt;</code> con <code>T &lt;: S</code></li>
</ul>
</section><section>
<h2 id="unsafety-con-gli-array-di-java">Unsafety con gli array di Java</h2>
<h3 id="gli-array-di-java-sono-trattati-come-covarianti">Gli <em>array di Java</em> sono trattati come <em>covarianti</em>!</h3>
<ul>
<li>Gli array assomigliano moltissimo ad un tipo generico
<ul>
<li><code>Integer[]</code> $\sim$ <code>Array&lt;Integer&gt;</code>, <code>T[]</code> $\sim$ <code>Array&lt;T&gt;</code></li>
</ul>
</li>
<li>E quindi sappiamo che non sarebbe safe gestirli con covarianza..</li>
<li>Ma invece in Java è esattamente così!! P.e. <code>Integer[] &lt;: Object[]</code>
<ul>
<li>Perché? Le prime versioni di Java non avevano i generici; e dunque trattare gli array da invarianti (come i generici) avrebbe ridotto le possibilità di scrivere codice riusabile mediante polimorfismo (ad es. funzionalità su <code>Object[]</code> da applicare ad <code>Integer[]</code> etc.)</li>
<li>Quindi ogni scrittura su array potrebbe potenzialmente fallire….lanciando un <code>ArrayStoreException</code></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">o</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Integer</span><span style="color:#000">[]</span>{<span style="color:#000">1</span>,<span style="color:#000">2</span>,<span style="color:#000">3</span>}; <span style="color:#177500">// OK per covarianza</span>
</span></span><span style="display:flex;"><span><span style="color:#000">o</span><span style="color:#000">[</span><span style="color:#000">0</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#c41a16">"a"</span>; <span style="color:#177500">// Lancia ArrayStoreException</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">// per prevenire la unsafety di successive istruzioni come:</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">// Integer[] ar=((Integer[])o);</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">// int i=ar[0].intValue();</span>
</span></span></code></pre></div></section><section>
<h2 id="covarianza-e-operazioni-di-accesso">Covarianza e operazioni di accesso</h2>
<div class="smaller">
<h3 id="la-covarianza-ct--cs-con-t--s-sarebbe-ammissibile-se">La covarianza (<code>C&lt;T&gt; &lt;: C&lt;S&gt;</code> con <code>T &lt;: S</code>) sarebbe ammissibile se:</h3>
<ul>
<li>La classe <code>C&lt;X&gt;</code> non avesse operazioni che ricevono oggetti <code>X</code></li>
<li>Ossia, ha solo campi privati e nessun metodo con argomento <code>X</code></li>
<li>Esempio di non ammissibilità: <code>Vector&lt;X&gt;</code> con metodo <code>addElement(X)</code> .. in quanto per poter sostituire a un <code>Vector&lt;Number&gt;</code> un <code>Vector&lt;Integer&gt;</code> dovremmo supportare l’aggiunta di <code>Number</code> qualsiasi al vettore di interi</li>
</ul>
<h3 id="la-controvarianza-cs--ct-con-t--s-sarebbe-ammissibile-se">La controvarianza (<code>C&lt;S&gt; &lt;: C&lt;T&gt;</code> con <code>T &lt;: S</code>) sarebbe ammissibile se:</h3>
<ul>
<li>La classe <code>C&lt;X&gt;</code> non avesse operazioni che producono oggetti <code>X</code></li>
<li>Ossia, ha solo campi privati e nessun metodo con tipo di ritorno <code>X</code></li>
<li>Esempio di non ammissibilità: <code>Vector&lt;X&gt;</code> con metodo <code>X first()</code> .. in quanto per poter sostituire un <code>Vector&lt;Number&gt;</code> a un <code>Vector&lt;Integer&gt;</code> dovremmo supportare la restituzione di un <code>Integer</code> anche per vettori di <code>Double</code></li>
</ul>
<h3 id="in-pratica">In pratica:</h3>
<ul>
<li>La maggior parte delle classi generiche <code>C&lt;X&gt;</code> hanno campi di tipo <code>X</code> (composizione) e operazioni getter e setter, e quindi per loro covarianza e controvarianza non funzionano
<ul>
<li>Come nel caso di <code>Vector&lt;X&gt;</code></li>
</ul>
</li>
<li>Con le wildcard si aumenta il riuso dei metodi che non usano tutte le funzioni (che collettivamente porterebbero a invarianza) del tipo generico in input</li>
</ul>
</div>
</section><section>
<h2 id="esempio-wildcard-bounded-covariante-c-extends-t">Esempio Wildcard Bounded covariante: <code>C&lt;? extends T&gt;</code></h2>
<ul>
<li>Visto che <code>printAll(Vector&lt;X extends Number&gt;)</code> usa solo <code>X getElementAt(int)</code>, l’input può essere covariante</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Cov</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">printAll</span>(<span style="color:#000">Vector</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Number</span><span style="color:#000">&gt;</span> <span style="color:#000">vect</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Questo metodo usa solo 'X getElementAt()'</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Quindi l'input può essere covariante!</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Si noti che Number definisce 'int intValue()'</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> (<span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">0</span>; <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">vect</span>.<span style="color:#836c28">getLength</span>(); <span style="color:#000">i</span><span style="color:#000">++</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">vect</span>.<span style="color:#836c28">getElementAt</span>(<span style="color:#000">i</span>).<span style="color:#836c28">intValue</span>());
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">vector</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Vector</span><span style="color:#000">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">vector</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">1</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">vector</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">2</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">vector</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">3</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Posso passare Vector&lt;Integer&gt; dove si attende</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Vector&lt;? extends Number&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">printAll</span>(<span style="color:#000">vector</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="esempio-wildcard-bounded-controvariante-c-super-t">Esempio Wildcard Bounded controvariante: <code>C&lt;? super T&gt;</code></h2>
<ul>
<li>Visto che <code>addStrings(Vector&lt;X super String&gt;)</code> usa solo <code>addElement(X)</code>, l’input può essere controvariante</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Contra</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">addStrings</span>(<span style="color:#000">Vector</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">vect</span>, <span style="color:#000">String</span> <span style="color:#000">s</span>, <span style="color:#a90d91">int</span> <span style="color:#000">n</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Questo metodo usa solo 'void addElement(X x)'</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Quindi l'input può essere contra-variante!</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> (<span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">0</span>; <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">n</span>; <span style="color:#000">i</span><span style="color:#000">++</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#000">vect</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">s</span>);
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">Object</span><span style="color:#000">&gt;</span> <span style="color:#000">vector</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Vector</span><span style="color:#000">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">vector</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">1</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">vector</span>.<span style="color:#836c28">addElement</span>(<span style="color:#a90d91">new</span> <span style="color:#000">java</span>.<span style="color:#836c28">util</span>.<span style="color:#836c28">Date</span>());
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Posso passare Vector&lt;Object&gt; dove si attende</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Vector&lt;? super String&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">addStrings</span>(<span style="color:#000">vector</span>, <span style="color:#c41a16">"aggiunta"</span>, <span style="color:#000">10</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">vector</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="esempio-wildcard-unbounded-c">Esempio Wildcard Unbounded: <code>C&lt;?&gt;</code></h2>
<ul>
<li>Visto che <code>printLength(Vector&lt;X&gt;)</code> usa solo <code>int getLength()</code>, l’input può essere bivariante <!-- covariante rispetto `Vector<Object>` --></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Unbounded</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">printLength</span>(<span style="color:#000">Vector</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">vect</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Questo metodo usa solo 'int getLength()'</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Quindi l'input può essere bi-variante!</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">vect</span>.<span style="color:#836c28">getLength</span>());
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">vector</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Vector</span><span style="color:#000">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">vector</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">1</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">vector</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">2</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">vector</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">3</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Posso passare Vector&lt;Integer&gt; dove si attende</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Vector&lt;?&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">printLength</span>(<span style="color:#000">vector</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="un-uso-tipico-metodi-in-classi-generiche">Un uso tipico: metodi in classi generiche</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">X</span><span style="color:#000">&gt;</span>{
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">addAllFrom</span>(<span style="color:#000">Vector</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">X</span><span style="color:#000">&gt;</span> <span style="color:#000">vect</span>){
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">for</span> (<span style="color:#a90d91">int</span> <span style="color:#000">i</span><span style="color:#000">=</span><span style="color:#000">0</span>;<span style="color:#000">i</span><span style="color:#000">&lt;</span><span style="color:#000">vect</span>.<span style="color:#836c28">getLength</span>();<span style="color:#000">i</span><span style="color:#000">++</span>){
</span></span><span style="display:flex;"><span>    	    <span style="color:#a90d91">this</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">vect</span>.<span style="color:#836c28">getElementAt</span>(<span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>    	}
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseVector</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">Object</span><span style="color:#000">&gt;</span> <span style="color:#000">vo</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Vector</span><span style="color:#000">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">vo</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">1</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">vo</span>.<span style="color:#836c28">addElement</span>(<span style="color:#c41a16">"2"</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">vo</span>.<span style="color:#836c28">addElement</span>(<span style="color:#a90d91">new</span> <span style="color:#000">java</span>.<span style="color:#836c28">util</span>.<span style="color:#836c28">Date</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">Double</span><span style="color:#000">&gt;</span> <span style="color:#000">vd</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Vector</span><span style="color:#000">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">vd</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">Math</span>.<span style="color:#836c28">random</span>());
</span></span><span style="display:flex;"><span>		<span style="color:#000">vd</span>.<span style="color:#836c28">addElement</span>(<span style="color:#000">Math</span>.<span style="color:#836c28">random</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">vo</span>.<span style="color:#836c28">addAll</span>(<span style="color:#000">vd</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">vo</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h1 id="collezioni-generiche-avanzate-1">Collezioni generiche (avanzate)</h1>
<h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="danilo-pianini"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini — <code>danilo.pianini@unibo.it</code></a></h3>
<h3 id="gianluca-aguzzi"><a href="mailto:gianluca.aguzzi@unibo.it">Gianluca Aguzzi — <code>gianluca.aguzzi@unibo.it</code></a></h3>
<h3 id="angelo-filaseta"><a href="mailto:angelo.filaseta@unibo.it">Angelo Filaseta — <code>angelo.filaseta@unibo.it</code></a></h3>
<p>Compiled on: 2025-10-02
 — <a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
<p><a href=".."><i class="fa fa-undo" aria-hidden="true"></i> back</a></p>
</section>

  


</div>
      

    </div>
<script type="text/javascript" src="/reveal-hugo/object-assign.js"></script>

<a href="/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"900","highlight_theme":"default","history":true,"mermaid":[{"startOnLoad":false}],"slide_number":true,"theme":"white","transition":"slide","transition_speed":"fast","width":"1440"}</script>
<script type="application/json" id="reveal-hugo-page-params">null</script>

<script src="/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }

  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = {
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>







  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
    
  
  

  
  

  
    
  
  

  
  

  
  

  
    
  
  

  
  

  
  

  
    
  
  

  
    
  
  

  
  

  
  

  
    
  
  

  
    
  
  

  
  

  
  

  
  

  
    
  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



  <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.3/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({"startOnLoad":false});

    let render = (event) => {
      let mermaidElems = event.currentSlide.querySelectorAll('.mermaid');
      if (!mermaidElems.length){
          return
      }
      mermaidElems.forEach(mermaidElem => {
          let processed = mermaidElem.getAttribute('data-processed');
          if (!processed){
              
              mermaid.init(undefined, mermaidElem);
          }
      });
    };
    
    render({currentSlide: Reveal.getCurrentSlide()});

    Reveal.on('slidechanged', render);
    Reveal.on('ready', render);
  </script>



    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<script>
  if (/.*?(\?|&)print-pdf/.test(window.location.toString())) {
      var ytVideos = document.getElementsByTagName("iframe")
      for (let i = 0; i < ytVideos.length; i++) {
          var videoFrame = ytVideos[i]
          var isYouTube = /^https?:\/\/(www.)youtube\.com\/.*/.test(videoFrame.src)
          if (isYouTube) {
              console.log(`Removing ${videoFrame.src}`)
              var parent = videoFrame.parentElement
              videoFrame.remove()
              var p = document.createElement('p')
              p.append(
                  document.createTextNode(
                      "There was an embedded video here, but it is disabled in the printed version of the slides."
                  )
              )
              p.append(document.createElement('br'))
              p.append(
                  document.createTextNode(
                      `Visit instead ${
                          videoFrame.src
                      } or ${
                          videoFrame.src.replace(
                              /(^https?:\/\/(www.)youtube\.com)\/(embed\/)(\w+).*/,
                              "https://www.youtube.com/watch?v=$4"
                          )
                      }`
                  )
              )
              parent.appendChild(p)
          }
      }
  }
</script>

    
  

</body></html>