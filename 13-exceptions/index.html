<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
<title>Progettazione e Sviluppo del Software</title>
<meta name="description" content="Progettazione e Sviluppo del Software, Tecnologie dei Sistemi Informatici">
<meta name="author" content="Danilo Pianini">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/css/custom-theme.min.c5d5307c22aeba26e5f63813bdbc90c5483e809383467a8e6f523d7f756010c5.css" id="theme"><link rel="stylesheet" href="/highlight-js/default.min.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="eccezioni">Eccezioni</h1>
<h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="danilo-pianini"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini — <code>danilo.pianini@unibo.it</code></a></h3>
<h3 id="gianluca-aguzzi"><a href="mailto:gianluca.aguzzi@unibo.it">Gianluca Aguzzi — <code>gianluca.aguzzi@unibo.it</code></a></h3>
<h3 id="angelo-filaseta"><a href="mailto:angelo.filaseta@unibo.it">Angelo Filaseta — <code>angelo.filaseta@unibo.it</code></a></h3>
<p>Compiled on: 2025-09-23
 — <a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
<p><a href=".."><i class="fa fa-undo" aria-hidden="true"></i> back</a></p>
</section><section>
<h2 id="outline">Outline</h2>
<h3 id="goal-della-lezione">Goal della lezione</h3>
<ul>
<li>Illustrare i vari meccanismi di gestione delle eccezioni in Java</li>
<li>Dare linee guida per la progrettazione di sistemi che usano eccezioni</li>
</ul>
<h3 id="argomenti">Argomenti</h3>
<ul>
<li>Errori a run-time e necessità di una loro gestione</li>
<li>Tipi di eccezioni/errori in Java</li>
<li>Istruzione <code>throw</code></li>
<li>Costrutto <code>try-catch-finally</code></li>
<li>Dichiarazioni <code>throws</code></li>
<li>Esempi</li>
</ul>
</section><section>
<h1 id="errori">Errori</h1>
</section><section>
<h2 id="errori-nei-programmi">Errori nei programmi</h2>
<h3 id="errori-a-tempo-di-compilazione-compile-time">Errori a tempo di compilazione (compile-time)</h3>
<ul>
<li>sono quelli più grossolani, sono intercettati dal compilatore</li>
<li>quindi rientrano nella fase dell’implementazione, sono innocui</li>
<li>un linguaggio con strong typing consente di identificarne molti a compile-time</li>
</ul>
<h3 id="errori-a-tempo-di-esecuzione-run-time-leftarrow-oggetto-della-lezione">Errori a tempo di esecuzione (run-time) <em>$\Leftarrow$ oggetto della lezione</em></h3>
<ul>
<li>sono condizioni anomale dovute alla dinamica del sistema
<ul>
<li>parametri anomali a funzioni, errori nell’uso delle risorse di sistema, …</li>
</ul>
</li>
<li>in genere è possibile
<ol>
<li>identificare/descrivere dove potrebbero accadere,</li>
<li>intercettarli e</li>
<li>gestirli prevedendo procedure di compensazione (rimedio al problema che le ha causate)</li>
</ol>
</li>
<li>alcuni linguaggi (come Java, ma non C) forniscono costrutti per agevolarne la gestione</li>
</ul>
</section><section>
<h2 id="errori-per-causa-interna-lanciati-dalla-jvm">Errori per causa interna: lanciati dalla JVM</h2>
<p>Errore numerico</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">int</span> <span style="color:#000">divide</span>(<span style="color:#a90d91">int</span> <span style="color:#000">x</span>, <span style="color:#a90d91">int</span> <span style="color:#000">y</span>) { <span style="color:#a90d91">return</span> <span style="color:#000">x</span> <span style="color:#000">/</span> <span style="color:#000">y</span>; }
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#a90d91">int</span> <span style="color:#000">z</span> <span style="color:#000">=</span> <span style="color:#000">divide</span>(<span style="color:#000">5</span>,<span style="color:#000">0</span>);
</span></span><span style="display:flex;"><span><span style="color:#177500">// ERRORE: divisione per 0</span>
</span></span></code></pre></div><p>Stack Overflow</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">int</span> <span style="color:#000">f</span>(<span style="color:#a90d91">int</span> <span style="color:#000">i</span>) { <span style="color:#a90d91">return</span> <span style="color:#000">i</span> <span style="color:#000">==</span> <span style="color:#000">0</span> <span style="color:#000">?</span> <span style="color:#000">0</span> : <span style="color:#000">f</span>(<span style="color:#000">i</span> <span style="color:#000">+</span> <span style="color:#000">1</span>); }
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#a90d91">int</span> <span style="color:#000">n</span> <span style="color:#000">=</span> <span style="color:#000">f</span>(<span style="color:#000">1</span>);
</span></span><span style="display:flex;"><span><span style="color:#177500">// ERRORE: stack overflow</span>
</span></span></code></pre></div><p>Deferenziamento di <code>null</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">int</span> <span style="color:#000">mysize</span>(<span style="color:#000">List</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">l</span>) { <span style="color:#a90d91">return</span> <span style="color:#000">l</span>.<span style="color:#836c28">size</span>(); }
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#a90d91">int</span> <span style="color:#000">n</span><span style="color:#000">=</span><span style="color:#000">mysize</span>(<span style="color:#a90d91">null</span>);
</span></span></code></pre></div></section><section>
<h2 id="violazioni-di-contratto-duso-di-un-oggetto-librerie-java">Violazioni di contratto d’uso di un oggetto: librerie Java</h2>
<p>Operazione non supportata</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000">Collections</span>.<span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span><span style="color:#000">emptySet</span>().<span style="color:#836c28">add</span>(<span style="color:#000">1</span>);
</span></span><span style="display:flex;"><span><span style="color:#177500">// UnsupportedOperationException</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* ERRORE: emptySet() torna un Set immutabile
</span></span></span><span style="display:flex;"><span><span style="color:#177500">   deve essere impedita l'invocazione di add() */</span>
</span></span></code></pre></div><p>Elemento non disponibile</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000">Iterator</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">Arrays</span>.<span style="color:#836c28">asList</span>(<span style="color:#000">1</span>,<span style="color:#000">2</span>).<span style="color:#836c28">iterator</span>();
</span></span><span style="display:flex;"><span><span style="color:#000">i</span>.<span style="color:#836c28">next</span>(); 
</span></span><span style="display:flex;"><span><span style="color:#000">i</span>.<span style="color:#836c28">next</span>();
</span></span><span style="display:flex;"><span><span style="color:#000">i</span>.<span style="color:#836c28">next</span>(); <span style="color:#177500">// NoSuchElementException</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* ERRORE: il contratto d'uso degli Iterator prevede di non
</span></span></span><span style="display:flex;"><span><span style="color:#177500">   invocare next() se hasNext() dà false */</span>
</span></span></code></pre></div><p>Formato illegale</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000">Integer</span>.<span style="color:#836c28">parseInt</span>(<span style="color:#c41a16">"10.4"</span>);
</span></span><span style="display:flex;"><span><span style="color:#177500">// NumberFormatException</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* ERRORE: parseInt() si aspetta una stringa che contenga,
</span></span></span><span style="display:flex;"><span><span style="color:#177500">   carattere per carattere, un intero valido */</span>
</span></span></code></pre></div></section><section>
<h2 id="violazioni-di-contratto-duso-di-un-oggetto-nostro-codice">Violazioni di contratto d’uso di un oggetto: nostro codice</h2>
<p>Argomento errato</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">LampRow</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">Lamp</span><span style="color:#000">[]</span> <span style="color:#000">row</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">LampsRow</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">size</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">if</span> (<span style="color:#000">size</span> <span style="color:#000">&lt;</span> <span style="color:#000">1</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#177500">// lancio eccezione, argomento non valido!</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">row</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">SimpleLamp</span><span style="color:#000">[</span><span style="color:#000">size</span><span style="color:#000">]</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Elemento non disponibile</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">LampRow</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">Lamp</span><span style="color:#000">[]</span> <span style="color:#000">row</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">Lamp</span> <span style="color:#000">get</span>(<span style="color:#a90d91">int</span> <span style="color:#000">index</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">if</span> (<span style="color:#000">index</span> <span style="color:#000">&gt;=</span> <span style="color:#000">row</span>.<span style="color:#836c28">size</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#177500">// lancio eccezione, elemento assente!</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="limportanza-della-error-aware-programming">L’importanza della “error-aware programming”</h2>
<h3 id="contratti">Contratti</h3>
<ul>
<li>Molti oggetti richiedono determinate <em>“condizioni di lavoro” (sequenze di chiamata, argomenti passati, aspettative d’uso di risorse computazionali)</em>
<ul>
<li>Al di fuori queste condizioni è necessario interrompere il lavoro e effettuare azioni correttive</li>
</ul>
</li>
</ul>
<h3 id="il-progettista-della-classe-deve">Il progettista della classe deve:</h3>
<ul>
<li>identificare le condizioni di lavoro definite “normali”</li>
<li>intercettare quando si esce da tali condizioni</li>
<li>eventualmente segnalare l’avvenuto errore</li>
<li>Principio <strong>fail fast</strong>: il software di qualità è costruito in modo tale da <em>fallire <strong>subito</strong> e <strong>chiaramente</strong></em> in caso di condizioni “non nominali”
<ul>
<li>Fallire subito aiuta ad intercettare gli errori prima che diventino irrecuperabili</li>
<li>Fallire chiaramente aiuta l’utilizzatore a porre rimedio</li>
</ul>
</li>
</ul>
<h3 id="il-cliente-a-sua-volta-progettista-di-un-altro-oggetto-deve">Il cliente (a sua volta progettista di un altro oggetto) deve:</h3>
<ul>
<li>essere informato di come l’oggetto va usato (da cui l’importanza di avere <em>chiari messaggi di errore</em>)</li>
<li>intercettare gli errori e porvi rimedio con un <em>handler</em></li>
</ul>
</section><section>
<h2 id="eccezioni-in-java">Eccezioni in Java</h2>
<h3 id="riassunto-java-exceptions">Riassunto Java Exceptions</h3>
<ul>
<li>Gli errori a run-time in Java sono rappresentati da oggetti della classe <code>java.lang.Throwable</code>. Vengono “lanciati”:
<ul>
<li>da esplicite istruzioni del tipo: <code>throw &lt;exception-object&gt;;</code></li>
<li>direttamente dalla JVM per cause legate al “sistema operativo”</li>
</ul>
</li>
<li>Tali oggetti portano informazioni utili a capire la causa dell’errore</li>
<li>Si può dichiarare se un metodo potrà lanciare una eccezione</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">void</span> <span style="color:#000">m</span>() <span style="color:#a90d91">throws</span> <span style="color:#000">SomeException</span>, <span style="color:#000">AnotherException</span> { ... }
</span></span></code></pre></div><ul>
<li>Si può intercettare una eccezione e porvi rimedio:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">try</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#000">m</span>();
</span></span><span style="display:flex;"><span>} <span style="color:#a90d91">catch</span> (<span style="color:#000">SomeException</span> <span style="color:#000">exception</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// handle exception!</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Tutti meccanismi che impareremo a progettare e implementare in questa lezione!</strong></p>
</section><section>
<h2 id="tipologie-di-errori-in-java">Tipologie di errori in Java</h2>
<h3 id="errori-javalangerror-e-sottoclassi"><strong>Errori</strong>: <code>java.lang.Error</code> e sottoclassi</h3>
<ul>
<li>Dovute a un problema “serio” (e non risolvibile) interno alla JVM</li>
<li><em>Di norma una applicazione non si deve preoccupare di intercettarli (non ci sarebbe molto di più da fare che interrompere l’esecuzione)</em>
<ul>
<li>Ad esempio, la memoria disponibile è insufficiente per continuare l’esecuzione</li>
</ul>
</li>
</ul>
<h3 id="eccezioni-unchecked-javalangruntimeexception-e-sottoclassi"><strong>Eccezioni unchecked</strong>: <code>java.lang.RuntimeException</code> e sottoclassi</h3>
<ul>
<li>Causate da un bug nella programmazione</li>
<li><em>Nella maggior parte dei casi</em>, un’applicazione non dovrebbe intercettarle
<ul>
<li>vengono risolti in fase di debug</li>
<li>ci sono eccezioni…</li>
</ul>
</li>
</ul>
<h3 id="eccezioni-checked-i-javalangthrowable-tranne-le-precedenti"><strong>Eccezioni checked</strong>: i <code>java.lang.Throwable</code> tranne le precedenti</h3>
<ul>
<li>Causate da un problema prevedibile ma non rimediabile a priori</li>
<li><em>Le applicazione devono dichiarli esplicitamente, e vanno intercettati e gestiti esplicitamente</em></li>
</ul>
</section><section>
<h2 id="tipologie-di-errori-in-java-uml">Tipologie di errori in Java: UML</h2>
<p><img src="imgs/uml-throw.png" alt=""></p>
</section><section>
<h2 id="usuale-gestione">Usuale gestione</h2>
<h3 id="errori-1">Errori</h3>
<ul>
<li>Nessuna gestione necessaria (se capitano, tipicamente è finita…)</li>
</ul>
<h3 id="eccezioni-unchecked">Eccezioni unchecked</h3>
<ul>
<li>Vanno dichiarate in un commento Javadoc al codice</li>
<li>Di norma si riusano le sottoclassi <code>java.lang.RuntimeException</code> del JDK, ossia non se ne definiscono di nuove tipologie
<ul>
<li><code>ArithmeticException</code> errori di calcolo illegale</li>
<li><code>IllegalArgumentException</code> per argomenti non supportati</li>
<li><code>IllegalStateException</code> per errate sequenze di chiamate di metodo (inconsistenza interna)</li>
<li><code>UnsupportedOperationException</code> per parti del programma non ancora sviluppate o non supportate</li>
</ul>
</li>
<li>Si lanciano con l’istruzione <code>throw</code></li>
</ul>
<h3 id="eccezioni-checked">Eccezioni checked</h3>
<ul>
<li>Vanno dichiarate nella signature del metodo con la clausola <code>throws</code></li>
<li>La documentazione deve spiegare in quali casi vengono lanciate</li>
<li>Vanno intercettate con l’istruzione <code>try-catch</code></li>
<li>Di norma si costruiscono sotto-classi ad-hoc di <code>Exception</code> (per modellare problemi “domain-specific”)</li>
</ul>
</section><section>
<h2 id="errori-ed-eccezioni-unchecked-cosa-accade">Errori ed eccezioni unchecked: cosa accade</h2>
<h3 id="quando-accadono-ossia-quando-vengono-lanciate">Quando accadono, ossia quando vengono lanciate…</h3>
<ul>
<li>Causano l’interruzione dell’applicazione</li>
<li>Comportano la scrittura su console di errore (<code>System.err</code>) di un messaggio che include lo <em><strong>StackTrace</strong></em> – <code>Thread.dumpStack();</code></li>
<li>Dal quale possiamo desumere la sequenza di chiamate e il punto del codice in cui si ha avuto il problema</li>
</ul>
<h3 id="errorieccezioni-unchecked-comuni-e-già-viste">Errori/eccezioni unchecked comuni e già viste</h3>
<ul>
<li><code>StackOverFlowError</code>: stack esaurito (ricorsione infinita?)</li>
<li><code>NullPointerException</code>, <code>ArrayStoreException</code>, <code>ClassCastException</code>, <code>ArrayIndexOutOfBoundsException</code>, <code>NumericException</code>, <code>OperationNotSupportedException</code></li>
<li>Altri andranno verificati sulla documentazione quando incontrati</li>
</ul>
</section><section>
<h2 id="esempio-di-stampa">Esempio di stampa</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UncheckedStackTrace</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span>{<span style="color:#000">10</span>, <span style="color:#000">20</span>, <span style="color:#000">30</span>};
</span></span><span style="display:flex;"><span>        <span style="color:#000">accessArray</span>(<span style="color:#000">a</span>,<span style="color:#000">1</span>); <span style="color:#177500">// OK</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">accessArray</span>(<span style="color:#000">a</span>,<span style="color:#000">3</span>); <span style="color:#177500">// Eccezione</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">accessArray</span>(<span style="color:#000">a</span>,<span style="color:#000">5</span>); <span style="color:#177500">// Eccezione</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">accessArray</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">array</span>, <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">pos</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">return</span> <span style="color:#000">array</span><span style="color:#000">[</span><span style="color:#000">pos</span><span style="color:#000">]</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Stampa dell'errore:
</span></span></span><span style="display:flex;"><span><span style="color:#177500">
</span></span></span><span style="display:flex;"><span><span style="color:#177500">Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 3
</span></span></span><span style="display:flex;"><span><span style="color:#177500">        at UncheckedStackTrace.accessArray(UncheckedStackTrace.java:9)
</span></span></span><span style="display:flex;"><span><span style="color:#177500">        at UncheckedStackTrace.main(UncheckedStackTrace.java:5)
</span></span></span><span style="display:flex;"><span><span style="color:#177500">*/</span>
</span></span></code></pre></div></section><section>
<h2 id="listruzione-throw">L’istruzione <code>throw</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UncheckedThrow</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span>{ <span style="color:#000">10</span>, <span style="color:#000">20</span>, <span style="color:#000">30</span> };
</span></span><span style="display:flex;"><span>    	<span style="color:#000">accessArray</span>(<span style="color:#000">a</span>, <span style="color:#000">1</span>); <span style="color:#177500">// OK</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">accessArray</span>(<span style="color:#000">a</span>, <span style="color:#000">3</span>); <span style="color:#177500">// Eccezione</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">accessArray</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">array</span>, <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">pos</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">if</span> (<span style="color:#000">pos</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span> <span style="color:#000">||</span> <span style="color:#000">pos</span> <span style="color:#000">&gt;=</span> <span style="color:#000">array</span>.<span style="color:#836c28">length</span>) {
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">msg</span> <span style="color:#000">=</span> <span style="color:#c41a16">"Accesso fuori dai limiti, in posizione "</span> <span style="color:#000">+</span> <span style="color:#000">pos</span>;
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IllegalArgumentException</span>(<span style="color:#000">msg</span>);
</span></span><span style="display:flex;"><span>    	}
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#000">array</span><span style="color:#000">[</span><span style="color:#000">pos</span><span style="color:#000">]</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Stampa dell'errore:
</span></span></span><span style="display:flex;"><span><span style="color:#177500">
</span></span></span><span style="display:flex;"><span><span style="color:#177500">Exception in thread "main" java.lang.IllegalArgumentException: Accesso fuori dai limiti, in posizione 3
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	at it.unibo.apice.oop.p13exceptions.classes.UncheckedThrow.accessArray(UncheckedThrow.java:13)
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	at it.unibo.apice.oop.p13exceptions.classes.UncheckedThrow.main(UncheckedThrow.java:7)
</span></span></span><span style="display:flex;"><span><span style="color:#177500">*/</span>
</span></span></code></pre></div></section><section>
<h2 id="listruzione-throw-una-variante-equivalente">L’istruzione <code>throw</code>: una variante equivalente</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UncheckedThrow2</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span> { <span style="color:#000">10</span>, <span style="color:#000">20</span>, <span style="color:#000">30</span> };
</span></span><span style="display:flex;"><span>    	<span style="color:#000">accessArray</span>(<span style="color:#000">a</span>,<span style="color:#000">1</span>); <span style="color:#177500">// OK</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">accessArray</span>(<span style="color:#000">a</span>,<span style="color:#000">3</span>); <span style="color:#177500">// Eccezione</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">accessArray</span>(<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">array</span>, <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">pos</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">if</span> (<span style="color:#000">pos</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span> <span style="color:#000">||</span> <span style="color:#000">pos</span> <span style="color:#000">&gt;=</span> <span style="color:#000">array</span>.<span style="color:#836c28">length</span>) {
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">msg</span> <span style="color:#000">=</span> <span style="color:#c41a16">"Accesso fuori dai limiti, in posizione "</span> <span style="color:#000">+</span> <span style="color:#000">pos</span>;
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">final</span> <span style="color:#000">RuntimeException</span> <span style="color:#000">e</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">java</span>.<span style="color:#836c28">lang</span>.<span style="color:#836c28">IllegalArgumentException</span>(<span style="color:#000">msg</span>);
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">throw</span> <span style="color:#000">e</span>;
</span></span><span style="display:flex;"><span>    	}
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#000">array</span><span style="color:#000">[</span><span style="color:#000">pos</span><span style="color:#000">]</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="listruzione-throw-1">L’istruzione <code>throw</code></h2>
<h3 id="sintassi-generale">Sintassi generale</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">throw</span> <span style="color:#000">&lt;</span><span style="color:#000">expression</span><span style="color:#000">-</span><span style="color:#000">that</span><span style="color:#000">-</span><span style="color:#000">evaluates</span><span style="color:#000">-</span><span style="color:#000">to</span><span style="color:#000">-</span><span style="color:#000">a</span><span style="color:#000">-</span><span style="color:#000">throwable</span><span style="color:#000">&gt;</span>;
</span></span></code></pre></div><h3 id="casi-tipici">Casi tipici</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">&lt;</span><span style="color:#000">exception</span><span style="color:#000">-</span><span style="color:#a90d91">class</span><span style="color:#000">&gt;(&lt;</span><span style="color:#3f6e75">message</span><span style="color:#000">-</span><span style="color:#000">string</span><span style="color:#000">&gt;</span>);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">&lt;</span><span style="color:#000">exception</span><span style="color:#000">-</span><span style="color:#a90d91">class</span><span style="color:#000">&gt;(&lt;</span><span style="color:#3f6e75">ad</span><span style="color:#000">-</span><span style="color:#000">hoc</span><span style="color:#000">-</span><span style="color:#000">args</span><span style="color:#000">&gt;</span>);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">&lt;</span><span style="color:#000">exception</span><span style="color:#000">-</span><span style="color:#a90d91">class</span><span style="color:#000">&gt;();</span>
</span></span></code></pre></div><h3 id="effetto">Effetto</h3>
<ul>
<li>Si interrompe immediatamente l’esecuzione del metodo in cui ci si trova (se non dentro una <code>try-catch</code>, come vedremo dopo..)</li>
<li>L’oggetto eccezione creato viene “riportato” al chiamante</li>
<li>Ricorsivamente, si giunge al <code>main</code>, con la stampa su <code>System.err</code> (exception chaining)</li>
</ul>
</section><section>
<h1 id="catturare-eccezioni">Catturare eccezioni</h1>
</section><section>
<h2 id="il-costrutto-try-catch">Il costrutto <code>try-catch</code></h2>
<h3 id="sintassi-da-estendere-successivamente">Sintassi (da estendere successivamente)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">try</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">body</span><span style="color:#000">-</span><span style="color:#000">maybe</span><span style="color:#000">-</span><span style="color:#000">throwing</span><span style="color:#000">-</span><span style="color:#000">an</span><span style="color:#000">-</span><span style="color:#000">exception</span><span style="color:#000">&gt;</span>}
</span></span><span style="display:flex;"><span>} <span style="color:#a90d91">catch</span>(<span style="color:#000">&lt;</span><span style="color:#000">throwable</span><span style="color:#000">-</span><span style="color:#a90d91">class</span><span style="color:#000">&gt;</span> <span style="color:#000">&lt;</span><span style="color:#3f6e75">var</span><span style="color:#000">&gt;</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">handler</span><span style="color:#000">-</span><span style="color:#000">body</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="esempio">Esempio</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">try</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#000">RangeIterator</span> <span style="color:#000">r</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">RangeIterator</span>(<span style="color:#000">a</span>,<span style="color:#000">b</span>);
</span></span><span style="display:flex;"><span>} <span style="color:#a90d91">catch</span>(<span style="color:#000">RuntimeException</span> <span style="color:#000">e</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">e</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="significato">Significato</h3>
<ul>
<li>Se il body nella <code>try</code> lancia una eccezione del tipo specificato nella <code>catch</code></li>
<li>Allora si esegue il corrispondente handler, e non si ha la terminazione della applicazione</li>
<li>Se non c’è eccezione si salta l’handler e si prosegue</li>
</ul>
</section><section>
<h2 id="il-costrutto-try-catch-finally">Il costrutto <code>try-catch-finally</code></h2>
<h3 id="sintassi-generale-1">Sintassi generale</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">try</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">body</span><span style="color:#000">-</span><span style="color:#000">maybe</span><span style="color:#000">-</span><span style="color:#000">throwing</span><span style="color:#000">-</span><span style="color:#000">an</span><span style="color:#000">-</span><span style="color:#000">exception</span><span style="color:#000">&gt;</span>}
</span></span><span style="display:flex;"><span>} <span style="color:#a90d91">catch</span>(<span style="color:#000">&lt;</span><span style="color:#000">throwable</span><span style="color:#000">-</span><span style="color:#a90d91">class</span><span style="color:#000">&gt;</span> <span style="color:#000">&lt;</span><span style="color:#3f6e75">var</span><span style="color:#000">&gt;</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">handler</span><span style="color:#000">-</span><span style="color:#000">body</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>} <span style="color:#a90d91">catch</span>(<span style="color:#000">&lt;</span><span style="color:#000">throwable</span><span style="color:#000">-</span><span style="color:#a90d91">class</span><span style="color:#000">&gt;</span> <span style="color:#000">&lt;</span><span style="color:#3f6e75">var</span><span style="color:#000">&gt;</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">handler</span><span style="color:#000">-</span><span style="color:#000">body</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>} <span style="color:#a90d91">catch</span>(<span style="color:#000">&lt;</span><span style="color:#000">throwable</span><span style="color:#000">-</span><span style="color:#a90d91">class</span><span style="color:#000">&gt;</span> <span style="color:#000">&lt;</span><span style="color:#3f6e75">var</span><span style="color:#000">&gt;</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">handler</span><span style="color:#000">-</span><span style="color:#000">body</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>} <span style="color:#a90d91">finally</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">completion</span><span style="color:#000">-</span><span style="color:#000">body</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="significato-1">Significato</h3>
<ul>
<li>Se il body nella <code>try</code> lancia una eccezione</li>
<li>La prima <code>catch</code> pertinente esegue l’handler (non ci possono essere sovrapposizioni!)</li>
<li>Poi si eseguirà anche il <code>completion-body</code></li>
<li>Il body nella <code>finally</code> sarà comunque eseguito!</li>
</ul>
</section><section>
<h2 id="spiegazione">Spiegazione</h2>
<h3 id="come-funziona-la-finally">Come funziona la <code>finally</code>?</h3>
<ul>
<li>garantisce che il codice nel suo handler sarà sicuramente eseguito
<ul>
<li>sia se <em>ho avuto</em> eccezione</li>
<li>sia se <em>non ho avuto</em> eccezione</li>
<li>sia <em>se uno degli handler delle catch ha generato eccezione</em></li>
</ul>
</li>
</ul>
<h3 id="a-cosa-serve">A cosa serve?</h3>
<ul>
<li>in genere contiene del codice di cleanup che deve comunque essere eseguito</li>
<li>rilascio risorse, chiusura file, stampa messaggi, etc..</li>
</ul>
</section><section>
<h1 id="creazione-e-rilancio-di-eccezioni">Creazione e rilancio di eccezioni</h1>
<h2 id="creazione-di-una-nuova-classe-di-eccezioni">Creazione di una nuova classe di eccezioni</h2>
<h3 id="nuove-eccezioni">Nuove eccezioni</h3>
<ul>
<li>Un sistema potrebbe richiedere nuovi tipi di eccezioni, che rappresentano eventi specifici collegati al dominio applicativo
<ul>
<li>Persona già presente (in un archivio cittadini)</li>
<li>Lampadina esaurita (in una applicazione domotica)</li>
</ul>
</li>
<li>Semplicemente si fa una estensione di <code>Exception</code> o <code>RuntimeException</code>
<ul>
<li>a seconda che la si voglia checked o unchecked</li>
<li>per il momento stiamo considerando solo le unchecked</li>
</ul>
</li>
<li>Non vi sono particolari metodi da ridefinire di solito
<ul>
<li>Solo <em>ricordarsi di chiamare correttamente il costruttore del padre</em> (<code>super(...)</code>)</li>
<li>Si dovrebbe incorporare una descrizione articolata della <em>causa dell’eccezione</em>
<ul>
<li>come opportuno parametro della chiamata al costruttore del padre</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section>
<h2 id="esempio-myexception">Esempio: <code>MyException</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">MyException</span> <span style="color:#a90d91">extends</span> <span style="color:#000">RuntimeException</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// tengo traccia degli argomenti che hanno causato il problema</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">MyException</span>(<span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">s</span>, <span style="color:#a90d91">final</span> <span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">super</span>(<span style="color:#000">s</span>);
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span>.<span style="color:#836c28">args</span> <span style="color:#000">=</span> <span style="color:#000">args</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// modifico la toString per evidenziare this.args</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">toString</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">return</span> <span style="color:#c41a16">"Failed with arguments: "</span> <span style="color:#000">+</span> <span style="color:#000">java</span>.<span style="color:#836c28">util</span>.<span style="color:#836c28">Arrays</span>.<span style="color:#836c28">toString</span>(<span style="color:#000">args</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="esempio-usemyexception">Esempio: <code>UseMyException</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseMyException</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span>) {
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">try</span> { <span style="color:#177500">// attenzione alla formattazione di questo esempio!</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">Integer</span>.<span style="color:#836c28">parseInt</span>(<span style="color:#000">s</span><span style="color:#000">[</span><span style="color:#000">0</span><span style="color:#000">]</span>);
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">b</span> <span style="color:#000">=</span> <span style="color:#000">Integer</span>.<span style="color:#836c28">parseInt</span>(<span style="color:#000">s</span><span style="color:#000">[</span><span style="color:#000">1</span><span style="color:#000">]</span>);
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">final</span> <span style="color:#a90d91">var</span> <span style="color:#000">iterator</span> <span style="color:#000">=</span> <span style="color:#000">java</span>.<span style="color:#836c28">util</span>.<span style="color:#836c28">List</span>.<span style="color:#836c28">of</span>(<span style="color:#000">a</span>, <span style="color:#000">b</span>).<span style="color:#836c28">iterator</span>();
</span></span><span style="display:flex;"><span>    		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">iterator</span>.<span style="color:#836c28">next</span>());
</span></span><span style="display:flex;"><span>    		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">iterator</span>.<span style="color:#836c28">next</span>());
</span></span><span style="display:flex;"><span>    		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">iterator</span>.<span style="color:#836c28">next</span>()); <span style="color:#177500">// Exception</span>
</span></span><span style="display:flex;"><span>    	} <span style="color:#a90d91">catch</span> (<span style="color:#000">Exception</span> <span style="color:#000">e</span>) { <span style="color:#177500">// Exception caught!</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">final</span> <span style="color:#000">RuntimeException</span> <span style="color:#000">e2</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">MyException</span>(<span style="color:#c41a16">"Re-throwing: "</span> <span style="color:#000">+</span> <span style="color:#000">e</span>, <span style="color:#000">s</span>);
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">throw</span> <span style="color:#000">e2</span>;
</span></span><span style="display:flex;"><span>    	}
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Esempio: java UseMyException 10 13.1
</span></span></span><span style="display:flex;"><span><span style="color:#177500">Exception in thread "main" Failed with arguments: [10, 13.1]
</span></span></span><span style="display:flex;"><span><span style="color:#177500">it.unibo.exceptions.classes.MyException:
</span></span></span><span style="display:flex;"><span><span style="color:#177500">    Rilancio di: java.lang.NumberFormatException: For input string: "13.1"
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	at it.unibo.exceptions.classes.UseMyException.main(UseMyException.java:14)
</span></span></span><span style="display:flex;"><span><span style="color:#177500">*/</span>
</span></span></code></pre></div></section><section>
<h2 id="checked-vs-unchecked">Checked vs Unchecked</h2>
<h3 id="unchecked-runtimeexception-o-sottoclassi">Unchecked: <code>RuntimeException</code> o sottoclassi</h3>
<ul>
<li>Quelle viste finora, dovute ad un bug di programmazione</li>
<li>Quindi sono da catturare opzionalmente, perché rimediabili
<ul>
<li>$\Rightarrow$ raramente vanno catturate!</li>
</ul>
</li>
</ul>
<h3 id="checked-exception-o-sottoclassi-ma-non-di-runtimeexception">Checked: <code>Exception</code> o sottoclassi ma non di <code>RuntimeException</code></h3>
<ul>
<li>Rappresentano errori non riconducibili ad una scorretta programmazione, ma ad eventi abbastanza comuni anche nel sistema una volta installato e funzionante
<ul>
<li>Funzionamento non normale, ma forse recuperabile
<ul>
<li>Ad esempio, un errore di rete (potremmo riprovare)</li>
</ul>
</li>
</ul>
</li>
<li>I metodi che le lanciano lo <em><strong>devono</strong></em> dichiararle esplicitamente (<code>throws</code>)</li>
<li>Chi chiama tali metodi <em><strong>deve</strong></em> obbligatoriamente gestirle
<ul>
<li>o catturandole con un <code>try-catch</code></li>
<li>o rilanciandole al chiamante con la <code>throws</code>
<ul>
<li>Nel qual caso, va <em>preservata l’eccezione originale</em>! (<em>parent</em> o <em>cause</em>)</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section>
<h2 id="una-eccezione-checked-ioexception-e-input-da-tastiera">Una eccezione checked: <code>IOException</code> e input da tastiera</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.io.*</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">IOFromKeyboard</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#177500">// La dichiarazione throws qui è obbligatoria!</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">getIntFromKbd</span>() <span style="color:#a90d91">throws</span> <span style="color:#000">IOException</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#000">InputStreamReader</span> <span style="color:#000">ISR</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">InputStreamReader</span>(<span style="color:#000">System</span>.<span style="color:#836c28">in</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">BufferedReader</span> <span style="color:#000">keyboardInput</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">BufferedReader</span>(<span style="color:#000">ISR</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">String</span> <span style="color:#000">line</span> <span style="color:#000">=</span> <span style="color:#a90d91">null</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#000">line</span> <span style="color:#000">=</span> <span style="color:#000">keyboardInput</span>.<span style="color:#836c28">readLine</span>(); <span style="color:#177500">// IOException</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#000">Integer</span>.<span style="color:#836c28">parseInt</span>(<span style="color:#000">line</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) <span style="color:#a90d91">throws</span> <span style="color:#000">Exception</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"Inserisci un numero: "</span>);
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">int</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">getIntFromKbd</span>();
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Hai inserito il num.: "</span> <span style="color:#000">+</span> <span style="color:#000">a</span>);
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="qualche-variante-campi-statici">Qualche variante: campi statici</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.io.*</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">IOFromKeyboard2</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">BufferedReader</span> <span style="color:#000">KBD</span> <span style="color:#000">=</span> 
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">new</span> <span style="color:#000">BufferedReader</span>(<span style="color:#a90d91">new</span> <span style="color:#000">InputStreamReader</span>(<span style="color:#000">System</span>.<span style="color:#836c28">in</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">getIntFromKbd</span>() <span style="color:#a90d91">throws</span> <span style="color:#000">IOException</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#000">Integer</span>.<span style="color:#836c28">parseInt</span>(<span style="color:#000">KBD</span>.<span style="color:#836c28">readLine</span>());
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">try</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"Inserisci un numero: "</span>);
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">getIntFromKbd</span>();
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Hai inserito il num.: "</span> <span style="color:#000">+</span> <span style="color:#000">a</span>);
</span></span><span style="display:flex;"><span>		} <span style="color:#a90d91">catch</span> (<span style="color:#000">IOException</span> <span style="color:#000">e</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Errore di I/O: "</span> <span style="color:#000">+</span> <span style="color:#000">e</span>);
</span></span><span style="display:flex;"><span>		} <span style="color:#a90d91">catch</span> (<span style="color:#000">NumberFormatException</span> <span style="color:#000">e</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">e</span>);
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="qualche-variante-input-iterato-e-rilancio">Qualche variante: input iterato e rilancio</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.io.*</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">IOFromKeyboard3</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">BufferedReader</span> <span style="color:#000">KBD</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">BufferedReader</span>(
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">new</span> <span style="color:#000">InputStreamReader</span>(<span style="color:#000">System</span>.<span style="color:#836c28">in</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">getIntFromKbd</span>() <span style="color:#a90d91">throws</span> <span style="color:#000">IOException</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#000">Integer</span>.<span style="color:#836c28">parseInt</span>(<span style="color:#000">KBD</span>.<span style="color:#836c28">readLine</span>());
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) <span style="color:#a90d91">throws</span> <span style="color:#000">NumberFormatException</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">while</span> (<span style="color:#a90d91">true</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">try</span> {
</span></span><span style="display:flex;"><span>				<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"Inserisci un numero: "</span>);
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">getIntFromKbd</span>();
</span></span><span style="display:flex;"><span>				<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Hai inserito il num.: "</span> <span style="color:#000">+</span> <span style="color:#000">a</span>);
</span></span><span style="display:flex;"><span>			} <span style="color:#a90d91">catch</span> (<span style="color:#000">IOException</span> <span style="color:#000">e</span>) {
</span></span><span style="display:flex;"><span>				<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Errore di I/O: "</span> <span style="color:#000">+</span> <span style="color:#000">e</span>);
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="input-da-tastiera-alternativa-più-moderna">Input da tastiera (alternativa più moderna)</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">IOFromKeyboard4</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#177500">// L'uso di System.console().readLine() non lancia eccezioni</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">while</span> (<span style="color:#a90d91">true</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"Inserisci un numero: "</span>);
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">Integer</span>.<span style="color:#836c28">parseInt</span>(<span style="color:#000">System</span>.<span style="color:#836c28">console</span>().<span style="color:#836c28">readLine</span>());
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Hai inserito il num.: "</span> <span style="color:#000">+</span> <span style="color:#000">a</span>);
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/*
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> * Si controlli la classe java.lang.Console, fornisce varie funzioni utili per
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> * l'I/O, come le stampe formattate tipo printf
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> */</span>
</span></span></code></pre></div></section><section>
<h1 id="eccezioni-1">Eccezioni</h1>
<h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="danilo-pianini"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini — <code>danilo.pianini@unibo.it</code></a></h3>
<h3 id="gianluca-aguzzi"><a href="mailto:gianluca.aguzzi@unibo.it">Gianluca Aguzzi — <code>gianluca.aguzzi@unibo.it</code></a></h3>
<h3 id="angelo-filaseta"><a href="mailto:angelo.filaseta@unibo.it">Angelo Filaseta — <code>angelo.filaseta@unibo.it</code></a></h3>
<p>Compiled on: 2025-09-23
 — <a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
<p><a href=".."><i class="fa fa-undo" aria-hidden="true"></i> back</a></p>
</section>

  


</div>
      

    </div>
<script type="text/javascript" src="/reveal-hugo/object-assign.js"></script>

<a href="/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"900","highlight_theme":"default","history":true,"mermaid":[{"startOnLoad":false}],"slide_number":true,"theme":"white","transition":"slide","transition_speed":"fast","width":"1440"}</script>
<script type="application/json" id="reveal-hugo-page-params">null</script>

<script src="/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }

  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = {
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>







  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
    
  
  

  
  

  
    
  
  

  
  

  
  

  
    
  
  

  
  

  
  

  
    
  
  

  
    
  
  

  
  

  
  

  
  

  
    
  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



  <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.3/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({"startOnLoad":false});

    let render = (event) => {
      let mermaidElems = event.currentSlide.querySelectorAll('.mermaid');
      if (!mermaidElems.length){
          return
      }
      mermaidElems.forEach(mermaidElem => {
          let processed = mermaidElem.getAttribute('data-processed');
          if (!processed){
              
              mermaid.init(undefined, mermaidElem);
          }
      });
    };
    
    render({currentSlide: Reveal.getCurrentSlide()});

    Reveal.on('slidechanged', render);
    Reveal.on('ready', render);
  </script>



    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<script>
  if (/.*?(\?|&)print-pdf/.test(window.location.toString())) {
      var ytVideos = document.getElementsByTagName("iframe")
      for (let i = 0; i < ytVideos.length; i++) {
          var videoFrame = ytVideos[i]
          var isYouTube = /^https?:\/\/(www.)youtube\.com\/.*/.test(videoFrame.src)
          if (isYouTube) {
              console.log(`Removing ${videoFrame.src}`)
              var parent = videoFrame.parentElement
              videoFrame.remove()
              var p = document.createElement('p')
              p.append(
                  document.createTextNode(
                      "There was an embedded video here, but it is disabled in the printed version of the slides."
                  )
              )
              p.append(document.createElement('br'))
              p.append(
                  document.createTextNode(
                      `Visit instead ${
                          videoFrame.src
                      } or ${
                          videoFrame.src.replace(
                              /(^https?:\/\/(www.)youtube\.com)\/(embed\/)(\w+).*/,
                              "https://www.youtube.com/watch?v=$4"
                          )
                      }`
                  )
              )
              parent.appendChild(p)
          }
      }
  }
</script>

    
  

</body></html>