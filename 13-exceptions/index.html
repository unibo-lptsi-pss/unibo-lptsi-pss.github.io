<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
<title>Progettazione e Sviluppo del Software</title>
<meta name="description" content="Progettazione e Sviluppo del Software, Tecnologie dei Sistemi Informatici">
<meta name="author" content="Danilo Pianini">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/css/custom-theme.min.b14bd2cb8ebd9f5aadd1914151911df5ab7b2264253b1df19c307933796d5e56.css" id="theme"><link rel="stylesheet" href="/highlight-js/default.min.css">
    
<link rel="stylesheet" href="https://gitcdn.link/repo/DanySK/css-blur-animation/master/blur.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="eccezioni">Eccezioni</h1>
<!-- <h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="roberto-casadei-----robycasadeiuniboitmailtorobycasadeiuniboit"><a href="mailto:roby.casadei@unibo.it">Roberto Casadei &mdash; <code>roby.casadei@unibo.it</code></a></h3>
<h3 id="danilo-pianini-----danilopianiniuniboitmailtodanilopianiniuniboit"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini &mdash; <code>danilo.pianini@unibo.it</code></a></h3>
<p><a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
</section><section> -->
<h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="roberto-casadei-----robycasadeiuniboitmailtorobycasadeiuniboit"><a href="mailto:roby.casadei@unibo.it">Roberto Casadei — <code>roby.casadei@unibo.it</code></a></h3>
<h3 id="danilo-pianini-----danilopianiniuniboitmailtodanilopianiniuniboit"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini — <code>danilo.pianini@unibo.it</code></a></h3>
<p><a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
</section><section>
<h2 id="nota">Nota</h2>
<ul>
<li>
<p>Questo materiale è ampiamente basato su quello realizzato dal Prof.
Mirko Viroli, che ringrazio.</p>
</li>
<li>
<p>Ogni errore riscontratovi è esclusiva responsabilità degli autori di questo documento.</p>
</li>
</ul>
</section><section>
<h2 id="outline">Outline</h2>
<h3 id="goal-della-lezione">Goal della lezione</h3>
<ul>
<li>Illustrare i vari meccanismi di gestione delle eccezioni in Java</li>
<li>Dare linee guida per la progrettazione di sistemi che usano eccezioni</li>
</ul>
<h3 id="argomenti">Argomenti</h3>
<ul>
<li>Errori a run-time e necessità di una loro gestione</li>
<li>Tipi di eccezioni/errori in Java</li>
<li>Istruzione <code>throw</code></li>
<li>Costrutto <code>try-catch-finally</code></li>
<li>Dichiarazioni <code>throws</code></li>
</ul>
</section><section>
<h1 id="errori">Errori</h1>
</section><section>
<h2 id="errori-nei-programmi">Errori nei programmi</h2>
<h3 id="errori-a-tempo-di-compilazione-compile-time">Errori a tempo di compilazione (compile-time)</h3>
<pre><code>*  sono quelli più grossolani, sono intercettati dal compilatore
*  quindi rientrano nella fase dell'implementazione, sono innocui
*  un linguaggio con strong typing consente di identificarne molti a compile-time
</code></pre>
<h3 id="errori-a-tempo-di-esecuzione-run-time-leftarrow-oggetto-della-lezione">Errori a tempo di esecuzione (run-time) ($\Leftarrow$ oggetto della lezione)</h3>
<pre><code>*  sono condizioni anomale dovute alla dinamica del sistema{

  *  parametri anomali a funzioni, errori nell'uso delle risorse di sistema,..
</code></pre>
<p>}
*  in genere è possibile (i) identificare/descrivere dove potrebbero accadere, (ii) intercettarli e (iii) gestirli prevedendo procedure di compensazione (rimedio al problema che le ha causate)
*  alcuni linguaggi (come Java, non il C) forniscono costrutti per agevolarne la gestione</p>
</section><section>
<h2 id="errori-per-causa-interna-lanciati-dalla-jvm">Errori per causa interna: lanciati dalla JVM</h2>
<p>\titledcode{Errore numerico}{code/Div.java}
\titledcode{Overflow memoria}{code/Rec.java}
\titledcode{Riferimento null}{code/Null.java}</p>
</section><section>
<h2 id="violazioni-di-contratto-duso-di-un-oggetto-librerie-java">Violazioni di contratto d’uso di un oggetto: librerie Java</h2>
<p>\titledcode{Operazione non supportata}{code/Op.java}
\titledcode{Elemento non disponibile}{code/NoElement.java}
\titledcode{Formato illegale}{code/Format.java}</p>
</section><section>
<h2 id="violazioni-di-contratto-duso-di-un-oggetto-nostro-codice">Violazioni di contratto d’uso di un oggetto: nostro codice</h2>
<p>\titledcode{Argomento errato}{code/Arg.java}
\titledcode{Elemento non disponibile}{code/It.java}</p>
</section><section>
<h2 id="limportanza-della-error-aware-programming">L’importanza della “error-aware programming”</h2>
<h3 id="contratti">Contratti</h3>
<pre><code>*  Molti oggetti richiedono determinate condizioni di lavoro (sequenze di chiamata, argomenti passati, aspettative d'uso di risorse computazionali)
*  Al di fuori queste condizioni è necessario interrompere il lavoro e effettuare azioni correttive
</code></pre>
<h3 id="il-progettista-della-classe-deve">Il progettista della classe deve:</h3>
<pre><code>*  identificare le condizioni di lavoro definite "normali"
*  intercettare quando si esce da tali condizioni
*  eventualmente segnalare l'avvenuto errore
</code></pre>
<h3 id="il-cliente-a-sua-volta-progettista-di-un-altro-oggetto-deve">Il cliente (a sua volta progettista di un altro oggetto) deve:</h3>
<pre><code>*  essere informato di come l'oggetto va usato
*  intercettare gli errori e porvi rimedio con un \it{handler}
</code></pre>
</section><section>
<h2 id="eccezioni-in-java">Eccezioni in Java</h2>
<h3 id="riassunto-java-exceptions">Riassunto Java Exceptions</h3>
<pre><code>*  Gli errori a run-time in Java sono rappresentati da oggetti della classe `java.lang.Throwable`. Vengono "lanciati":{

  *  da esplicite istruzioni del tipo: `throw &lt;exception-object&gt;;`
  *  o, direttamente dalla JVM per cause legate al "sistema operativo"
</code></pre>
<p>}
*  Tali oggetti portano informazioni utili a capire la causa dell’errore
*  Si può dichiarare se un metodo potrà lanciare una eccezione: <code>{..\}</code>
*  Si può intercettare una eccezione e porvi rimedio: <code>{...\}</code></p>
<p>{\large Tutti meccanismi che impareremo a progettare e implementare in questa lezione!}</p>
</section><section>
<h2 id="tipologie-di-errori-in-java">Tipologie di errori in Java</h2>
<h3 id="errori-javalangerror-e-sottoclassi">Errori: <code>java.lang.Error</code> e sottoclassi</h3>
<pre><code>*  Dovute a un problema "serio" (e non risolvibile) interno alla JVM
*  Di norma una applicazione non si deve preoccupare di intercettarli (non ci sarebbe molto di più da fare che interrompere l'esecuzione)
</code></pre>
<h3 id="eccezioni-unchecked-javalangruntimeexception-e-sottoclassi">Eccezioni unchecked: <code>java.lang.RuntimeException</code> e sottoclassi</h3>
<pre><code>*  Causate da un bug nella programmazione
*  Di norma una applicazione non si deve preoccupare di intercettarli (dovrebbero essere risolti tutti in fase di debugging del sistema)
</code></pre>
<h3 id="eccezioni-checked-i-javalangthrowable-tranne-le-precedenti">Eccezioni checked: i <code>java.lang.Throwable</code> tranne le precedenti</h3>
<pre><code>*  Causate da un problema prevedibile ma non rimediabile a priori
*  Le applicazione devono dichiarli esplicitamente, e vanno intercettati e gestiti esplicitamente
</code></pre>
</section><section>
<h2 id="tipologie-di-errori-in-java-uml">Tipologie di errori in Java: UML</h2>
<p><img src="img/uml-throw.pdf" alt=""></p>
</section><section>
<h2 id="usuale-gestione">Usuale gestione</h2>
<h3 id="errori-1">Errori</h3>
<pre><code>*  Nessuna gestione necessaria ("se capitano, capitano...")
</code></pre>
<h3 id="eccezioni-unchecked">Eccezioni unchecked</h3>
<pre><code>*  Si potrebbero dichiarare con un commento al codice
*  Di norma si riusano le classi `java.lang.RuntimeException` del JDK, ossia non se ne definiscono di nuove tipologie
*  Si lanciano con l'istruzione `throw`
</code></pre>
<h3 id="eccezioni-checked">Eccezioni checked</h3>
<pre><code>*  Vanno dichiarate nel metodo con la clausola `throws`
*  La documentazione deve spiegare in quali casi vengono lanciate
*  Vanno intercettate con l'istruzione `try-catch`
*  Di norma si costruiscono sotto-classi ad-hoc di `Exception`
</code></pre>
</section><section>
<h2 id="errori-ed-eccezioni-unchecked-cosa-accade">Errori ed eccezioni unchecked: cosa accade</h2>
<h3 id="quando-accadono-ossia-quando-vengono-lanciate">Quando accadono, ossia quando vengono lanciate..</h3>
<pre><code>*  Causano l'interruzione dell'applicazione
*  Comportano la scrittura su console di errore (`System.err`) di un messaggio che include lo *__StackTrace__* -- `Thread.dumpStack();`{

  *  nota, solitamente `System.err` coincide con `System.out`
</code></pre>
<p>}
*  Dal quale possiamo desumere la sequenza di chiamate e il punto del codice in cui si ha avuto il problema</p>
<h3 id="errorieccezioni-unchecked-comuni-e-già-viste">Errori/eccezioni unchecked comuni e già viste</h3>
<pre><code>*  `StackOverFlowError`: stack esaurito (ricorsione infinita?)
*  `NullPointerException`, `ArrayStoreException`, `ClassCastException`, `ArrayIndexOutOfBoundsException`, `NumericException`, `OperationNotSupportedException`
*  Altri andranno verificati sulla documentazione quando incontrati
</code></pre>
</section><section>
<h2 id="esempio-di-stampa">Esempio di stampa</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UncheckedStackTrace</span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#a90d91">int</span><span style="color:#000">[]{</span><span style="color:#000">10</span><span style="color:#000">,</span><span style="color:#000">20</span><span style="color:#000">,</span><span style="color:#000">30</span><span style="color:#000">};</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">b</span> <span style="color:#000">=</span> <span style="color:#000">accessArray</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span><span style="color:#000">1</span><span style="color:#000">);</span> <span style="color:#177500">// OK
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">c</span> <span style="color:#000">=</span> <span style="color:#000">accessArray</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span><span style="color:#000">3</span><span style="color:#000">);</span> <span style="color:#177500">// Eccezione
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">d</span> <span style="color:#000">=</span> <span style="color:#000">accessArray</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span><span style="color:#000">5</span><span style="color:#000">);</span> <span style="color:#177500">// Eccezione
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">accessArray</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">array</span><span style="color:#000">,</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">pos</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#000">array</span><span style="color:#000">[</span><span style="color:#000">pos</span><span style="color:#000">];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Stampa dell'errore:
</span></span></span><span style="display:flex;"><span><span style="color:#177500">
</span></span></span><span style="display:flex;"><span><span style="color:#177500">Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 3
</span></span></span><span style="display:flex;"><span><span style="color:#177500">        at UncheckedStackTrace.accessArray(UncheckedStackTrace.java:9)
</span></span></span><span style="display:flex;"><span><span style="color:#177500">        at UncheckedStackTrace.main(UncheckedStackTrace.java:5)
</span></span></span><span style="display:flex;"><span><span style="color:#177500">*/</span>
</span></span></code></pre></div></section><section>
<h2 id="listruzione-throw">L’istruzione <code>throw</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UncheckedThrow</span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#a90d91">int</span><span style="color:#000">[]{</span><span style="color:#000">10</span><span style="color:#000">,</span><span style="color:#000">20</span><span style="color:#000">,</span><span style="color:#000">30</span><span style="color:#000">};</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">b</span> <span style="color:#000">=</span> <span style="color:#000">accessArray</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span><span style="color:#000">1</span><span style="color:#000">);</span> <span style="color:#177500">// OK
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">c</span> <span style="color:#000">=</span> <span style="color:#000">accessArray</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span><span style="color:#000">3</span><span style="color:#000">);</span> <span style="color:#177500">// Eccezione
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">accessArray</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">array</span><span style="color:#000">,</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">pos</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">pos</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span> <span style="color:#000">||</span> <span style="color:#000">pos</span> <span style="color:#000">&gt;=</span> <span style="color:#000">array</span><span style="color:#000">.</span><span style="color:#836c28">length</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">msg</span> <span style="color:#000">=</span> <span style="color:#c41a16">"Accesso fuori dai limiti, in posizione "</span><span style="color:#000">+</span><span style="color:#000">pos</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">lang</span><span style="color:#000">.</span><span style="color:#836c28">IllegalArgumentException</span><span style="color:#000">(</span><span style="color:#000">msg</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#000">array</span><span style="color:#000">[</span><span style="color:#000">pos</span><span style="color:#000">];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Stampa dell'errore:
</span></span></span><span style="display:flex;"><span><span style="color:#177500">
</span></span></span><span style="display:flex;"><span><span style="color:#177500">Exception in thread "main" java.lang.IllegalArgumentException: Accesso fuori dai limiti, in posizione 3
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	at it.unibo.apice.oop.p13exceptions.classes.UncheckedThrow.accessArray(UncheckedThrow.java:13)
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	at it.unibo.apice.oop.p13exceptions.classes.UncheckedThrow.main(UncheckedThrow.java:7)
</span></span></span><span style="display:flex;"><span><span style="color:#177500">*/</span>
</span></span></code></pre></div></section><section>
<h2 id="listruzione-throw-una-variante-equivalente">L’istruzione <code>throw</code>: una variante equivalente</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UncheckedThrow2</span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#a90d91">int</span><span style="color:#000">[]{</span><span style="color:#000">10</span><span style="color:#000">,</span><span style="color:#000">20</span><span style="color:#000">,</span><span style="color:#000">30</span><span style="color:#000">};</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">b</span> <span style="color:#000">=</span> <span style="color:#000">accessArray</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span><span style="color:#000">1</span><span style="color:#000">);</span> <span style="color:#177500">// OK
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">c</span> <span style="color:#000">=</span> <span style="color:#000">accessArray</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span><span style="color:#000">3</span><span style="color:#000">);</span> <span style="color:#177500">// Eccezione
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">accessArray</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">array</span><span style="color:#000">,</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">pos</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">pos</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span> <span style="color:#000">||</span> <span style="color:#000">pos</span> <span style="color:#000">&gt;=</span> <span style="color:#000">array</span><span style="color:#000">.</span><span style="color:#836c28">length</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">msg</span> <span style="color:#000">=</span> <span style="color:#c41a16">"Accesso fuori dai limiti, in posizione "</span><span style="color:#000">+</span><span style="color:#000">pos</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#000">RuntimeException</span> <span style="color:#000">e</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">lang</span><span style="color:#000">.</span><span style="color:#836c28">IllegalArgumentException</span><span style="color:#000">(</span><span style="color:#000">msg</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">throw</span> <span style="color:#000">e</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#000">array</span><span style="color:#000">[</span><span style="color:#000">pos</span><span style="color:#000">];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="listruzione-throw-1">L’istruzione <code>throw</code></h2>
<h3 id="sintassi-generale">Sintassi generale</h3>
<pre><code>`throw &lt;expression-that-evaluates-to-a-throwable&gt;;`
</code></pre>
<h3 id="casi-tipici">Casi tipici</h3>
<pre><code>`throw new &lt;exception-class&gt;(&lt;message-string&gt;);`&lt;br&gt;
`throw new &lt;exception-class&gt;(&lt;ad-hoc-args&gt;);`&lt;br&gt;
`throw new &lt;exception-class&gt;();`&lt;br&gt;
</code></pre>
<h3 id="effetto">Effetto</h3>
<pre><code>*  Si interrompe immediatamente l'esecuzione del metodo in cui ci si trova (se non dentro una `try-catch`, come vedremo dopo..)
*  L'oggetto eccezione creato viene "riportato" al chiamante
*  Ricorsivamente, si giunge al `main`, con la stampa su `System.err` (exception chaining)
</code></pre>
</section><section>
<p>\section[Es. <code>RangeIterator</code>]{Impl.corretta di <code>RangeIterator</code>}</p>
<h2 id="riconsideriamo-limplementazione-di-rangeiterator">Riconsideriamo l’implementazione di <code>RangeIterator</code></h2>
<h3 id="elementi-da-considerare">Elementi da considerare</h3>
<pre><code>*  Controllare l'interfaccia `java.util.Iterator`
*  Verificare la documentazione presente nel sorgente (ed in particolare, come si specificano le eccezioni lanciate)
*  Il comando: `javadoc Iterator.java`
*  La documentazione HTML prodotta
*  Realizzazione e prova di `RangeIterator`
</code></pre>
</section><section>
<h2 id="documentazione-di-iterator-header">Documentazione di <code>Iterator</code>: header</h2>
<p>\sizedcode{\ssmall}{code/util/Iterator1.java}</p>
</section><section>
<h2 id="documentazione-di-iterator-next-e-hasnext">Documentazione di <code>Iterator</code>: <code>next()</code> e <code>hasNext()</code></h2>
<p>\sizedcode{\ssmall}{code/util/Iterator2.java}</p>
</section><section>
<h2 id="documentazione-di-iterator-remove">Documentazione di <code>Iterator</code>: <code>remove()</code></h2>
<p>\sizedcode{\ssmall}{code/util/Iterator3.java}</p>
</section><section>
<h2 id="documentazione-generata-pt1">Documentazione generata: pt1</h2>
<p><img src="img/javadoc1.png" alt=""></p>
</section><section>
<h2 id="documentazione-generata-pt2">Documentazione generata: pt2</h2>
<p><img src="img/javadoc2.png" alt=""></p>
</section><section>
<h2 id="realizzazione-di-rangeiterator">Realizzazione di <code>RangeIterator</code></h2>
<pre><code>\vspace{-5pt}
</code></pre>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">RangeIterator</span> <span style="color:#a90d91">implements</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">util</span><span style="color:#000">.</span><span style="color:#836c28">Iterator</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">MSG</span> <span style="color:#000">=</span> <span style="color:#c41a16">"start can't be bigger than stop"</span><span style="color:#000">;</span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">int</span> <span style="color:#000">current</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">final</span> <span style="color:#a90d91">private</span> <span style="color:#a90d91">int</span> <span style="color:#000">stop</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">RangeIterator</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">start</span><span style="color:#000">,</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">stop</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">start</span> <span style="color:#000">&gt;</span> <span style="color:#000">stop</span><span style="color:#000">){</span>	<span style="color:#177500">// parametri errati
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    	    <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">lang</span><span style="color:#000">.</span><span style="color:#836c28">IllegalArgumentException</span><span style="color:#000">(</span><span style="color:#000">MSG</span><span style="color:#000">);</span> 
</span></span><span style="display:flex;"><span>    	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">current</span> <span style="color:#000">=</span> <span style="color:#000">start</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">stop</span> <span style="color:#000">=</span> <span style="color:#000">stop</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">Integer</span> <span style="color:#000">next</span><span style="color:#000">(){</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">if</span> <span style="color:#000">(!</span><span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">hasNext</span><span style="color:#000">()){</span>
</span></span><span style="display:flex;"><span>    	    <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">util</span><span style="color:#000">.</span><span style="color:#836c28">NoSuchElementException</span><span style="color:#000">();</span> 
</span></span><span style="display:flex;"><span>    	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">current</span><span style="color:#000">++;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">hasNext</span><span style="color:#000">(){</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">current</span> <span style="color:#000">&lt;=</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">stop</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">remove</span><span style="color:#000">(){</span>	<span style="color:#177500">// non supportiamo remove
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    	<span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">UnsupportedOperationException</span><span style="color:#000">();</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h1 id="catturare-eccezioni">Catturare eccezioni</h1>
</section><section>
<h2 id="il-costrutto-try-catch">Il costrutto <code>try-catch</code></h2>
<h3 id="sintassi-da-estendere-successivamente">Sintassi (da estendere successivamente)</h3>
<pre><code>`{ &lt;body-maybe-throwing-an-exception&gt;\}` &lt;br&gt;
~~~~`{ &lt;handler-body&gt;\}`&lt;br&gt;
</code></pre>
<h3 id="esempio">Esempio</h3>
<pre><code>`{ RangeIterator r = new RangeIterator(a,b);\}` &lt;br&gt;
~~~~`{ System.out.println(e);\}`&lt;br&gt;
</code></pre>
<h3 id="significato">Significato</h3>
<pre><code>*  Se il body nella `try` lancia una eccezione del tipo specificato nella `catch`
*  Allora si esegue il corrispondente handler, e non si ha la terminazione della applicazione
*  Se non c'è eccezione si salta l'handler e si prosegue
</code></pre>
</section><section>
<h2 id="uso-della-rangeiterator-senza-try-catch">Uso della <code>RangeIterator</code> senza <code>try-catch</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseRange</span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#177500">// args tiene inizio e fine, passate da line di comando
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">parseInt</span><span style="color:#000">(</span><span style="color:#000">args</span><span style="color:#000">[</span><span style="color:#000">0</span><span style="color:#000">]);</span> <span style="color:#177500">// "5"
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    	<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">b</span> <span style="color:#000">=</span> <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">parseInt</span><span style="color:#000">(</span><span style="color:#000">args</span><span style="color:#000">[</span><span style="color:#000">1</span><span style="color:#000">]);</span> <span style="color:#177500">// "10"
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    	<span style="color:#a90d91">final</span> <span style="color:#000">RangeIterator</span> <span style="color:#000">r</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">RangeIterator</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span><span style="color:#000">b</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#177500">// remove(); // cosa succede con remove?
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    	<span style="color:#a90d91">try</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">print</span><span style="color:#000">(</span><span style="color:#000">r</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">()+</span><span style="color:#c41a16">" "</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">print</span><span style="color:#000">(</span><span style="color:#000">r</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">()+</span><span style="color:#c41a16">" "</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">r</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">util</span><span style="color:#000">.</span><span style="color:#836c28">NoSuchElementException</span> <span style="color:#000">e</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"eccezione.. ma il programma continua "</span><span style="color:#000">+</span><span style="color:#000">e</span><span style="color:#000">.</span><span style="color:#836c28">toString</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"fine programma"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Esecuzione: java UseRange 5 10
</span></span></span><span style="display:flex;"><span><span style="color:#177500">   args vale: new String[]{"5","10"}
</span></span></span><span style="display:flex;"><span><span style="color:#177500">   risultato:  5 6 7 */</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Esecuzione: java UseRange 5 10.1
</span></span></span><span style="display:flex;"><span><span style="color:#177500">   risultato:  NumberFormatException */</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Esecuzione: java UseRange 5 3
</span></span></span><span style="display:flex;"><span><span style="color:#177500">   risultato:  IllegalArgumentException */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">/*</span> <span style="color:#000">Esecuzione</span><span style="color:#000">:</span> <span style="color:#000">java</span> <span style="color:#000">UseRange</span> <span style="color:#000">3</span> <span style="color:#000">4</span>
</span></span></code></pre></div></section><section>
<h2 id="uso-della-rangeiterator-con-try-catch">Uso della <code>RangeIterator</code> con <code>try-catch</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseRange2</span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">RangeIterator</span> <span style="color:#000">r</span> <span style="color:#000">=</span> <span style="color:#a90d91">null</span><span style="color:#000">;</span> <span style="color:#177500">// va creata fuori dal try..
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    	<span style="color:#a90d91">try</span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">parseInt</span><span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">[</span><span style="color:#000">0</span><span style="color:#000">]);</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">b</span> <span style="color:#000">=</span> <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">parseInt</span><span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">[</span><span style="color:#000">1</span><span style="color:#000">]);</span>
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">r</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">RangeIterator</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span><span style="color:#000">b</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">Exception</span> <span style="color:#000">e</span><span style="color:#000">){</span> <span style="color:#177500">// catturo una qualsiasi Exception
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    	    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Argomenti errati!"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">e</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">exit</span><span style="color:#000">(</span><span style="color:#000">1</span><span style="color:#000">);</span> <span style="color:#177500">// abnormal termination
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">try</span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">print</span><span style="color:#000">(</span><span style="color:#000">r</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">()+</span><span style="color:#c41a16">" "</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">print</span><span style="color:#000">(</span><span style="color:#000">r</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">()+</span><span style="color:#c41a16">" "</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">r</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">util</span><span style="color:#000">.</span><span style="color:#836c28">NoSuchElementException</span> <span style="color:#000">e</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Iterazione non corretta.."</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">e</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    	    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">exit</span><span style="color:#000">(</span><span style="color:#000">1</span><span style="color:#000">);</span> <span style="color:#177500">// abnormal termination
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">exit</span><span style="color:#000">(</span><span style="color:#000">0</span><span style="color:#000">);</span> <span style="color:#177500">// ok termination
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="il-costrutto-try-catch-finally">Il costrutto <code>try-catch-finally</code></h2>
<h3 id="sintassi-generale-1">Sintassi generale</h3>
<pre><code>`{ &lt;body-maybe-throwing-an-exception&gt;\}` &lt;br&gt;
~~~~`{ &lt;handler-body&gt;\}`&lt;br&gt;
~~~~`{ &lt;handler-body&gt;\}`&lt;br&gt;
~~~~...&lt;br&gt;
~~~~`{ &lt;handler-body&gt;\}`&lt;br&gt;
~~~~` // clausola finale opzionale`&lt;br&gt;
</code></pre>
<h3 id="significato-1">Significato</h3>
<pre><code>*  Se il body nella `try` lancia una eccezione
*  La prima `catch` pertinente esegue l'handler (non ci possono essere sovrapposizioni!)
*  Poi si eseguirà anche il `completion-body`
*  Il body nella `finally` sarà comunque eseguito!
</code></pre>
</section><section>
<h2 id="catch-multipli-e-finally"><code>catch</code> multipli e <code>finally</code></h2>
<p>\sizedcode{\scriptsize}{code/classes/UseRange3.java}</p>
</section><section>
<h2 id="spiegazione">Spiegazione</h2>
<h3 id="come-funziona-la-finally">Come funziona la <code>finally</code>?</h3>
<pre><code>*  garantisce che il codice nel suo handler sarà sicuramente eseguito
*  ..sia se ho avuto eccezione
*  ..sia se non ho avuto eccezione
*  ..sia se uno degli handler delle catch ha generato eccezione
</code></pre>
<h3 id="a-cosa-serve">A cosa serve?</h3>
<pre><code>*  in genere contiene del codice di cleanup che deve comunque essere eseguito
*  rilascio risorse, chiusura file, stampa messaggi, etc..
</code></pre>
<h3 id="vedremo-la-prossima-settimana-il-costrutto-chiamato-try-with-resources">Vedremo la prossima settimana il costrutto chiamato <code>try</code>-with-resources</h3>
<pre><code>*  consente di non esprimere il `finally`
</code></pre>
</section><section>
<p>\section[Creare eccezioni]{Creazione e rilancio eccezioni}</p>
<h2 id="creazione-di-una-nuova-classe-di-eccezioni">Creazione di una nuova classe di eccezioni</h2>
<h3 id="nuove-eccezioni">Nuove eccezioni</h3>
<pre><code>*  Un sistema potrebbe richiedere nuovi tipi di eccezioni, che rappresentano eventi specifici collegati al dominio applicativo{

  *  Persona già presente (in un archivio cittadini)
  *  Lampadina esaurita (in una applicazione domotica)
</code></pre>
<p>}
*  Semplicemente si fa una estensione di <code>Exception</code> o <code>RuntimeException</code>{</p>
<pre><code>  *  a seconda che la si voglia checked o unchecked
  *  per il momento stiamo considerando solo le unchecked
</code></pre>
<p>}
*  Non vi sono particolari metodi da ridefinire di solito
*  Solo ricordarsi di chiamare correttamente il costruttore del padre
*  Se si vuole incorporare una descrizione articolata della causa dell’eccezione, la si può inserire nei campi dell’oggetto tramite il costruttore o metodi setter..</p>
</section><section>
<h2 id="esempio-myexception">Esempio: <code>MyException</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">MyException</span> <span style="color:#a90d91">extends</span> <span style="color:#000">RuntimeException</span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// tengo traccia degli argomenti che hanno causato il problema
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">MyException</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">s</span><span style="color:#000">,</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">super</span><span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">args</span> <span style="color:#000">=</span> <span style="color:#000">args</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// modifico la toString per evidenziare this.args
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">toString</span><span style="color:#000">(){</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">String</span> <span style="color:#000">str</span> <span style="color:#000">=</span> <span style="color:#c41a16">"Stato argomenti: "</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">str</span> <span style="color:#000">=</span> <span style="color:#000">str</span> <span style="color:#000">+</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">util</span><span style="color:#000">.</span><span style="color:#836c28">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">toString</span><span style="color:#000">(</span><span style="color:#000">args</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">str</span> <span style="color:#000">=</span> <span style="color:#000">str</span> <span style="color:#000">+</span> <span style="color:#c41a16">"\n"</span> <span style="color:#000">+</span> <span style="color:#a90d91">super</span><span style="color:#000">.</span><span style="color:#836c28">toString</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#000">str</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="esempio-usemyexception">Esempio: <code>UseMyException</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseMyException</span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">try</span><span style="color:#000">{</span> <span style="color:#177500">// attenzione alla formattazione di questo esempio!
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    		<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">parseInt</span><span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">[</span><span style="color:#000">0</span><span style="color:#000">]);</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">b</span> <span style="color:#000">=</span> <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">parseInt</span><span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">[</span><span style="color:#000">1</span><span style="color:#000">]);</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">final</span> <span style="color:#000">RangeIterator</span> <span style="color:#000">r</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">RangeIterator</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span><span style="color:#000">b</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">print</span><span style="color:#000">(</span><span style="color:#000">r</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">()+</span><span style="color:#c41a16">" "</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">print</span><span style="color:#000">(</span><span style="color:#000">r</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">()+</span><span style="color:#c41a16">" "</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">r</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">Exception</span> <span style="color:#000">e</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">str</span> <span style="color:#000">=</span> <span style="color:#c41a16">"Rilancio di: "</span><span style="color:#000">+</span><span style="color:#000">e</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#000">RuntimeException</span> <span style="color:#000">e2</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">MyException</span><span style="color:#000">(</span><span style="color:#000">str</span><span style="color:#000">,</span><span style="color:#000">s</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#a90d91">throw</span> <span style="color:#000">e2</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Esempio: java UseMyException 10 13.1
</span></span></span><span style="display:flex;"><span><span style="color:#177500">Exception in thread "main" Stato argomenti: [10, 13.1]
</span></span></span><span style="display:flex;"><span><span style="color:#177500">it.unibo.apice.oop.p13exceptions.classes.MyException: Rilancio di: java.lang.NumberFormatException: For input string: "13.1"
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	at it.unibo.apice.oop.p13exceptions.classes.UseMyException.main(UseMyException.java:14)
</span></span></span><span style="display:flex;"><span><span style="color:#177500">*/</span>
</span></span></code></pre></div></section><section>
<p>\section[Definire eccezioni]{Dichiarazione eccezioni checked}</p>
<h2 id="checked-vs-unchecked">Checked vs Unchecked</h2>
<h3 id="unchecked-runtimeexception-o-sottoclassi">Unchecked: <code>RuntimeException</code> o sottoclassi</h3>
<pre><code>*  Quelle viste finora, dovute ad un bug di programmazione
*  Quindi sono da catturare opzionalmente, perché rimediabili
* $\Rightarrow$ ..le linee guida più moderne le sconsigliano
</code></pre>
<h3 id="checked-exception-o-sottoclassi-ma-non-di-runtimeexception">Checked: <code>Exception</code> o sottoclassi ma non di <code>RuntimeException</code></h3>
<pre><code>*  Rappresentano errori non riconducibili ad una scorretta programmazione, ma ad eventi abbastanza comuni anche nel sistema una volta installato e funzionante
{

  *  Funzionamento non normale, ma non tale da interrompere l'applicazione (p.e., l'utente fornisce un input errato inavvertitamente)
  *  Un problema con l'interazione col S.O. (p.e., file inesistente)
</code></pre>
<p>}
*  I metodi che le lanciano lo <em><strong>devono</strong></em> dichiararle esplicitamente (<code>throws</code>)
*  Chi chiama tali metodi <em><strong>deve</strong></em> obbligatoriamente gestirle{</p>
<pre><code>  *  o catturandole con un `try-catch`
  *  o rilanciandole al chiamante con la `throws` 
</code></pre>
<p>}</p>
</section><section>
<h2 id="una-eccezione-checked-ioexception-e-input-da-tastiera">Una eccezione checked: <code>IOException</code> e input da tastiera</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.io.*</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">IOFromKeyboard</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">// La dichiarazione throws qui è obbligatoria!
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">getIntFromKbd</span><span style="color:#000">()</span> <span style="color:#a90d91">throws</span> <span style="color:#000">IOException</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">InputStreamReader</span> <span style="color:#000">ISR</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">InputStreamReader</span><span style="color:#000">(</span><span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">in</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">BufferedReader</span> <span style="color:#000">keyboardInput</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">BufferedReader</span><span style="color:#000">(</span><span style="color:#000">ISR</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">String</span> <span style="color:#000">line</span> <span style="color:#000">=</span> <span style="color:#a90d91">null</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">line</span> <span style="color:#000">=</span> <span style="color:#000">keyboardInput</span><span style="color:#000">.</span><span style="color:#836c28">readLine</span><span style="color:#000">();</span> <span style="color:#177500">// IOException
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">return</span> <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">parseInt</span><span style="color:#000">(</span><span style="color:#000">line</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">)</span> <span style="color:#a90d91">throws</span> <span style="color:#000">Exception</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">print</span><span style="color:#000">(</span><span style="color:#c41a16">"Inserisci un numero: "</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">int</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">getIntFromKbd</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Hai inserito il num.: "</span> <span style="color:#000">+</span> <span style="color:#000">a</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="qualche-variante-campi-statici">Qualche variante: campi statici</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.io.*</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">IOFromKeyboard2</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">BufferedReader</span> <span style="color:#000">KBD</span> <span style="color:#000">=</span> 
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">new</span> <span style="color:#000">BufferedReader</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">InputStreamReader</span><span style="color:#000">(</span><span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">in</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">getIntFromKbd</span><span style="color:#000">()</span> <span style="color:#a90d91">throws</span> <span style="color:#000">IOException</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">parseInt</span><span style="color:#000">(</span><span style="color:#000">KBD</span><span style="color:#000">.</span><span style="color:#836c28">readLine</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">try</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">print</span><span style="color:#000">(</span><span style="color:#c41a16">"Inserisci un numero: "</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">getIntFromKbd</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Hai inserito il num.: "</span> <span style="color:#000">+</span> <span style="color:#000">a</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">IOException</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Errore di I/O: "</span> <span style="color:#000">+</span> <span style="color:#000">e</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">NumberFormatException</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">e</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="qualche-variante-input-iterato-e-rilancio">Qualche variante: input iterato e rilancio</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.io.*</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">IOFromKeyboard3</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">BufferedReader</span> <span style="color:#000">KBD</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">BufferedReader</span><span style="color:#000">(</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">new</span> <span style="color:#000">InputStreamReader</span><span style="color:#000">(</span><span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">in</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">getIntFromKbd</span><span style="color:#000">()</span> <span style="color:#a90d91">throws</span> <span style="color:#000">IOException</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">parseInt</span><span style="color:#000">(</span><span style="color:#000">KBD</span><span style="color:#000">.</span><span style="color:#836c28">readLine</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">)</span> <span style="color:#a90d91">throws</span> <span style="color:#000">NumberFormatException</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">while</span> <span style="color:#000">(</span><span style="color:#a90d91">true</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">try</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>				<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">print</span><span style="color:#000">(</span><span style="color:#c41a16">"Inserisci un numero: "</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">getIntFromKbd</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>				<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Hai inserito il num.: "</span> <span style="color:#000">+</span> <span style="color:#000">a</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">IOException</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>				<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Errore di I/O: "</span> <span style="color:#000">+</span> <span style="color:#000">e</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="input-da-tastiera-da-java-6-non-funziona-in-eclipse">Input da tastiera: da Java 6 (non funziona in Eclipse!)</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">IOFromKeyboard4</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">// L'uso di System.console().readLine() non lancia eccezioni
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">while</span> <span style="color:#000">(</span><span style="color:#a90d91">true</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">print</span><span style="color:#000">(</span><span style="color:#c41a16">"Inserisci un numero: "</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">parseInt</span><span style="color:#000">(</span><span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">console</span><span style="color:#000">().</span><span style="color:#836c28">readLine</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Hai inserito il num.: "</span> <span style="color:#000">+</span> <span style="color:#000">a</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/*
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> * Si controlli la classe java.lang.Console, fornisce varie funzioni utili per
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> * l'I/O, come le stampe formattate tipo printf
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> */</span>
</span></span></code></pre></div></section><section>
<p>\section[Esempio]{Applicazione domotica con eccezioni}</p>
<h2 id="requirements">Requirements</h2>
<pre><code>*  Una fila di $n$ `Device` con tempo di vita limitato
*  Il sistema dovrà supportare in futuro diverse politiche di fine-vita dei device
*  Il fine-vita viene rilevato al tentativo di accensione, ed è segnalato da una eccezione checked
*  Esistono comandi per accendere e spegnere tutti i device
*  Il sistema dovrà essere a prova di qualunque eccezione
</code></pre>
</section><section>
<h2 id="uml-modellazione-device">UML: Modellazione <code>Device</code></h2>
<p><img src="img/uml-device.pdf" alt=""></p>
</section><section>
<h2 id="interfaccia-device">Interfaccia <code>Device</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">Switches</span> <span style="color:#000">On</span> <span style="color:#000">the</span> <span style="color:#000">Device</span><span style="color:#000">.</span> <span style="color:#000">It</span> <span style="color:#000">does</span> <span style="color:#000">nothing</span> <span style="color:#a90d91">if</span> <span style="color:#000">it</span> <span style="color:#000">is</span> <span style="color:#000">already</span> <span style="color:#000">switched</span> <span style="color:#000">on</span><span style="color:#000">.</span> 
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">If</span> <span style="color:#000">already</span> <span style="color:#000">over</span> <span style="color:#000">or</span> <span style="color:#000">becoming</span> <span style="color:#000">over</span> <span style="color:#000">it</span> <span style="color:#000">goes</span> <span style="color:#000">over</span> <span style="color:#000">and</span> <span style="color:#000">off</span><span style="color:#000">.</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*</span> 
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">@throws</span> <span style="color:#000">DeviceIsOverException</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*</span>             <span style="color:#a90d91">if</span> <span style="color:#000">it</span> <span style="color:#000">ends</span> <span style="color:#000">up</span> <span style="color:#000">off</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*/</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">void</span> <span style="color:#000">on</span><span style="color:#000">()</span> <span style="color:#a90d91">throws</span> <span style="color:#000">DeviceIsOverException</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @return whether it is on
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">boolean</span> <span style="color:#000">isOn</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @return whether it is over
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">boolean</span> <span style="color:#000">isOver</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="eccezione-deviceisoverexception">Eccezione <code>DeviceIsOverException</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">Reported</span> <span style="color:#a90d91">for</span> <span style="color:#000">clarity</span><span style="color:#000">,</span> <span style="color:#000">not</span> <span style="color:#000">really</span> <span style="color:#000">needed</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*/</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">DeviceIsOverException</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Device</span> <span style="color:#000">device</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">device</span> <span style="color:#000">=</span> <span style="color:#000">device</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">Device</span> <span style="color:#000">getDevice</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">device</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="abstractdevice-pt1"><code>AbstractDevice</code>, pt1</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">abstract</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">AbstractDevice</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Device</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">on</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">over</span><span style="color:#000">;</span> <span style="color:#177500">// over implies not on
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * Setting the lamp as working and off
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">AbstractDevice</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">on</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">over</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">final</span> <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isOn</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">on</span><span style="color:#000">;</span> <span style="color:#177500">// getter
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">final</span> <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isOver</span><span style="color:#000">()</span> <span style="color:#000">{</span> <span style="color:#177500">// getter
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">over</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">final</span> <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">off</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">on</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span> <span style="color:#177500">// setter
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>	<span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="abstractdevice-pt2"><code>AbstractDevice</code>, pt2</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">It</span> <span style="color:#000">makes</span> <span style="color:#000">sure</span> <span style="color:#000">we</span> <span style="color:#000">call</span> <span style="color:#000">onFails</span><span style="color:#000">()</span> <span style="color:#000">properly</span><span style="color:#000">,</span> <span style="color:#000">and</span> <span style="color:#000">over</span> <span style="color:#000">and</span> <span style="color:#000">off</span> <span style="color:#000">are</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">consistently</span> <span style="color:#000">changed</span><span style="color:#000">.</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*</span> 
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">@see</span> <span style="color:#000">safedevices</span><span style="color:#000">.</span><span style="color:#836c28">Device</span><span style="color:#000">#</span><span style="color:#000">on</span><span style="color:#000">()</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*/</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">final</span> <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">on</span><span style="color:#000">()</span> <span style="color:#a90d91">throws</span> <span style="color:#000">DeviceIsOverException</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(!</span><span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">on</span><span style="color:#000">)</span> <span style="color:#000">{</span> <span style="color:#177500">// is this a real switch-on?
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>			<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">over</span> <span style="color:#000">=</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">onFails</span><span style="color:#000">();</span> <span style="color:#177500">// is it over?
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>			<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">on</span> <span style="color:#000">=</span> <span style="color:#000">!</span><span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">over</span><span style="color:#000">;</span> <span style="color:#177500">// correspondingly switch
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(!</span><span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">on</span><span style="color:#000">)</span> <span style="color:#000">{</span> <span style="color:#177500">// could I switch?
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>			<span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">DeviceIsOverException</span><span style="color:#000">(</span><span style="color:#a90d91">this</span><span style="color:#000">);</span> <span style="color:#177500">// raise exception
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * Implement the strategy to recognise whether it is over
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * 
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @return whether should become over
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">protected</span> <span style="color:#a90d91">abstract</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">onFails</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">toString</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">over</span> <span style="color:#000">?</span> <span style="color:#c41a16">"over"</span> <span style="color:#000">:</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">on</span> <span style="color:#000">?</span> <span style="color:#c41a16">"on "</span> <span style="color:#000">:</span> <span style="color:#c41a16">"off"</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="countdowndevice"><code>CountdownDevice</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">CountdownDevice</span> <span style="color:#a90d91">extends</span> <span style="color:#000">AbstractDevice</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">int</span> <span style="color:#000">countdown</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">CountdownDevice</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">countdown</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">super</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">countdown</span> <span style="color:#000">&lt;</span> <span style="color:#000">1</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IllegalArgumentException</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">countdown</span> <span style="color:#000">=</span> <span style="color:#000">countdown</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">protected</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">onFails</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">countdown</span> <span style="color:#000">==</span> <span style="color:#000">0</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">return</span> <span style="color:#a90d91">true</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">countdown</span><span style="color:#000">--;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">toString</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">super</span><span style="color:#000">.</span><span style="color:#836c28">toString</span><span style="color:#000">()</span> <span style="color:#000">+</span> <span style="color:#c41a16">"."</span> <span style="color:#000">+</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">countdown</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="devicerow-campi-e-costruttore"><code>DeviceRow</code>: Campi e costruttore</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">DeviceRow</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * Default countdown for devices 
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">COUNTDOWN</span> <span style="color:#000">=</span> <span style="color:#000">3</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * The row of devices as a java.util.List, deferring actual implementation 
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Device</span><span style="color:#000">&gt;</span> <span style="color:#000">list</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * This constructor creates and initializes a list of CountdownDevice
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * 
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @param size is the number of devices to use
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @throws an IllegalArgumentException if size &lt; 0
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 *             
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">DeviceRow</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">size</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">size</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IllegalArgumentException</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">list</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayList</span><span style="color:#000">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span><span style="color:#000">=</span><span style="color:#000">0</span><span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">&lt;</span><span style="color:#000">size</span><span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">++)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">list</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">CountdownDevice</span><span style="color:#000">(</span><span style="color:#000">COUNTDOWN</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="devicerow-selettori-e-alloff"><code>DeviceRow</code>: Selettori e <code>allOff()</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">@param</span> <span style="color:#000">index</span> <span style="color:#000">is</span> <span style="color:#000">the</span> <span style="color:#000">position</span> <span style="color:#000">of</span> <span style="color:#000">the</span> <span style="color:#000">device</span> <span style="color:#000">to</span> <span style="color:#000">get</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">@return</span> <span style="color:#000">the</span> <span style="color:#000">device</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*/</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">Device</span> <span style="color:#000">getDevice</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">list</span><span style="color:#000">.</span><span style="color:#836c28">get</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @return the number of devices
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">getSize</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">list</span><span style="color:#000">.</span><span style="color:#836c28">size</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * Switches all devices off
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">allOff</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Device</span> <span style="color:#000">d</span> <span style="color:#000">:</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">list</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">d</span><span style="color:#000">.</span><span style="color:#836c28">off</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">/**</span>
</span></span></code></pre></div></section><section>
<h2 id="devicerow-allon-e-tostring"><code>DeviceRow</code>: <code>allOn()</code> e <code>toString()</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">Switches</span> <span style="color:#000">all</span> <span style="color:#000">devices</span> <span style="color:#000">on</span><span style="color:#000">,</span> <span style="color:#000">no</span> <span style="color:#000">matter</span> <span style="color:#000">whether</span> <span style="color:#000">one</span> <span style="color:#000">fails</span><span style="color:#000">.</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*</span> 
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">@throws</span> <span style="color:#000">the</span> <span style="color:#000">last</span> <span style="color:#000">DeviceIsOverException</span> <span style="color:#000">raised</span><span style="color:#000">,</span> <span style="color:#a90d91">if</span> <span style="color:#000">any</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*/</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">allOn</span><span style="color:#000">()</span> <span style="color:#a90d91">throws</span> <span style="color:#000">DeviceIsOverException</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">DeviceIsOverException</span> <span style="color:#000">e</span> <span style="color:#000">=</span> <span style="color:#a90d91">null</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Device</span> <span style="color:#000">d</span> <span style="color:#000">:</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">list</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">try</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>				<span style="color:#000">d</span><span style="color:#000">.</span><span style="color:#836c28">on</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">DeviceIsOverException</span> <span style="color:#000">de</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>				<span style="color:#000">e</span> <span style="color:#000">=</span> <span style="color:#000">de</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">e</span> <span style="color:#000">!=</span> <span style="color:#a90d91">null</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">throw</span> <span style="color:#000">e</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">toString</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#c41a16">"DeviceRow "</span> <span style="color:#000">+</span> <span style="color:#000">list</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="usedevice"><code>UseDevice</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseDevice</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">DeviceRow</span> <span style="color:#000">dr</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">DeviceRow</span><span style="color:#000">(</span><span style="color:#000">3</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">dr</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// DeviceRow [off.3, off.3, off.3, off.3]
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">try</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">dr</span><span style="color:#000">.</span><span style="color:#836c28">allOn</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">dr</span><span style="color:#000">.</span><span style="color:#836c28">allOff</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">dr</span><span style="color:#000">.</span><span style="color:#836c28">allOn</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">dr</span><span style="color:#000">.</span><span style="color:#836c28">allOff</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">dr</span><span style="color:#000">.</span><span style="color:#836c28">getDevice</span><span style="color:#000">(</span><span style="color:#000">0</span><span style="color:#000">).</span><span style="color:#836c28">on</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">dr</span><span style="color:#000">.</span><span style="color:#836c28">getDevice</span><span style="color:#000">(</span><span style="color:#000">0</span><span style="color:#000">).</span><span style="color:#836c28">off</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">dr</span><span style="color:#000">.</span><span style="color:#836c28">getDevice</span><span style="color:#000">(</span><span style="color:#000">1</span><span style="color:#000">).</span><span style="color:#836c28">on</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">dr</span><span style="color:#000">.</span><span style="color:#836c28">getDevice</span><span style="color:#000">(</span><span style="color:#000">1</span><span style="color:#000">).</span><span style="color:#836c28">off</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">dr</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>			<span style="color:#177500">// DeviceRow [off.0, off.0, off.1, off.1]
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>			<span style="color:#000">dr</span><span style="color:#000">.</span><span style="color:#836c28">allOn</span><span style="color:#000">();</span> <span style="color:#177500">// Eccezione
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">DeviceIsOverException</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Eccezione..."</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">dr</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// DeviceRow [over.0, over.0, on .0, on .0]
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="una-applicazione-completa">Una applicazione completa</h2>
<h3 id="elementi-aggiuntivi">Elementi aggiuntivi</h3>
<pre><code>*  Vi dovrà essere una interazione con l'utente
*  Potrà da console fornire i comandi: `+N`, `-N`, `+all`, `-all`, `exit`
*  ..e vedere direttamente l'effetto che hanno sul `DeviceRow`
*  (è un prodromo di applicazione con GUI..)
</code></pre>
<h3 id="un-problema-architetturale">Un problema architetturale</h3>
<pre><code>*  come allestire una applicazione con interazione con l'utente?
</code></pre>
</section><section>
<h2 id="il-pattern-architetturale-mvc">Il pattern architetturale MVC</h2>
<h3 id="mvc----divide-lapplicazione-in-3-parti">MVC – divide l’applicazione in 3 parti</h3>
<pre><code>*  `Model`: modello OO del dominio applicativo del sistema
*  `View`: gestisce le interazioni con l'utente (in futuro una GUI)
*  `Controller`: gestisce il coordinamento fra Model e View
</code></pre>
<h3 id="applicazione-domotica">Applicazione (domotica)</h3>
<pre><code>*  `Model`{

*  Un wrapper per un `DeviceRow`
</code></pre>
<p>}
*  <code>View</code>{</p>
<pre><code>  *  Implementata da un `ConsoleView` che lavora con la Console
</code></pre>
<p>}
*  <code>Controller</code>{</p>
<pre><code>*  Utilizza un `CommandExecutor` che "processa" i comandi da tastiera
</code></pre>
<p>}
* $\Rightarrow$ <code>View</code> e <code>Model</code> nascoste da interfacce, per supportare un buon disaccoppiamento</p>
</section><section>
<h2 id="uml-design-generale">UML: Design generale</h2>
<p><img src="img/dia.jpg" alt=""></p>
</section><section>
<h2 id="controller-pt1"><code>Controller</code>, pt1</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> * The Logics class as of MVC
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Controller</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">START</span> <span style="color:#000">=</span> <span style="color:#c41a16">"Sistema inizializzato"</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">EXIT</span> <span style="color:#000">=</span> <span style="color:#c41a16">"Comando di uscita... bye bye"</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">CMD_ERROR</span> <span style="color:#000">=</span> <span style="color:#c41a16">"Comando errato.. reinserire"</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">DEVICE_OVER</span> <span style="color:#000">=</span> <span style="color:#c41a16">"Device esaurito!"</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">CMD_OK</span> <span style="color:#000">=</span> <span style="color:#c41a16">"Comando eseguito"</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">ASK</span> <span style="color:#000">=</span> <span style="color:#c41a16">"Inserisci il comando (exit, +N, -N, +all, -all): "</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">Model</span> <span style="color:#000">model</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">View</span> <span style="color:#000">view</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">CommandExecutor</span> <span style="color:#000">executor</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#000">Controller</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">size</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">model</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">DeviceRowModel</span><span style="color:#000">(</span><span style="color:#000">size</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">view</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConsoleView</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">executor</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">SimpleCommandExecutor</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">executor</span><span style="color:#000">.</span><span style="color:#836c28">setDeviceRow</span><span style="color:#000">(</span><span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">model</span><span style="color:#000">.</span><span style="color:#836c28">getDeviceRow</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * This method implements the main loop of the program 
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span></code></pre></div></section><section>
<h2 id="controller-pt2"><code>Controller</code>, pt2</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">view</span><span style="color:#000">.</span><span style="color:#836c28">setLogString</span><span style="color:#000">(</span><span style="color:#000">START</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">while</span> <span style="color:#000">(</span><span style="color:#a90d91">true</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">try</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">view</span><span style="color:#000">.</span><span style="color:#836c28">setRowStatus</span><span style="color:#000">(</span><span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">model</span><span style="color:#000">.</span><span style="color:#836c28">getDeviceRow</span><span style="color:#000">().</span><span style="color:#836c28">toString</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">view</span><span style="color:#000">.</span><span style="color:#836c28">redraw</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">command</span> <span style="color:#000">=</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">view</span><span style="color:#000">.</span><span style="color:#836c28">ask</span><span style="color:#000">(</span><span style="color:#000">ASK</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">executor</span><span style="color:#000">.</span><span style="color:#836c28">exec</span><span style="color:#000">(</span><span style="color:#000">command</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">view</span><span style="color:#000">.</span><span style="color:#836c28">setLogString</span><span style="color:#000">(</span><span style="color:#000">CMD_OK</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">DeviceIsOverException</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">view</span><span style="color:#000">.</span><span style="color:#836c28">setLogString</span><span style="color:#000">(</span><span style="color:#000">DEVICE_OVER</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">CommandNotRecognisedException</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">view</span><span style="color:#000">.</span><span style="color:#836c28">setLogString</span><span style="color:#000">(</span><span style="color:#000">CMD_ERROR</span> <span style="color:#000">+</span> <span style="color:#c41a16">" ("</span> <span style="color:#000">+</span> <span style="color:#000">e</span><span style="color:#000">.</span><span style="color:#836c28">getMessage</span><span style="color:#000">()</span> <span style="color:#000">+</span> <span style="color:#c41a16">")"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">ExitCommandException</span> <span style="color:#000">e</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">view</span><span style="color:#000">.</span><span style="color:#836c28">setLogString</span><span style="color:#000">(</span><span style="color:#000">EXIT</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>				<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">exit</span><span style="color:#000">(</span><span style="color:#000">0</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">}</span> 
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">new</span> <span style="color:#000">Controller</span><span style="color:#000">(</span><span style="color:#000">5</span><span style="color:#000">).</span><span style="color:#836c28">start</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="eccezioni-1">Eccezioni</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">ExitCommandException</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Exception</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">CommandNotRecognisedException</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Exception</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">CommandNotRecognisedException</span><span style="color:#000">(</span><span style="color:#000">String</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">super</span><span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span> 
</span></span></code></pre></div></section><section>
<h2 id="interfaccia-e-implementazione-model">Interfaccia e implementazione <code>Model</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> * @author Mirko Viroli
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> * 
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> * The interface over the Model as of MVC
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> *
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Model</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @return a device row
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">DeviceRow</span> <span style="color:#000">getDeviceRow</span><span style="color:#000">();</span> 
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">DeviceRow</span> <span style="color:#000">row</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">DeviceRowModel</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">size</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">row</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">DeviceRow</span><span style="color:#000">(</span><span style="color:#000">size</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">DeviceRow</span> <span style="color:#000">getDeviceRow</span><span style="color:#000">(){</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">row</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>	
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="interfaccia-view">Interfaccia <code>View</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> * The interface over the View as of MVC
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">View</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @param s is the String representing the model status
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">void</span> <span style="color:#000">setRowStatus</span><span style="color:#000">(</span><span style="color:#000">String</span> <span style="color:#000">s</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @param s is the String representing a message from the controller
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">void</span> <span style="color:#000">setLogString</span><span style="color:#000">(</span><span style="color:#000">String</span> <span style="color:#000">s</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * Updates the view
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">void</span> <span style="color:#000">redraw</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @param question is a message sent to the user
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @return the provided reply
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">String</span> <span style="color:#000">ask</span><span style="color:#000">(</span><span style="color:#000">String</span> <span style="color:#000">question</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="consoleview-pt1"><code>ConsoleView</code>, pt1</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> * This class provides an implementation of the View simply using the console
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">ConsoleView</span> <span style="color:#a90d91">implements</span> <span style="color:#000">View</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">CLEAR_CONSOLE</span> <span style="color:#000">=</span> <span style="color:#c41a16">"\033[2J\033[;H"</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">BufferedReader</span> <span style="color:#000">KBD</span> <span style="color:#000">=</span> 
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">new</span> <span style="color:#000">BufferedReader</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">InputStreamReader</span><span style="color:#000">(</span><span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">in</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#000">String</span> <span style="color:#000">rowString</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#000">String</span> <span style="color:#000">logString</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">ConsoleView</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">rowString</span> <span style="color:#000">=</span> <span style="color:#c41a16">""</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">logString</span> <span style="color:#000">=</span> <span style="color:#c41a16">""</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">redraw</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">print</span><span style="color:#000">(</span><span style="color:#000">CLEAR_CONSOLE</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">rowString</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">logString</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">setRowStatus</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">rowString</span> <span style="color:#000">=</span> <span style="color:#000">s</span><span style="color:#000">;</span>
</span></span></code></pre></div></section><section>
<h2 id="consoleview-pt2"><code>ConsoleView</code>, pt2</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">setLogString</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">logString</span> <span style="color:#000">=</span> <span style="color:#000">s</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">ask</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">question</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">print</span><span style="color:#000">(</span><span style="color:#000">question</span><span style="color:#000">);</span> <span style="color:#177500">// Asking message
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">try</span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">return</span> <span style="color:#000">KBD</span><span style="color:#000">.</span><span style="color:#836c28">readLine</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">IOException</span> <span style="color:#000">e</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">return</span> <span style="color:#a90d91">null</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span> 
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="interfaccia-commandexecutor">Interfaccia <code>CommandExecutor</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> * A helper class for the controller, executin a command over the device row  
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">CommandExecutor</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @param s is the String inserted by the user
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @throws ExitCommandException
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @throws CommandNotRecognisedException
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @throws DeviceIsOverException
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">void</span> <span style="color:#000">exec</span><span style="color:#000">(</span><span style="color:#000">String</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#a90d91">throws</span> <span style="color:#000">ExitCommandException</span><span style="color:#000">,</span> 
</span></span><span style="display:flex;"><span>	                           <span style="color:#000">CommandNotRecognisedException</span><span style="color:#000">,</span> 
</span></span><span style="display:flex;"><span>	                           <span style="color:#000">DeviceIsOverException</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 * @param row is the model part over which commands are executed
</span></span></span><span style="display:flex;"><span><span style="color:#177500">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">void</span> <span style="color:#000">setDeviceRow</span><span style="color:#000">(</span><span style="color:#000">DeviceRow</span> <span style="color:#000">row</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="simplecommandexecutor-pt1"><code>SimpleCommandExecutor</code>, pt1</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span> <span style="color:#000">*</span> <span style="color:#000">Implements</span> <span style="color:#000">a</span> <span style="color:#000">CommandExecutor</span><span style="color:#000">,</span> <span style="color:#000">encapsulating</span> <span style="color:#000">all</span> <span style="color:#000">corresponding</span> <span style="color:#000">design</span> <span style="color:#000">choices</span>  
</span></span><span style="display:flex;"><span> <span style="color:#000">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">SimpleCommandExecutor</span> <span style="color:#a90d91">implements</span> <span style="color:#000">CommandExecutor</span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">ON</span> <span style="color:#000">=</span> <span style="color:#c41a16">"+"</span><span style="color:#000">;</span> 
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">OFF</span> <span style="color:#000">=</span> <span style="color:#c41a16">"-"</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">EXIT</span> <span style="color:#000">=</span> <span style="color:#c41a16">"exit"</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">OFFALL</span> <span style="color:#000">=</span> <span style="color:#c41a16">"-all"</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">ONALL</span> <span style="color:#000">=</span> <span style="color:#c41a16">"+all"</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">ERROR_UNRECOGNISED</span> <span style="color:#000">=</span> <span style="color:#c41a16">"Unrecognised string"</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">ERROR_OUTOFRANGE</span> <span style="color:#000">=</span> <span style="color:#c41a16">"Out of range"</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#000">DeviceRow</span> <span style="color:#000">row</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">SimpleCommandExecutor</span><span style="color:#000">(){</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">setDeviceRow</span><span style="color:#000">(</span><span style="color:#000">DeviceRow</span> <span style="color:#000">row</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">row</span> <span style="color:#000">=</span> <span style="color:#000">row</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#000">/**</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">@param</span> <span style="color:#000">s</span> <span style="color:#000">is</span> <span style="color:#000">the</span> <span style="color:#000">String</span> <span style="color:#000">command</span> <span style="color:#000">to</span> <span style="color:#000">interpret</span> <span style="color:#000">and</span> <span style="color:#000">execute</span>
</span></span></code></pre></div></section><section>
<h2 id="simplecommandexecutor-pt2"><code>SimpleCommandExecutor</code>, pt2</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">@throws</span> <span style="color:#000">ExitCommandException</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">@throws</span> <span style="color:#000">CommandNotRecognisedException</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*</span> <span style="color:#000">@throws</span> <span style="color:#000">DeviceIsOverException</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#000">*/</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">exec</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#a90d91">throws</span> <span style="color:#000">ExitCommandException</span><span style="color:#000">,</span> 
</span></span><span style="display:flex;"><span>	                                  <span style="color:#000">CommandNotRecognisedException</span><span style="color:#000">,</span> 
</span></span><span style="display:flex;"><span>	                                  <span style="color:#000">DeviceIsOverException</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(!</span><span style="color:#000">processExit</span><span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">!</span><span style="color:#000">processOffAll</span><span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">!</span><span style="color:#000">processOnAll</span><span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">&amp;&amp;</span> 
</span></span><span style="display:flex;"><span>			<span style="color:#000">!</span><span style="color:#000">processOn</span><span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">!</span><span style="color:#000">processOff</span><span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">)){</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">CommandNotRecognisedException</span><span style="color:#000">(</span><span style="color:#000">ERROR_UNRECOGNISED</span><span style="color:#000">+</span><span style="color:#c41a16">" '"</span><span style="color:#000">+</span><span style="color:#000">s</span><span style="color:#000">+</span><span style="color:#c41a16">"'"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">processExit</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#a90d91">throws</span> <span style="color:#000">ExitCommandException</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">.</span><span style="color:#836c28">equals</span><span style="color:#000">(</span><span style="color:#000">EXIT</span><span style="color:#000">)){</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ExitCommandException</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">processOffAll</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">s</span><span style="color:#000">){</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">.</span><span style="color:#836c28">equals</span><span style="color:#000">(</span><span style="color:#000">OFFALL</span><span style="color:#000">)){</span>
</span></span></code></pre></div></section><section>
<h2 id="simplecommandexecutor-pt3"><code>SimpleCommandExecutor</code>, pt3</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>			<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">row</span><span style="color:#000">.</span><span style="color:#836c28">allOff</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">return</span> <span style="color:#a90d91">true</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">processOnAll</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#a90d91">throws</span> <span style="color:#000">DeviceIsOverException</span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">.</span><span style="color:#836c28">equals</span><span style="color:#000">(</span><span style="color:#000">ONALL</span><span style="color:#000">)){</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">row</span><span style="color:#000">.</span><span style="color:#836c28">allOn</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">return</span> <span style="color:#a90d91">true</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">processOn</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">s</span><span style="color:#000">)</span> 
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">throws</span> <span style="color:#000">CommandNotRecognisedException</span><span style="color:#000">,</span>
</span></span><span style="display:flex;"><span>			       <span style="color:#000">DeviceIsOverException</span> <span style="color:#000">{</span>
</span></span></code></pre></div></section><section>
<h2 id="simplecommandexecutor-pt4"><code>SimpleCommandExecutor</code>, pt4</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">.</span><span style="color:#836c28">startsWith</span><span style="color:#000">(</span><span style="color:#000">ON</span><span style="color:#000">)){</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">index</span> <span style="color:#000">=</span> <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">parseInt</span><span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">.</span><span style="color:#836c28">substring</span><span style="color:#000">(</span><span style="color:#000">ON</span><span style="color:#000">.</span><span style="color:#836c28">length</span><span style="color:#000">()));</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span> <span style="color:#000">||</span> <span style="color:#000">index</span> <span style="color:#000">&gt;=</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">row</span><span style="color:#000">.</span><span style="color:#836c28">getSize</span><span style="color:#000">()){</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">CommandNotRecognisedException</span><span style="color:#000">(</span><span style="color:#000">ERROR_OUTOFRANGE</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">row</span><span style="color:#000">.</span><span style="color:#836c28">getDevice</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">).</span><span style="color:#836c28">on</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">return</span> <span style="color:#a90d91">true</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">// Some cut-and-past that could be resolved
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">processOff</span><span style="color:#000">(</span><span style="color:#000">String</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#a90d91">throws</span> 
</span></span><span style="display:flex;"><span>			<span style="color:#000">CommandNotRecognisedException</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">.</span><span style="color:#836c28">startsWith</span><span style="color:#000">(</span><span style="color:#000">OFF</span><span style="color:#000">)){</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">index</span> <span style="color:#000">=</span> <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">parseInt</span><span style="color:#000">(</span><span style="color:#000">s</span><span style="color:#000">.</span><span style="color:#836c28">substring</span><span style="color:#000">(</span><span style="color:#000">OFF</span><span style="color:#000">.</span><span style="color:#836c28">length</span><span style="color:#000">()));</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span> <span style="color:#000">||</span> <span style="color:#000">index</span> <span style="color:#000">&gt;=</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">row</span><span style="color:#000">.</span><span style="color:#836c28">getSize</span><span style="color:#000">()){</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">CommandNotRecognisedException</span><span style="color:#000">(</span><span style="color:#000">ERROR_OUTOFRANGE</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">row</span><span style="color:#000">.</span><span style="color:#836c28">getDevice</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">).</span><span style="color:#836c28">off</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">return</span> <span style="color:#a90d91">true</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>	 	
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="note-su-questa-progettazione">Note su questa progettazione</h2>
<h3 id="complessivamente">Complessivamente</h3>
<pre><code>*  è lungi dall'essere ottimale
*  è un primo passo verso l'idea di "buon progetto"
</code></pre>
<h3 id="aspetti-positivi">Aspetti positivi</h3>
<pre><code>*  Suddivisione base secondo logica MVC
*  M e V "nascosti" da interfacce, favorendo disaccoppiamento
</code></pre>
<h3 id="aspetti-da-migliorare----ve-ne-sono-sempre">Aspetti da migliorare – ve ne sono sempre!!</h3>
<pre><code>*  `Controller` contiene elementi relativi all'interazione con l'utente{

  *  sarebbero da astrarre in chiamate di metodo da fare sulla `View`
</code></pre>
<p>}
*  <code>CommandExecutor</code> contiene due logiche, e non andrebbe bene:{</p>
<pre><code>  *  riconoscimento della stringa in input (da gestire nella `View`)
  *  conseguente esecuzione del comando
</code></pre>
<p>}</p>
</section><section>
</section>

  


</div>
      

    </div>
<script type="text/javascript" src="/reveal-hugo/object-assign.js"></script>

<a href="/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"900","highlight_theme":"default","history":true,"mermaid":[{"startOnLoad":false}],"slide_number":true,"theme":"white","transition":"slide","transition_speed":"fast","width":"1440"}</script>
<script type="application/json" id="reveal-hugo-page-params">null</script>

<script src="/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }
  
  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = { 
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>










  <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({"startOnLoad":false});

    let render = (event) => {
      let mermaidElems = event.currentSlide.querySelectorAll('.mermaid');
      if (!mermaidElems.length){
          return
      }
      mermaidElems.forEach(mermaidElem => {
          let processed = mermaidElem.getAttribute('data-processed');
          if (!processed){
              
              mermaid.init(undefined, mermaidElem);
          }
      });
    };
    Reveal.addEventListener('slidechanged', render);
    Reveal.addEventListener('ready', render);
  </script>

    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

    
  

</body></html>