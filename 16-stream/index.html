<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
<title>Progettazione e Sviluppo del Software</title>
<meta name="description" content="Progettazione e Sviluppo del Software, Tecnologie dei Sistemi Informatici">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/css/custom-theme.min.041774499f673c89b4ed45a7135d8c19bbe94d07a9074b007bae67bed12e3435.css" id="theme"><link rel="stylesheet" href="/highlight-js/default.min.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="stream">Stream</h1>
<h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="danilo-pianini"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini — <code>danilo.pianini@unibo.it</code></a></h3>
<h3 id="gianluca-aguzzi"><a href="mailto:gianluca.aguzzi@unibo.it">Gianluca Aguzzi — <code>gianluca.aguzzi@unibo.it</code></a></h3>
<h3 id="angelo-filaseta"><a href="mailto:angelo.filaseta@unibo.it">Angelo Filaseta — <code>angelo.filaseta@unibo.it</code></a></h3>
<p>Compiled on: 2025-09-03
 — <a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
<p><a href=".."><i class="fa fa-undo" aria-hidden="true"></i> back</a></p>
</section><section>
<h2 id="riconoscimenti">Riconoscimenti</h2>
<ul>
<li>
<p>Questo materiale è ampiamente basato su quello realizzato dai Prof.
Mirko Viroli e Roberto Casadei, che ringrazio.</p>
</li>
<li>
<p>Ogni errore riscontratovi è esclusiva responsabilità degli autori di questo documento.</p>
</li>
</ul>
</section><section>
<h2 id="outline">Outline</h2>
<h3 id="goal-della-lezione">Goal della lezione</h3>
<ul>
<li>Mostrare la gestione funzionale degli Stream</li>
<li>Discutere altri aspetti relativi alle novità di Java 8</li>
</ul>
</section><section>
<h1 id="stream-1">Stream</h1>
</section><section>
<h2 id="il-concetto-di-stream">Il concetto di Stream</h2>
<h3 id="idee">Idee</h3>
<ul>
<li>Uno Stream rappresenta un flusso sequenziale (anche infinito) di dati omogenei, usabile una volta sola, e dal quale si vuole ottenere una informazione complessiva e/o aggregata</li>
<li>Assomiglia al concetto di Iteratore, ma lo Stream è più dichiarativo, perché non indica passo-passo come l’informazione viene processata, e quindi è concettualmente più astratto</li>
<li>Ove possibile, uno Stream manipola i suoi elementi in modo “lazy” (ritardato): i dati vengono processati mano a mano che servono, non sono memorizzati tutti assieme come nelle Collection</li>
<li>E’ possibile creare “catene” di trasformazioni di Stream (implementate con decorazioni successive) in modo funzionale, per ottenere flessibilmente computazioni non banali dei loro elementi, con codice più compatto e leggibile</li>
<li>Questa modalità di lavoro rende le computazioni (automaticamente) parallelizzabili, ossia computabili da un set arbitrario di Thread</li>
</ul>
</section><section>
<h2 id="computazioni-con-gli-stream">Computazioni con gli Stream</h2>
<h3 id="struttura-a-pipeline">Struttura a pipeline</h3>
<ul>
<li>Una sorgente o sink:
<ul>
<li>Una Collection/array, un dispositivo di I/O, una funzione generatrice</li>
</ul>
</li>
<li>Una sequenza di trasformazioni:
<ul>
<li>mappe e filtri, ma non solo..</li>
</ul>
</li>
<li>Un terminatore, che aggrega i dati dello Stream:
<ul>
<li>una riduzione ad un valore, una Collection/array, un Iteratore</li>
</ul>
</li>
</ul>
<h3 id="esempio-con-persone-con-nome-città-e-reddito">Esempio: con persone con nome, città e reddito</h3>
<ul>
<li>Data una <code>List&lt;Persona&gt;</code> con proprietà reddito e città, ottenere la somma dei redditi di tutte le persone di Cesena</li>
<li>Come lo realizziamo tramite una pipeline?
<ul>
<li>Sorgente: la lista</li>
<li>Trasformazione 1: filtro sulle persone di Cesena</li>
<li>Trasformazione 2: si mappa ogni persona sul suo reddito</li>
<li>Terminazione: sommo</li>
</ul>
</li>
<li>Aspetto cruciale: le fasi intermedie (dopo le trasformazioni), non generano collezioni temporanee</li>
</ul>
</section><section>
<h2 id="classe-person--equals-hashcode-e-tostring-omessi">Classe <code>Person</code> – <code>equals</code>, <code>hashCode</code> e <code>toString</code> omessi</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Person</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">name</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">Optional</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">city</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">income</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">jobs</span>;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">Person</span>(<span style="color:#000">String</span> <span style="color:#000">name</span>, <span style="color:#000">String</span> <span style="color:#000">city</span>, <span style="color:#a90d91">double</span> <span style="color:#000">income</span>, <span style="color:#000">String</span>... <span style="color:#000">jobs</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">name</span> <span style="color:#000">=</span> <span style="color:#000">Objects</span>.<span style="color:#836c28">requireNonNull</span>(<span style="color:#000">name</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">city</span> <span style="color:#000">=</span> <span style="color:#000">Optional</span>.<span style="color:#836c28">ofNullable</span>(<span style="color:#000">city</span>); <span style="color:#177500">// null in ingresso indica città assente</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">income</span> <span style="color:#000">=</span> <span style="color:#000">income</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span>.<span style="color:#836c28">jobs</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">HashSet</span><span style="color:#000">&lt;&gt;</span>(<span style="color:#000">Arrays</span>.<span style="color:#836c28">asList</span>(<span style="color:#000">jobs</span>)); <span style="color:#177500">// conversione a set</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">getName</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">name</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">Optional</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">getCity</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">city</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">double</span> <span style="color:#000">getIncome</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>.<span style="color:#836c28">income</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">getJobs</span>(){
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#000">Collections</span>.<span style="color:#836c28">unmodifiableSet</span>(<span style="color:#a90d91">this</span>.<span style="color:#836c28">jobs</span>);	<span style="color:#177500">// copia difensiva</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#177500">//.. seguono hashCode, equals e toString</span>
</span></span></code></pre></div></section><section>
<h2 id="realizzazione-dellesempio-in-java-8">Realizzazione dell’esempio in Java 8</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseStreamsOnPerson</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Person</span><span style="color:#000">&gt;</span> <span style="color:#000">list</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayList</span><span style="color:#000">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">list</span>.<span style="color:#836c28">add</span>(<span style="color:#a90d91">new</span> <span style="color:#000">Person</span>(<span style="color:#c41a16">"Mario"</span>,<span style="color:#c41a16">"Cesena"</span>,<span style="color:#000">20000</span>,<span style="color:#c41a16">"Teacher"</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#000">list</span>.<span style="color:#836c28">add</span>(<span style="color:#a90d91">new</span> <span style="color:#000">Person</span>(<span style="color:#c41a16">"Rino"</span>,<span style="color:#c41a16">"Forlì"</span>,<span style="color:#000">50000</span>,<span style="color:#c41a16">"Professor"</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#000">list</span>.<span style="color:#836c28">add</span>(<span style="color:#a90d91">new</span> <span style="color:#000">Person</span>(<span style="color:#c41a16">"Lino"</span>,<span style="color:#c41a16">"Cesena"</span>,<span style="color:#000">110000</span>,<span style="color:#c41a16">"Professor"</span>,<span style="color:#c41a16">"Dean"</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#000">list</span>.<span style="color:#836c28">add</span>(<span style="color:#a90d91">new</span> <span style="color:#000">Person</span>(<span style="color:#c41a16">"Ugo"</span>,<span style="color:#c41a16">"Cesena"</span>,<span style="color:#000">20000</span>,<span style="color:#c41a16">"Secretary"</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#000">list</span>.<span style="color:#836c28">add</span>(<span style="color:#a90d91">new</span> <span style="color:#000">Person</span>(<span style="color:#c41a16">"Marco"</span>,<span style="color:#a90d91">null</span>,<span style="color:#000">4000</span>,<span style="color:#c41a16">"Contractor"</span>));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">result</span> <span style="color:#000">=</span> <span style="color:#000">list</span>.<span style="color:#836c28">stream</span>()
</span></span><span style="display:flex;"><span>								  .<span style="color:#836c28">filter</span>(<span style="color:#000">p</span><span style="color:#000">-&gt;</span><span style="color:#000">p</span>.<span style="color:#836c28">getCity</span>().<span style="color:#836c28">isPresent</span>())
</span></span><span style="display:flex;"><span>								  .<span style="color:#836c28">filter</span>(<span style="color:#000">p</span><span style="color:#000">-&gt;</span><span style="color:#000">p</span>.<span style="color:#836c28">getCity</span>().<span style="color:#836c28">get</span>().<span style="color:#836c28">equals</span>(<span style="color:#c41a16">"Cesena"</span>))
</span></span><span style="display:flex;"><span>								  .<span style="color:#836c28">mapToDouble</span>(<span style="color:#000">Person</span>::<span style="color:#000">getIncome</span>)
</span></span><span style="display:flex;"><span>								  .<span style="color:#836c28">sum</span>();
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">result</span>);
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// alternativa con iteratore: qual è la più leggibile?</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">double</span> <span style="color:#000">res2</span> <span style="color:#000">=</span> <span style="color:#000">0</span>.<span style="color:#836c28">0</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> (<span style="color:#a90d91">final</span> <span style="color:#000">Person</span> <span style="color:#000">p</span>: <span style="color:#000">list</span>){
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">if</span> (<span style="color:#000">p</span>.<span style="color:#836c28">getCity</span>().<span style="color:#836c28">isPresent</span>() <span style="color:#000">&amp;&amp;</span> <span style="color:#000">p</span>.<span style="color:#836c28">getCity</span>().<span style="color:#836c28">get</span>().<span style="color:#836c28">equals</span>(<span style="color:#c41a16">"Cesena"</span>)){
</span></span><span style="display:flex;"><span>				<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">p</span>);
</span></span><span style="display:flex;"><span>				<span style="color:#000">res2</span> <span style="color:#000">=</span> <span style="color:#000">res2</span> <span style="color:#000">+</span> <span style="color:#000">p</span>.<span style="color:#836c28">getIncome</span>();
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">res2</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}   
</span></span></code></pre></div></section><section>
<h2 id="la-libreria-degli-stream">La libreria degli Stream</h2>
<h3 id="struttura">Struttura</h3>
<ul>
<li>Package <code>java.util.stream</code>: interfacce e classi per gli stream</li>
<li>Interfaccia <code>Stream&lt;X&gt;</code>: stream e metodi statici di “factory”</li>
<li>Interfaccia <code>BaseStream&lt;X,B&gt;</code>: sopra-interfaccia di <code>Stream</code> con i metodi base</li>
<li>Interfaccia <code>DoubleStream</code>: stream di <code>double</code>, con metodi base e specifici</li>
<li>Interfacce <code>IntStream</code>, <code>LongStream</code>: simili</li>
<li>Interfaccia <code>Collector&lt;T,A,R&gt;</code>: rappresenta una operazione di riduzione</li>
<li>Classe <code>Collectors</code>: fornisce una serie di collettori</li>
<li>..altre classi di Java creano degli stream</li>
</ul>
</section><section>
<h2 id="le-collection-generano-stream">Le collection generano Stream!</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Collection</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Iterable</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ..
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Iterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">iterator</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">default</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">removeIf</span>(<span style="color:#000">Predicate</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">filter</span>) {..}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">default</span> <span style="color:#000">Spliterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">spliterator</span>() {..}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">default</span> <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">stream</span>() {..}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">default</span> <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">parallelStream</span>() {..}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span> 
</span></span></code></pre></div></section><section>
<h2 id="linterfaccia-javautilbasestream">L’interfaccia <code>java.util.BaseStream</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">BaseStream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">S</span> <span style="color:#a90d91">extends</span> <span style="color:#000">BaseStream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">S</span><span style="color:#000">&gt;&gt;</span> <span style="color:#a90d91">extends</span> ... {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Torna un iteratore sugli elementi rimasti dello stream, e lo chiude</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Iterator</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">iterator</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// spliterator è un iteratore che supporta parallelismo..</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Spliterator</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">spliterator</span>();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// è uno stream gestibili in modalità parallela</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">isParallel</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// torna una variante sequenziale dello stream</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">S</span> <span style="color:#000">sequential</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// torna una variante parallela dello stream</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">S</span> <span style="color:#000">parallel</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// torna una variante non ordinata dello stream</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">S</span> <span style="color:#000">unordered</span>();
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// associa un handler chiamato alla chiusura dello stream</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">S</span> <span style="color:#000">onClose</span>(<span style="color:#000">Runnable</span> <span style="color:#000">closeHandler</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">close</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span> 
</span></span></code></pre></div></section><section>
<h2 id="riassunto-delle-funzionalità-di-una-pipeline-per-streamx">Riassunto delle funzionalità di una pipeline per <code>Stream&lt;X&gt;</code></h2>
<h3 id="creazione">Creazione</h3>
<ul>
<li><code>empty</code>, <code>of</code>, <code>iterate</code>, <code>generate</code>, <code>concat</code></li>
</ul>
<h3 id="trasformazione">Trasformazione</h3>
<ul>
<li><code>filter</code>, <code>map</code>, <code>flatMap</code>, <code>distinct</code>, <code>sorted</code>, <code>peek</code>, <code>limit</code>, <code>skip</code>, <code>mapToXYZ</code>,..</li>
</ul>
<h3 id="terminazione">Terminazione</h3>
<ul>
<li><code>forEach</code>, <code>forEachOrdered</code>, <code>toArray</code>, <code>reduce</code>, <code>collect</code>, <code>min</code>, <code>max</code>, <code>count</code>, <code>anyMatch</code>, <code>allMatch</code>, <code>noneMatch</code>, <code>findFirst</code>, <code>findAny</code>,..</li>
</ul>
<h3 id="una-nota-sulle-classi-doublestream-e-simili">Una nota sulle classi <code>DoubleStream</code> e simili</h3>
<ul>
<li>sono più specializzate e performanti, non avendo il boxing</li>
<li>non hanno tutte le funzionalità di cui sopra, se vi servono vi dovete riportare ad un <code>Stream&lt;X&gt;</code> con un trasformatore <code>mapToObj()</code> o <code>boxed()</code></li>
<li>ne hanno qualcuna in più specifica, ad esempio <code>sum</code></li>
</ul>
</section><section>
<h2 id="javautilstream-costruzione-stream-13"><code>java.util.Stream</code>: costruzione stream, 1/3</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">extends</span> <span style="color:#000">BaseStream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;&gt;</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Static factories</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">empty</span>() {..}
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">of</span>(<span style="color:#000">T</span> <span style="color:#000">t</span>) {..}
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">of</span>(<span style="color:#000">T</span>... <span style="color:#000">values</span>) {..}
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">iterate</span>(<span style="color:#a90d91">final</span> <span style="color:#000">T</span> <span style="color:#000">seed</span>, <span style="color:#a90d91">final</span> <span style="color:#000">UnaryOperator</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">f</span>) {..}
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">generate</span>(<span style="color:#000">Supplier</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">s</span>) {..}
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">concat</span>(<span style="color:#000">Stream</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">a</span>, <span style="color:#000">Stream</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">b</span>) {..}
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// also recall method Collection.stream() and Collection.parallelStream()</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">Builder</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">builder</span>() {..}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Builder</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Consumer</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">void</span> <span style="color:#000">accept</span>(<span style="color:#000">T</span> <span style="color:#000">t</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">default</span> <span style="color:#000">Builder</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">add</span>(<span style="color:#000">T</span> <span style="color:#000">t</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#000">accept</span>(<span style="color:#000">t</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">build</span>();
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div></section><section>
<h2 id="javautilstream-trasformazione-stream-23"><code>java.util.Stream</code>: trasformazione stream, 2/3</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Stream transformation</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">filter</span>(<span style="color:#000">Predicate</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">predicate</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">R</span><span style="color:#000">&gt;</span> <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">R</span><span style="color:#000">&gt;</span> <span style="color:#000">map</span>(<span style="color:#000">Function</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span>, <span style="color:#000">?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">R</span><span style="color:#000">&gt;</span> <span style="color:#000">mapper</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">R</span><span style="color:#000">&gt;</span> <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">R</span><span style="color:#000">&gt;</span> <span style="color:#000">flatMap</span>(<span style="color:#000">Function</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span>, <span style="color:#000">?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Stream</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">R</span><span style="color:#000">&gt;&gt;</span> <span style="color:#000">mapper</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">distinct</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">sorted</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">sorted</span>(<span style="color:#000">Comparator</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">comparator</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">peek</span>(<span style="color:#000">Consumer</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">action</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">limit</span>(<span style="color:#a90d91">long</span> <span style="color:#000">maxSize</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">Stream</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">skip</span>(<span style="color:#a90d91">long</span> <span style="color:#000">n</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#000">IntStream</span> <span style="color:#000">mapToInt</span>(<span style="color:#000">ToIntFunction</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">mapper</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">LongStream</span> <span style="color:#000">mapToLong</span>(<span style="color:#000">ToLongFunction</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">mapper</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">DoubleStream</span> <span style="color:#000">mapToDouble</span>(<span style="color:#000">ToDoubleFunction</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">mapper</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">IntStream</span> <span style="color:#000">flatMapToInt</span>(<span style="color:#000">Function</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span>, <span style="color:#000">?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">IntStream</span><span style="color:#000">&gt;</span> <span style="color:#000">mapper</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">LongStream</span> <span style="color:#000">flatMapToLong</span>(<span style="color:#000">Function</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span>, <span style="color:#000">?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">LongStream</span><span style="color:#000">&gt;</span> <span style="color:#000">mapper</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">DoubleStream</span> <span style="color:#000">flatMapToDouble</span>(<span style="color:#000">Function</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span>, <span style="color:#000">?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">DoubleStream</span><span style="color:#000">&gt;</span> <span style="color:#000">mapper</span>);
</span></span></code></pre></div></section><section>
<h2 id="javautilstream-terminazione-stream-33"><code>java.util.Stream</code>: terminazione stream, 3/3</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>    <span style="color:#177500">// Terminal Operations</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">forEach</span>(<span style="color:#000">Consumer</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">action</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">forEachOrdered</span>(<span style="color:#000">Consumer</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">action</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">toArray</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">A</span><span style="color:#000">&gt;</span> <span style="color:#000">A</span><span style="color:#000">[]</span> <span style="color:#000">toArray</span>(<span style="color:#000">IntFunction</span><span style="color:#000">&lt;</span><span style="color:#000">A</span><span style="color:#000">[]&gt;</span> <span style="color:#000">generator</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">T</span> <span style="color:#000">reduce</span>(<span style="color:#000">T</span> <span style="color:#000">identity</span>, <span style="color:#000">BinaryOperator</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">accumulator</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">Optional</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">reduce</span>(<span style="color:#000">BinaryOperator</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">accumulator</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">U</span><span style="color:#000">&gt;</span> <span style="color:#000">U</span> <span style="color:#000">reduce</span>(<span style="color:#000">U</span> <span style="color:#000">identity</span>, <span style="color:#000">BiFunction</span><span style="color:#000">&lt;</span><span style="color:#000">U</span>, <span style="color:#000">?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span>, <span style="color:#000">U</span><span style="color:#000">&gt;</span> <span style="color:#000">accumulator</span>, <span style="color:#000">BinaryOperator</span><span style="color:#000">&lt;</span><span style="color:#000">U</span><span style="color:#000">&gt;</span> <span style="color:#000">combiner</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">R</span><span style="color:#000">&gt;</span> <span style="color:#000">R</span> <span style="color:#000">collect</span>(<span style="color:#000">Supplier</span><span style="color:#000">&lt;</span><span style="color:#000">R</span><span style="color:#000">&gt;</span> <span style="color:#000">supplier</span>, <span style="color:#000">BiConsumer</span><span style="color:#000">&lt;</span><span style="color:#000">R</span>, <span style="color:#000">?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">accumulator</span>, <span style="color:#000">BiConsumer</span><span style="color:#000">&lt;</span><span style="color:#000">R</span>, <span style="color:#000">R</span><span style="color:#000">&gt;</span> <span style="color:#000">combiner</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">R</span>, <span style="color:#000">A</span><span style="color:#000">&gt;</span> <span style="color:#000">R</span> <span style="color:#000">collect</span>(<span style="color:#000">Collector</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span>, <span style="color:#000">A</span>, <span style="color:#000">R</span><span style="color:#000">&gt;</span> <span style="color:#000">collector</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">Optional</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">min</span>(<span style="color:#000">Comparator</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">comparator</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">Optional</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">max</span>(<span style="color:#000">Comparator</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">comparator</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">long</span> <span style="color:#000">count</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">anyMatch</span>(<span style="color:#000">Predicate</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">predicate</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">allMatch</span>(<span style="color:#000">Predicate</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">predicate</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">noneMatch</span>(<span style="color:#000">Predicate</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">predicate</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000">Optional</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">findFirst</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#000">Optional</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">findAny</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span> 
</span></span></code></pre></div></section><section>
<h2 id="trasformazioni-di-stream-esempi">Trasformazioni di Stream: esempi</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseTransformations</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">li</span> <span style="color:#000">=</span> <span style="color:#000">List</span>.<span style="color:#836c28">of</span>(<span style="color:#000">10</span>, <span style="color:#000">20</span>, <span style="color:#000">30</span>, <span style="color:#000">5</span>, <span style="color:#000">6</span>, <span style="color:#000">7</span>, <span style="color:#000">10</span>, <span style="color:#000">20</span>, <span style="color:#000">100</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"All\t\t :"</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span> <span style="color:#000">-&gt;</span> <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span> <span style="color:#000">+</span> <span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nFilter(&gt;10)\t :"</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>()
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">filter</span>(<span style="color:#000">i</span> <span style="color:#000">-&gt;</span> <span style="color:#000">i</span> <span style="color:#000">&gt;</span> <span style="color:#000">10</span>) <span style="color:#177500">// fa passare solo certi elementi</span>
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span> <span style="color:#000">-&gt;</span> <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span> <span style="color:#000">+</span> <span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nMap(N:i+1)\t :"</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>()
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">map</span>(<span style="color:#000">i</span> <span style="color:#000">-&gt;</span> <span style="color:#c41a16">"N:"</span> <span style="color:#000">+</span> (<span style="color:#000">i</span> <span style="color:#000">+</span> <span style="color:#000">1</span>)) <span style="color:#177500">// trasforma ogni elemento</span>
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span> <span style="color:#000">-&gt;</span> <span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span> <span style="color:#000">+</span> <span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nflatMap(i,i+1)\t :"</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>()
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">flatMap</span>(<span style="color:#000">i</span> <span style="color:#000">-&gt;</span> <span style="color:#000">List</span>.<span style="color:#836c28">of</span>(<span style="color:#000">i</span>, <span style="color:#000">i</span> <span style="color:#000">+</span> <span style="color:#000">1</span>).<span style="color:#836c28">stream</span>()) <span style="color:#177500">// trasforma e appiattisce</span>
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">map</span>(<span style="color:#000">String</span>::<span style="color:#000">valueOf</span>) <span style="color:#177500">// invece del forEach..</span>
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">map</span>(<span style="color:#c41a16">" "</span>::<span style="color:#000">concat</span>)
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">forEach</span>(<span style="color:#000">System</span>.<span style="color:#836c28">out</span>::<span style="color:#000">print</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="trasformazioni-di-stream-esempi-pt2">Trasformazioni di Stream: esempi pt.2</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseTransformations2</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">li</span> <span style="color:#000">=</span> <span style="color:#000">List</span>.<span style="color:#836c28">of</span>(<span style="color:#000">10</span>,<span style="color:#000">20</span>,<span style="color:#000">30</span>,<span style="color:#000">5</span>,<span style="color:#000">6</span>,<span style="color:#000">7</span>,<span style="color:#000">10</span>,<span style="color:#000">20</span>,<span style="color:#000">100</span>);
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nDistinct\t :"</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">distinct</span>()	<span style="color:#177500">// elimina le ripetizioni</span>
</span></span><span style="display:flex;"><span>		  .<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nSorted(down)\t :"</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">sorted</span>((<span style="color:#000">i</span>,<span style="color:#000">j</span>)<span style="color:#000">-&gt;</span><span style="color:#000">j</span><span style="color:#000">-</span><span style="color:#000">i</span>) <span style="color:#177500">// ordina</span>
</span></span><span style="display:flex;"><span>		  .<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nPeek(.)\t\t :"</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">peek</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"."</span>)) <span style="color:#177500">// esegue una azione per ognuno</span>
</span></span><span style="display:flex;"><span>		  .<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nLimit(5)\t :"</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">limit</span>(<span style="color:#000">5</span>)  <span style="color:#177500">// solo i primi 5</span>
</span></span><span style="display:flex;"><span>		  .<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nSkip(5)\t\t :"</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">skip</span>(<span style="color:#000">5</span>)   <span style="color:#177500">// salta i primi 5</span>
</span></span><span style="display:flex;"><span>		  .<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="creazione-di-stream-esempi">Creazione di Stream: esempi</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseFactories</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">li</span> <span style="color:#000">=</span> <span style="color:#000">List</span>.<span style="color:#836c28">of</span>(<span style="color:#000">10</span>,<span style="color:#000">20</span>,<span style="color:#000">30</span>,<span style="color:#000">5</span>,<span style="color:#000">6</span>,<span style="color:#000">7</span>,<span style="color:#000">10</span>,<span style="color:#000">20</span>,<span style="color:#000">100</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"Collection: "</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>()
</span></span><span style="display:flex;"><span>		  .<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nEmpty: "</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">Stream</span>.<span style="color:#836c28">empty</span>()
</span></span><span style="display:flex;"><span>		      .<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nFromValues: "</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">Stream</span>.<span style="color:#836c28">of</span>(<span style="color:#c41a16">"a"</span>,<span style="color:#c41a16">"b"</span>,<span style="color:#c41a16">"c"</span>)
</span></span><span style="display:flex;"><span>		      .<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nIterate(+1): "</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">Stream</span>.<span style="color:#836c28">iterate</span>(<span style="color:#000">0</span>,<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">i</span><span style="color:#000">+</span><span style="color:#000">1</span>)  <span style="color:#177500">// 0,1,2,3,...</span>
</span></span><span style="display:flex;"><span>		      .<span style="color:#836c28">limit</span>(<span style="color:#000">20</span>)
</span></span><span style="display:flex;"><span>		      .<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="creazione-di-stream-esempi-pt2">Creazione di Stream: esempi pt.2</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseFactories2</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nSuppl(random): "</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">Stream</span>.<span style="color:#836c28">generate</span>(()<span style="color:#000">-&gt;</span><span style="color:#000">Math</span>.<span style="color:#836c28">random</span>()) <span style="color:#177500">// rand,rand,rand,...</span>
</span></span><span style="display:flex;"><span>		      .<span style="color:#836c28">limit</span>(<span style="color:#000">5</span>)
</span></span><span style="display:flex;"><span>		      .<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#177500">//DoubleStream.generate(()-&gt;Math.random())... stream unboxed</span>
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nConcat: "</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">Stream</span>.<span style="color:#836c28">concat</span>(<span style="color:#000">Stream</span>.<span style="color:#836c28">of</span>(<span style="color:#c41a16">"a"</span>,<span style="color:#c41a16">"b"</span>),<span style="color:#000">Stream</span>.<span style="color:#836c28">of</span>(<span style="color:#000">1</span>,<span style="color:#000">2</span>))
</span></span><span style="display:flex;"><span>		      .<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nBuilder: "</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">Stream</span>.<span style="color:#836c28">builder</span>()
</span></span><span style="display:flex;"><span>		      .<span style="color:#836c28">add</span>(<span style="color:#000">1</span>)
</span></span><span style="display:flex;"><span>		      .<span style="color:#836c28">add</span>(<span style="color:#000">2</span>)
</span></span><span style="display:flex;"><span>		      .<span style="color:#836c28">build</span>()
</span></span><span style="display:flex;"><span>		      .<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nRange: "</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">IntStream</span>.<span style="color:#836c28">range</span>(<span style="color:#000">0</span>,<span style="color:#000">20</span>) <span style="color:#177500">// 0,1,..,19</span>
</span></span><span style="display:flex;"><span>		         .<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="creazione-di-stream-file-di-testo-e-stringhe">Creazione di Stream: file di testo e stringhe</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseOtherFactories</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">static</span> <span style="color:#000">String</span> <span style="color:#000">aDir</span> <span style="color:#000">=</span> <span style="color:#c41a16">"/home/mirko/aula"</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">static</span> <span style="color:#000">String</span> <span style="color:#000">aFile</span> <span style="color:#000">=</span> <span style="color:#c41a16">"/home/mirko/aula/oop/17/Counter.java"</span>;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) <span style="color:#a90d91">throws</span> <span style="color:#000">Exception</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Path</span> <span style="color:#000">dirPath</span> <span style="color:#000">=</span> <span style="color:#000">FileSystems</span>.<span style="color:#836c28">getDefault</span>().<span style="color:#836c28">getPath</span>(<span style="color:#000">aDir</span>);
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Found below "</span><span style="color:#000">+</span><span style="color:#000">aDir</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">Files</span>.<span style="color:#836c28">find</span>(<span style="color:#000">dirPath</span>, <span style="color:#000">2</span>, (<span style="color:#000">a</span>,<span style="color:#000">b</span>)<span style="color:#000">-&gt;</span><span style="color:#a90d91">true</span>).<span style="color:#836c28">forEach</span>(<span style="color:#000">System</span>.<span style="color:#836c28">out</span>::<span style="color:#000">println</span>);
</span></span><span style="display:flex;"><span>	    
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"List directory "</span><span style="color:#000">+</span><span style="color:#000">aDir</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">Files</span>.<span style="color:#836c28">list</span>(<span style="color:#000">dirPath</span>).<span style="color:#836c28">forEach</span>(<span style="color:#000">System</span>.<span style="color:#836c28">out</span>::<span style="color:#000">println</span>);
</span></span><span style="display:flex;"><span>	    
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Path</span> <span style="color:#000">filePath</span> <span style="color:#000">=</span> <span style="color:#000">FileSystems</span>.<span style="color:#836c28">getDefault</span>().<span style="color:#836c28">getPath</span>(<span style="color:#000">aFile</span>);
</span></span><span style="display:flex;"><span>	    
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Contenuto of "</span><span style="color:#000">+</span><span style="color:#000">aFile</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">Files</span>.<span style="color:#836c28">lines</span>(<span style="color:#000">filePath</span>).<span style="color:#836c28">forEach</span>(<span style="color:#000">System</span>.<span style="color:#836c28">out</span>::<span style="color:#000">println</span>);
</span></span><span style="display:flex;"><span>	    
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Contenuto of "</span><span style="color:#000">+</span><span style="color:#000">aFile</span><span style="color:#000">+</span><span style="color:#c41a16">" in altra codifica"</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">Files</span>.<span style="color:#836c28">lines</span>(<span style="color:#000">filePath</span>,<span style="color:#000">StandardCharsets</span>.<span style="color:#836c28">ISO_8859_1</span>).<span style="color:#836c28">forEach</span>(<span style="color:#000">System</span>.<span style="color:#836c28">out</span>::<span style="color:#000">println</span>);
</span></span><span style="display:flex;"><span>	    
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Si veda il sorgente di BufferedReader.lines() per capire come si realizza</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// uno stream a partire da un iteratore</span>
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Stream da una stringa.."</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#c41a16">"Hellò!"</span>.<span style="color:#836c28">chars</span>().<span style="color:#836c28">mapToObj</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span>(<span style="color:#a90d91">char</span>)<span style="color:#000">i</span>).<span style="color:#836c28">forEach</span>(<span style="color:#000">System</span>.<span style="color:#836c28">out</span>::<span style="color:#000">println</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="terminazioni-ad-hoc-di-stream-esempi">Terminazioni ad-hoc di Stream: esempi</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseTerminations</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">li</span> <span style="color:#000">=</span> <span style="color:#000">List</span>.<span style="color:#836c28">of</span>(<span style="color:#000">10</span>,<span style="color:#000">20</span>,<span style="color:#000">30</span>,<span style="color:#000">5</span>,<span style="color:#000">6</span>,<span style="color:#000">7</span>,<span style="color:#000">10</span>,<span style="color:#000">20</span>,<span style="color:#000">100</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"ForEach:\t "</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">forEach</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">"\nForEachOrdered: "</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">forEachOrdered</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">print</span>(<span style="color:#c41a16">" "</span><span style="color:#000">+</span><span style="color:#000">i</span>));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Integer</span><span style="color:#000">[]</span> <span style="color:#000">array</span> <span style="color:#000">=</span> <span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">toArray</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#a90d91">new</span> <span style="color:#000">Integer</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"\nToArray:\t "</span><span style="color:#000">+</span><span style="color:#000">Arrays</span>.<span style="color:#836c28">toString</span>(<span style="color:#000">array</span>));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#177500">//Integer sum = li.stream().reduce(0,(x,y)-&gt;x+y);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Integer</span> <span style="color:#000">sum</span> <span style="color:#000">=</span> <span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">reduce</span>(<span style="color:#000">0</span>,<span style="color:#000">Integer</span>::<span style="color:#000">sum</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Sum:\t\t "</span><span style="color:#000">+</span><span style="color:#000">sum</span>);
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#177500">//Optional&lt;Integer&gt; max = li.stream().max((x,y)-&gt;x-y);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Optional</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">max</span> <span style="color:#000">=</span> <span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">max</span>(<span style="color:#000">Integer</span>::<span style="color:#000">compare</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Max:\t\t "</span><span style="color:#000">+</span><span style="color:#000">max</span>);
</span></span><span style="display:flex;"><span>				
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#a90d91">long</span> <span style="color:#000">count</span> <span style="color:#000">=</span> <span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">count</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Count:\t\t "</span><span style="color:#000">+</span><span style="color:#000">count</span>);
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">anyMatch</span> <span style="color:#000">=</span> <span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">anyMatch</span>(<span style="color:#000">x</span> <span style="color:#000">-&gt;</span> <span style="color:#000">x</span><span style="color:#000">==</span><span style="color:#000">100</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"AnyMatch:\t "</span><span style="color:#000">+</span><span style="color:#000">anyMatch</span>);
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Optional</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">findAny</span> <span style="color:#000">=</span> <span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">findAny</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"FindAny:\t "</span><span style="color:#000">+</span><span style="color:#000">findAny</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="terminazione-generalizzata-con-streamcollect">Terminazione generalizzata con <code>Stream.collect</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseGeneralizedCollectors</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">li</span> <span style="color:#000">=</span> <span style="color:#000">List</span>.<span style="color:#836c28">of</span>(<span style="color:#000">10</span>,<span style="color:#000">20</span>,<span style="color:#000">30</span>,<span style="color:#000">5</span>,<span style="color:#000">6</span>,<span style="color:#000">7</span>,<span style="color:#000">10</span>,<span style="color:#000">20</span>,<span style="color:#000">100</span>);
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Uso collect a tre argomenti</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">set</span> <span style="color:#000">=</span> <span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">collect</span>(
</span></span><span style="display:flex;"><span>				()<span style="color:#000">-&gt;</span><span style="color:#a90d91">new</span> <span style="color:#000">HashSet</span><span style="color:#000">&lt;&gt;</span>(), 		<span style="color:#177500">// oggetto collettore</span>
</span></span><span style="display:flex;"><span>				(<span style="color:#000">h</span>,<span style="color:#000">i</span>)<span style="color:#000">-&gt;</span><span style="color:#000">h</span>.<span style="color:#836c28">add</span>(<span style="color:#000">i</span>),			<span style="color:#177500">// aggiunta di un elemento</span>
</span></span><span style="display:flex;"><span>				(<span style="color:#000">h</span>,<span style="color:#000">h2</span>)<span style="color:#000">-&gt;</span><span style="color:#000">h</span>.<span style="color:#836c28">addAll</span>(<span style="color:#000">h2</span>));		<span style="color:#177500">// concatenazione due collettori</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Set: "</span><span style="color:#000">+</span><span style="color:#000">set</span>);    <span style="color:#177500">// un HashSet coi valori dello stream</span>
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Più frequente: uso collect passandogli un collettore general-purpose</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">set2</span> <span style="color:#000">=</span> <span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">collect</span>(<span style="color:#000">Collector</span>.<span style="color:#836c28">of</span>(
</span></span><span style="display:flex;"><span>				<span style="color:#000">HashSet</span>::<span style="color:#a90d91">new</span>, 							<span style="color:#177500">// oggetto collettore</span>
</span></span><span style="display:flex;"><span>				<span style="color:#000">HashSet</span>::<span style="color:#000">add</span>,							<span style="color:#177500">// aggiunta di un elemento</span>
</span></span><span style="display:flex;"><span>				(<span style="color:#000">h</span>,<span style="color:#000">h2</span>)<span style="color:#000">-&gt;</span>{<span style="color:#000">h</span>.<span style="color:#836c28">addAll</span>(<span style="color:#000">h2</span>); <span style="color:#a90d91">return</span> <span style="color:#000">h</span>;}));	<span style="color:#177500">// concatenazione due collettori</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Set: "</span><span style="color:#000">+</span><span style="color:#000">set2</span>);
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// cosa fa questo collettore? (.. un po' complicato)</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">res</span><span style="color:#000">=</span><span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">collect</span>(<span style="color:#000">Collector</span>.<span style="color:#836c28">of</span>(
</span></span><span style="display:flex;"><span>				()<span style="color:#000">-&gt;</span><span style="color:#000">Arrays</span>.<span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span><span style="color:#000">asList</span>(<span style="color:#000">0</span>), 				<span style="color:#177500">// oggetto collettore</span>
</span></span><span style="display:flex;"><span>				(<span style="color:#000">l</span>,<span style="color:#000">i</span>)<span style="color:#000">-&gt;</span><span style="color:#000">l</span>.<span style="color:#836c28">set</span>(<span style="color:#000">0</span>,<span style="color:#000">i</span><span style="color:#000">+</span><span style="color:#000">l</span>.<span style="color:#836c28">get</span>(<span style="color:#000">0</span>)),					<span style="color:#177500">// aggiunta di un elemento</span>
</span></span><span style="display:flex;"><span>				(<span style="color:#000">l</span>,<span style="color:#000">l2</span>)<span style="color:#000">-&gt;</span>{<span style="color:#000">l</span>.<span style="color:#836c28">set</span>(<span style="color:#000">0</span>,<span style="color:#000">l</span>.<span style="color:#836c28">get</span>(<span style="color:#000">0</span>)<span style="color:#000">+</span><span style="color:#000">l2</span>.<span style="color:#836c28">get</span>(<span style="color:#000">0</span>)); <span style="color:#a90d91">return</span> <span style="color:#000">l</span>;}))	<span style="color:#177500">// concatenazione</span>
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">get</span>(<span style="color:#000">0</span>);									<span style="color:#177500">// estrazione risultato</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#c41a16">"Res: "</span><span style="color:#000">+</span><span style="color:#000">res</span>);		
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="collettori-di-libreria-la-classe-collectors">Collettori di libreria: la classe <code>Collectors</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">Collectors</span> { <span style="color:#177500">// some methods, all public static and generic..</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>    <span style="color:#000">Collector</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">?</span>, <span style="color:#000">C</span><span style="color:#000">&gt;</span> <span style="color:#000">toCollection</span>(<span style="color:#000">Supplier</span><span style="color:#000">&lt;</span><span style="color:#000">C</span><span style="color:#000">&gt;</span> <span style="color:#000">collectionFactory</span>) 
</span></span><span style="display:flex;"><span>    <span style="color:#000">Collector</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">?</span>, <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;&gt;</span> <span style="color:#000">toList</span>() 
</span></span><span style="display:flex;"><span>    <span style="color:#000">Collector</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">?</span>, <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;&gt;</span> <span style="color:#000">toSet</span>() 
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#000">Collector</span><span style="color:#000">&lt;</span><span style="color:#000">CharSequence</span>, <span style="color:#000">?</span>, <span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">joining</span>(<span style="color:#000">CharSequence</span> <span style="color:#000">delimiter</span>,
</span></span><span style="display:flex;"><span>                                               <span style="color:#000">CharSequence</span> <span style="color:#000">prefix</span>,
</span></span><span style="display:flex;"><span>                                               <span style="color:#000">CharSequence</span> <span style="color:#000">suffix</span>) 
</span></span><span style="display:flex;"><span>                                                             
</span></span><span style="display:flex;"><span>    <span style="color:#000">Collector</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">?</span>, <span style="color:#000">Optional</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;&gt;</span>  <span style="color:#000">minBy</span>(<span style="color:#000">Comparator</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">comparator</span>) 
</span></span><span style="display:flex;"><span>    <span style="color:#000">Collector</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">?</span>, <span style="color:#000">Optional</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;&gt;</span>  <span style="color:#000">maxBy</span>(<span style="color:#000">Comparator</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">comparator</span>) 
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#000">Collector</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">?</span>, <span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">summingInt</span>(<span style="color:#000">ToIntFunction</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">mapper</span>) 
</span></span><span style="display:flex;"><span>    <span style="color:#000">Collector</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">?</span>, <span style="color:#000">Long</span><span style="color:#000">&gt;</span> <span style="color:#000">summingLong</span>(<span style="color:#000">ToLongFunction</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">mapper</span>)     
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#000">Collector</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">?</span>, <span style="color:#000">Map</span><span style="color:#000">&lt;</span><span style="color:#000">K</span>, <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;&gt;&gt;</span> <span style="color:#000">groupingBy</span>(<span style="color:#000">Function</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span>, <span style="color:#000">?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">K</span><span style="color:#000">&gt;</span> <span style="color:#000">classifier</span>) 
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#000">Collector</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">?</span>, <span style="color:#000">Map</span><span style="color:#000">&lt;</span><span style="color:#000">K</span>, <span style="color:#000">D</span><span style="color:#000">&gt;&gt;</span> <span style="color:#000">groupingBy</span>(<span style="color:#000">Function</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span>, <span style="color:#000">?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">K</span><span style="color:#000">&gt;</span> <span style="color:#000">classifier</span>,
</span></span><span style="display:flex;"><span>                                          <span style="color:#000">Collector</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span>, <span style="color:#000">A</span>, <span style="color:#000">D</span><span style="color:#000">&gt;</span> <span style="color:#000">downstream</span>) 
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#000">Collector</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">?</span>, <span style="color:#000">Map</span><span style="color:#000">&lt;</span><span style="color:#000">K</span>,<span style="color:#000">U</span><span style="color:#000">&gt;&gt;</span> <span style="color:#000">toMap</span>(<span style="color:#000">Function</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span>, <span style="color:#000">?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">K</span><span style="color:#000">&gt;</span> <span style="color:#000">keyMapper</span>,
</span></span><span style="display:flex;"><span>                                    <span style="color:#000">Function</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span>, <span style="color:#000">?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">U</span><span style="color:#000">&gt;</span> <span style="color:#000">valueMapper</span>) 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Collector</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">?</span>, <span style="color:#000">Map</span><span style="color:#000">&lt;</span><span style="color:#000">K</span>,<span style="color:#000">U</span><span style="color:#000">&gt;&gt;</span> <span style="color:#000">toMap</span>(<span style="color:#000">Function</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span>, <span style="color:#000">?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">K</span><span style="color:#000">&gt;</span> <span style="color:#000">keyMapper</span>,
</span></span><span style="display:flex;"><span>                                    <span style="color:#000">Function</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span>, <span style="color:#000">?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">U</span><span style="color:#000">&gt;</span> <span style="color:#000">valueMapper</span>,
</span></span><span style="display:flex;"><span>                                    <span style="color:#000">BinaryOperator</span><span style="color:#000">&lt;</span><span style="color:#000">U</span><span style="color:#000">&gt;</span> <span style="color:#000">mergeFunction</span>) 
</span></span><span style="display:flex;"><span>                                       
</span></span><span style="display:flex;"><span>    <span style="color:#000">Collector</span><span style="color:#000">&lt;</span><span style="color:#000">T</span>, <span style="color:#000">?</span>, <span style="color:#000">DoubleSummaryStatistics</span><span style="color:#000">&gt;</span> 
</span></span><span style="display:flex;"><span>                              <span style="color:#000">summarizingDouble</span>(<span style="color:#000">ToDoubleFunction</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">mapper</span>) 
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span> 
</span></span></code></pre></div></section><section>
<h2 id="usecollectors-collettori-di-base"><code>UseCollectors</code>: collettori di base</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import static</span> <span style="color:#000">java.util.stream.Collectors.*</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseCollectors</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">li</span> <span style="color:#000">=</span> <span style="color:#000">List</span>.<span style="color:#836c28">of</span>(<span style="color:#000">10</span>,<span style="color:#000">20</span>,<span style="color:#000">30</span>,<span style="color:#000">5</span>,<span style="color:#000">6</span>,<span style="color:#000">7</span>,<span style="color:#000">10</span>,<span style="color:#000">20</span>,<span style="color:#000">100</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// una List</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">collect</span>(<span style="color:#000">toList</span>()));
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// un Set</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">collect</span>(<span style="color:#000">toSet</span>())); 
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// un TreeSet</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// System.out.println(li.stream().collect(toCollection(TreeSet::new)));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">collect</span>(<span style="color:#000">minBy</span>(<span style="color:#000">Integer</span>::<span style="color:#000">compare</span>)));
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">collect</span>(<span style="color:#000">summingInt</span>(<span style="color:#000">Number</span>::<span style="color:#000">intValue</span>)).<span style="color:#836c28">toString</span>());
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">map</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">i</span>.<span style="color:#836c28">toString</span>())
</span></span><span style="display:flex;"><span>		                              .<span style="color:#836c28">collect</span>(<span style="color:#000">joining</span>(<span style="color:#c41a16">","</span>,<span style="color:#c41a16">"("</span>,<span style="color:#c41a16">")"</span>)));
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// (10,20,30,5,6,7,10,20,100)</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="usecollectors-collettori-di-base-pt-2"><code>UseCollectors</code>: collettori di base pt 2</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import static</span> <span style="color:#000">java.util.stream.Collectors.*</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseCollectors2</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">li</span> <span style="color:#000">=</span> <span style="color:#000">List</span>.<span style="color:#836c28">of</span>(<span style="color:#000">10</span>,<span style="color:#000">20</span>,<span style="color:#000">30</span>,<span style="color:#000">5</span>,<span style="color:#000">6</span>,<span style="color:#000">7</span>,<span style="color:#000">10</span>,<span style="color:#000">20</span>,<span style="color:#000">100</span>);
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Map</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span>,<span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;&gt;</span> <span style="color:#000">map</span> <span style="color:#000">=</span> <span style="color:#000">li</span>.<span style="color:#836c28">stream</span>()
</span></span><span style="display:flex;"><span>				                                 .<span style="color:#836c28">collect</span>(<span style="color:#000">groupingBy</span>(<span style="color:#000">x</span> <span style="color:#000">-&gt;</span> <span style="color:#000">x</span><span style="color:#000">/</span><span style="color:#000">10</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">map</span>); <span style="color:#177500">// {0=[5,6,7], 1=[10,10], ..}</span>
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Map</span><span style="color:#000">&lt;</span><span style="color:#000">Boolean</span>,<span style="color:#000">Optional</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;&gt;</span> <span style="color:#000">map2</span> <span style="color:#000">=</span> <span style="color:#000">li</span>.<span style="color:#836c28">stream</span>()
</span></span><span style="display:flex;"><span>							.<span style="color:#836c28">collect</span>(<span style="color:#000">groupingBy</span>(<span style="color:#000">x</span><span style="color:#000">-&gt;</span><span style="color:#000">x</span><span style="color:#000">%</span><span style="color:#000">2</span><span style="color:#000">==</span><span style="color:#000">0</span>,<span style="color:#000">minBy</span>(<span style="color:#000">Integer</span>::<span style="color:#000">compare</span>)));
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">map2</span>); <span style="color:#177500">// minimo dei pari e minimo dei dispari</span>
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Map</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span>,<span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">map3</span> <span style="color:#000">=</span> <span style="color:#000">li</span>.<span style="color:#836c28">stream</span>()
</span></span><span style="display:flex;"><span>				                            .<span style="color:#836c28">distinct</span>()
</span></span><span style="display:flex;"><span>				                            .<span style="color:#836c28">collect</span>(<span style="color:#000">toMap</span>(<span style="color:#000">x</span><span style="color:#000">-&gt;</span><span style="color:#000">x</span>,<span style="color:#000">x</span><span style="color:#000">-&gt;</span><span style="color:#000">x</span><span style="color:#000">+</span><span style="color:#000">1</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">map3</span>); <span style="color:#177500">// mappa ogni x in x+1</span>
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Map</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span>,<span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">map4</span> <span style="color:#000">=</span> <span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">collect</span>(<span style="color:#000">toMap</span>(<span style="color:#000">x</span><span style="color:#000">-&gt;</span><span style="color:#000">x</span><span style="color:#000">/</span><span style="color:#000">10</span>,<span style="color:#000">x</span><span style="color:#000">-&gt;</span><span style="color:#000">x</span>,(<span style="color:#000">x</span>,<span style="color:#000">y</span>)<span style="color:#000">-&gt;</span><span style="color:#000">x</span><span style="color:#000">+</span><span style="color:#000">y</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">map4</span>); <span style="color:#177500">// somma degli elementi in ogni decina</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">li</span>.<span style="color:#836c28">stream</span>().<span style="color:#836c28">collect</span>(<span style="color:#000">summarizingInt</span>(<span style="color:#000">Number</span>::<span style="color:#000">intValue</span>)).<span style="color:#836c28">toString</span>());		
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section><section>
<h2 id="esempi-avanzati-su-person">Esempi avanzati su <code>Person</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Person</span><span style="color:#000">&gt;</span> <span style="color:#000">list</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayList</span><span style="color:#000">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">list</span>.<span style="color:#836c28">add</span>(<span style="color:#a90d91">new</span> <span style="color:#000">Person</span>(<span style="color:#c41a16">"Mario"</span>,<span style="color:#c41a16">"Cesena"</span>,<span style="color:#000">20000</span>,<span style="color:#c41a16">"Teacher"</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#000">list</span>.<span style="color:#836c28">add</span>(<span style="color:#a90d91">new</span> <span style="color:#000">Person</span>(<span style="color:#c41a16">"Rino"</span>,<span style="color:#c41a16">"Forlì"</span>,<span style="color:#000">50000</span>,<span style="color:#c41a16">"Professor"</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#000">list</span>.<span style="color:#836c28">add</span>(<span style="color:#a90d91">new</span> <span style="color:#000">Person</span>(<span style="color:#c41a16">"Lino"</span>,<span style="color:#c41a16">"Cesena"</span>,<span style="color:#000">110000</span>,<span style="color:#c41a16">"Professor"</span>,<span style="color:#c41a16">"Dean"</span>,<span style="color:#c41a16">"Secretary"</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#000">list</span>.<span style="color:#836c28">add</span>(<span style="color:#a90d91">new</span> <span style="color:#000">Person</span>(<span style="color:#c41a16">"Ugo"</span>,<span style="color:#c41a16">"Cesena"</span>,<span style="color:#000">20000</span>,<span style="color:#c41a16">"Secretary"</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#000">list</span>.<span style="color:#836c28">add</span>(<span style="color:#a90d91">new</span> <span style="color:#000">Person</span>(<span style="color:#c41a16">"Marco"</span>,<span style="color:#a90d91">null</span>,<span style="color:#000">4000</span>,<span style="color:#c41a16">"Contractor"</span>));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Jobs of people from Cesena</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">res</span> <span style="color:#000">=</span> 
</span></span><span style="display:flex;"><span>				<span style="color:#000">list</span>.<span style="color:#836c28">stream</span>()
</span></span><span style="display:flex;"><span>				    .<span style="color:#836c28">filter</span>(<span style="color:#000">p</span><span style="color:#000">-&gt;</span><span style="color:#000">p</span>.<span style="color:#836c28">getCity</span>().<span style="color:#836c28">filter</span>(<span style="color:#000">x</span><span style="color:#000">-&gt;</span><span style="color:#000">x</span>.<span style="color:#836c28">equals</span>(<span style="color:#c41a16">"Cesena"</span>)).<span style="color:#836c28">isPresent</span>())
</span></span><span style="display:flex;"><span>					.<span style="color:#836c28">flatMap</span>(<span style="color:#000">p</span><span style="color:#000">-&gt;</span><span style="color:#000">p</span>.<span style="color:#836c28">getJobs</span>().<span style="color:#836c28">stream</span>())
</span></span><span style="display:flex;"><span>					.<span style="color:#836c28">distinct</span>()
</span></span><span style="display:flex;"><span>					.<span style="color:#836c28">collect</span>(<span style="color:#000">Collectors</span>.<span style="color:#836c28">joining</span>(<span style="color:#c41a16">"|"</span>, <span style="color:#c41a16">"[["</span>, <span style="color:#c41a16">"]]"</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">res</span>);
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Average income of professors</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#a90d91">double</span> <span style="color:#000">avg</span> <span style="color:#000">=</span> 
</span></span><span style="display:flex;"><span>				<span style="color:#000">list</span>.<span style="color:#836c28">stream</span>()
</span></span><span style="display:flex;"><span>				    .<span style="color:#836c28">filter</span>(<span style="color:#000">p</span><span style="color:#000">-&gt;</span><span style="color:#000">p</span>.<span style="color:#836c28">getJobs</span>().<span style="color:#836c28">contains</span>(<span style="color:#c41a16">"Professor"</span>))
</span></span><span style="display:flex;"><span>					.<span style="color:#836c28">mapToDouble</span>(<span style="color:#000">Person</span>::<span style="color:#000">getIncome</span>)
</span></span><span style="display:flex;"><span>					.<span style="color:#836c28">average</span>().<span style="color:#836c28">getAsDouble</span>();
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(<span style="color:#000">avg</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(
</span></span><span style="display:flex;"><span>				<span style="color:#000">list</span>.<span style="color:#836c28">stream</span>()
</span></span><span style="display:flex;"><span>				    .<span style="color:#836c28">filter</span>(<span style="color:#000">p</span><span style="color:#000">-&gt;</span><span style="color:#000">p</span>.<span style="color:#836c28">getJobs</span>().<span style="color:#836c28">contains</span>(<span style="color:#c41a16">"Professor"</span>))
</span></span><span style="display:flex;"><span>				    .<span style="color:#836c28">mapToDouble</span>(<span style="color:#000">Person</span>::<span style="color:#000">getIncome</span>).<span style="color:#836c28">average</span>());
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}   
</span></span></code></pre></div></section><section>
<h2 id="algoritmi-funzionali--cosa-realizzano">Algoritmi funzionali – cosa realizzano?</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseStreamsForAlgorithms</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span>(<span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(
</span></span><span style="display:flex;"><span>			<span style="color:#000">LongStream</span>.<span style="color:#836c28">iterate</span>(<span style="color:#000">2</span>, <span style="color:#000">x</span><span style="color:#000">-&gt;</span><span style="color:#000">x</span><span style="color:#000">+</span><span style="color:#000">1</span>)
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">filter</span>((<span style="color:#000">i</span>)<span style="color:#000">-&gt;</span><span style="color:#000">LongStream</span>.<span style="color:#836c28">range</span>(<span style="color:#000">2</span>, <span style="color:#000">i</span><span style="color:#000">/</span><span style="color:#000">2</span><span style="color:#000">+</span><span style="color:#000">1</span>).<span style="color:#836c28">noneMatch</span>(<span style="color:#000">j</span> <span style="color:#000">-&gt;</span> <span style="color:#000">i</span><span style="color:#000">%</span><span style="color:#000">j</span><span style="color:#000">==</span><span style="color:#000">0</span>))
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">limit</span>(<span style="color:#000">1000</span>)
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">mapToObj</span>(<span style="color:#000">String</span>::<span style="color:#000">valueOf</span>)
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">collect</span>(<span style="color:#000">Collectors</span>.<span style="color:#836c28">joining</span>(<span style="color:#c41a16">","</span>,<span style="color:#c41a16">"["</span>,<span style="color:#c41a16">"]"</span>)));
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Random</span> <span style="color:#000">r</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Random</span>();
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(
</span></span><span style="display:flex;"><span>			<span style="color:#000">IntStream</span>.<span style="color:#836c28">range</span>(<span style="color:#000">0</span>, <span style="color:#000">10000</span>)
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">map</span>(<span style="color:#000">i</span><span style="color:#000">-&gt;</span><span style="color:#000">r</span>.<span style="color:#836c28">nextInt</span>(<span style="color:#000">6</span>)<span style="color:#000">+</span><span style="color:#000">r</span>.<span style="color:#836c28">nextInt</span>(<span style="color:#000">6</span>)<span style="color:#000">+</span><span style="color:#000">2</span>)
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">boxed</span>() <span style="color:#177500">// da int a Integer</span>
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">collect</span>(<span style="color:#000">groupingBy</span>(<span style="color:#000">x</span><span style="color:#000">-&gt;</span><span style="color:#000">x</span>, <span style="color:#000">collectingAndThen</span>(<span style="color:#000">counting</span>(), <span style="color:#000">d</span><span style="color:#000">-&gt;</span><span style="color:#000">d</span><span style="color:#000">/</span><span style="color:#000">10000</span>.<span style="color:#836c28">0</span>))));
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span>.<span style="color:#836c28">out</span>.<span style="color:#836c28">println</span>(
</span></span><span style="display:flex;"><span>			<span style="color:#c41a16">"Prova di testo: indovina cosa produce la seguente computazione......"</span>
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">chars</span>()
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">mapToObj</span>(<span style="color:#000">x</span><span style="color:#000">-&gt;</span><span style="color:#000">String</span>.<span style="color:#836c28">valueOf</span>((<span style="color:#a90d91">char</span>)<span style="color:#000">x</span>))
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">collect</span>(<span style="color:#000">groupingBy</span>(<span style="color:#000">x</span><span style="color:#000">-&gt;</span><span style="color:#000">x</span>,<span style="color:#000">counting</span>()))
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">entrySet</span>()
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">stream</span>()
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">sorted</span>((<span style="color:#000">e1</span>,<span style="color:#000">e2</span>)<span style="color:#000">-&gt;-</span><span style="color:#000">Long</span>.<span style="color:#836c28">compare</span>(<span style="color:#000">e1</span>.<span style="color:#836c28">getValue</span>(),<span style="color:#000">e2</span>.<span style="color:#836c28">getValue</span>()))
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">limit</span>(<span style="color:#000">3</span>)
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">map</span>(<span style="color:#000">String</span>::<span style="color:#000">valueOf</span>)
</span></span><span style="display:flex;"><span>				.<span style="color:#836c28">collect</span>(<span style="color:#000">Collectors</span>.<span style="color:#836c28">joining</span>(<span style="color:#c41a16">","</span>,<span style="color:#c41a16">"["</span>,<span style="color:#c41a16">"]"</span>)));
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}   
</span></span></code></pre></div></section>

  


</div>
      

    </div>
<script type="text/javascript" src="/reveal-hugo/object-assign.js"></script>

<a href="/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"900","highlight_theme":"default","history":true,"mermaid":[{"startOnLoad":false}],"slide_number":true,"theme":"white","transition":"slide","transition_speed":"fast","width":"1440"}</script>
<script type="application/json" id="reveal-hugo-page-params">null</script>

<script src="/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }

  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = {
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>







  
  

  
  

  
  

  
  

  
  

  
  

  
    
  
  

  
    
  
  

  
  

  
    
  
  

  
  

  
    
  
  

  
  

  
  

  
    
  
  

  
    
  
  

  
  

  
  

  
    
  
  

  
    
  
  

  
  

  
  

  
  

  
    
  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



  <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.3/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({"startOnLoad":false});

    let render = (event) => {
      let mermaidElems = event.currentSlide.querySelectorAll('.mermaid');
      if (!mermaidElems.length){
          return
      }
      mermaidElems.forEach(mermaidElem => {
          let processed = mermaidElem.getAttribute('data-processed');
          if (!processed){
              
              mermaid.init(undefined, mermaidElem);
          }
      });
    };
    
    render({currentSlide: Reveal.getCurrentSlide()});

    Reveal.on('slidechanged', render);
    Reveal.on('ready', render);
  </script>



    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<script>
  if (/.*?(\?|&)print-pdf/.test(window.location.toString())) {
      var ytVideos = document.getElementsByTagName("iframe")
      for (let i = 0; i < ytVideos.length; i++) {
          var videoFrame = ytVideos[i]
          var isYouTube = /^https?:\/\/(www.)youtube\.com\/.*/.test(videoFrame.src)
          if (isYouTube) {
              console.log(`Removing ${videoFrame.src}`)
              var parent = videoFrame.parentElement
              videoFrame.remove()
              var p = document.createElement('p')
              p.append(
                  document.createTextNode(
                      "There was an embedded video here, but it is disabled in the printed version of the slides."
                  )
              )
              p.append(document.createElement('br'))
              p.append(
                  document.createTextNode(
                      `Visit instead ${
                          videoFrame.src
                      } or ${
                          videoFrame.src.replace(
                              /(^https?:\/\/(www.)youtube\.com)\/(embed\/)(\w+).*/,
                              "https://www.youtube.com/watch?v=$4"
                          )
                      }`
                  )
              )
              parent.appendChild(p)
          }
      }
  }
</script>

    
  

</body></html>