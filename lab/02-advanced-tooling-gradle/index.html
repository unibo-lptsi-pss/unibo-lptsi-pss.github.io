<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
<title>Progettazione e Sviluppo del Software</title>
<meta name="description" content="Progettazione e Sviluppo del Software, Tecnologie dei Sistemi Informatici">
<meta name="author" content="Danilo Pianini">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/css/custom-theme.min.b14bd2cb8ebd9f5aadd1914151911df5ab7b2264253b1df19c307933796d5e56.css" id="theme"><link rel="stylesheet" href="/highlight-js/default.min.css">
    
<link rel="stylesheet" href="https://gitcdn.link/repo/DanySK/css-blur-animation/master/blur.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="strumenti-di-compilazione-avanzati">Strumenti di compilazione avanzati</h1>
<h3 id="esercizi-e-soluzioni-httpsgithubcomunibo-lptsi-psspss-labreleaseslatest">Esercizi e soluzioni: <a href="https://github.com/unibo-lptsi-pss/pss-lab/releases/latest/">https://github.com/unibo-lptsi-pss/pss-lab/releases/latest/</a></h3>
<h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="roberto-casadei-----robycasadeiuniboitmailtorobycasadeiuniboit"><a href="mailto:roby.casadei@unibo.it">Roberto Casadei — <code>roby.casadei@unibo.it</code></a></h3>
<h3 id="danilo-pianini-----danilopianiniuniboitmailtodanilopianiniuniboit"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini — <code>danilo.pianini@unibo.it</code></a></h3>
<p><a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
</section><section>
<h2 id="nota">Nota</h2>
<ul>
<li>
<p>Questo materiale è ampiamente basato su quello realizzato dal Prof.
Mirko Viroli, che ringrazio.</p>
</li>
<li>
<p>Ogni errore riscontratovi è esclusiva responsabilità degli autori di questo documento.</p>
</li>
</ul>
<h2 id="pre-requisiti">Pre-requisiti</h2>
<ul>
<li>Rudimenti di programmazione e codifica</li>
<li>Nozioni di base dei filesystem
<ul>
<li>percorsi assoluti e relativi</li>
</ul>
</li>
<li>Utilizzo del terminale
<ul>
<li>interazione con il file system attraverso terminale (navigazione; concetto di working directory; etc.)</li>
</ul>
</li>
<li>Compilazione ed esecuzione di base di programmi Java
<ul>
<li>uso basilare dei comandi <code>javac</code> e <code>java</code></li>
<li>distinzione tra file sorgenti (<code>.java</code>) e file di classi compilate (<code>.class</code>)</li>
<li>concetto di <strong>programma/applicazione</strong> in Java</li>
</ul>
</li>
<li>Il concetto di <strong>package</strong> in Java
<ul>
<li>contenitore (organizzato gerarchicamente) di tipi (ad es. classi) che funge da namespace e permette controllo degli accessi ai tipi contenuti</li>
</ul>
</li>
</ul>
</section><section>
<h1 id="stili-e-convenzioni-per-il-codice-sorgente">Stili e Convenzioni per il codice sorgente</h1>
</section><section>
<h2 id="stili-e-convenzioni">Stili e Convenzioni</h2>
<ul>
<li>Il codice sorgente che un programmatore scrive, generalmente è condiviso con altre persone (del proprio team, ma anche persone esterne al team o la community)
<ul>
<li>è importante scrivere software immediatamente comprensibile</li>
<li>il fatto che un software “giri” (rispetti i requisiti e/o produca i risultati attesi) non è una sufficente metrica di qualità</li>
</ul>
</li>
<li>è importante, fondamentale, adottare uno stile e seguirlo
<ul>
<li>chiaro</li>
<li>condiviso</li>
<li>consistente</li>
</ul>
</li>
</ul>
<blockquote>
<p>Always code as if the guy who ends up maintaining your code will be a violent psychopath who knows where you live. Code for readability.
<cite>John Woods [disputed]}</cite></p>
</blockquote>
</section><section>
<h2 id="ogni-linguaggio-ha-le-sue-prassi">Ogni linguaggio ha le sue prassi…</h2>
<ul>
<li>Quelle Java di riferimento sono disponibili qui:
<ul>
<li><a href="http://bit.ly/java-style-guide">http://bit.ly/java-style-guide</a></li>
<li><a href="http://bit.ly/java-code-conventions">http://bit.ly/java-code-conventions</a></li>
<li><a href="http://bit.ly/oracle-java-code-conventions">http://bit.ly/oracle-java-code-conventions</a></li>
</ul>
</li>
</ul>
<h2 id="ogni-azienda-poi-è-libera-di-darsi-altre-regole-interne">Ogni azienda poi è libera di darsi altre regole interne</h2>
<ul>
<li>
<p>Ad esempio:</p>
<ul>
<li>Google: <a href="http://archive.is/a0Jhz">http://archive.is/a0Jhz</a></li>
<li>Twitter: <a href="http://archive.is/aa1tE">http://archive.is/aa1tE</a></li>
<li>Mozilla: <a href="http://archive.is/rs3Ns">http://archive.is/rs3Ns</a></li>
</ul>
</li>
<li>
<p>Notare che sono sempre <strong>consistenti</strong>!</p>
</li>
<li>
<p>E che sono tipicamente restrizioni delle convenzioni, non modifiche!
<strong>Nel corso faremo riferimento alle Java Code Conventions (con qualche vincolo in più)</strong></p>
</li>
</ul>
</section><section>
<h2 id="java-code-conventions-un-estratto">Java Code Conventions (un estratto)</h2>
<h3 id="usare-sempre-le-parentesi-per-if-else-for-while-anche-se-segue-una-sola-istruzione">Usare sempre le parentesi per if, else, for, while, anche se segue una sola istruzione</h3>
<ul>
<li>Aumentano la manutenibilità del codice</li>
<li>È facile che nella fretta si modifichi il codice in modo sbagliato</li>
<li>È facile che alcuni tool automatici sbaglino quando “uniscono” pezzi di codice scritti da diverse persone</li>
<li>Apple iOS soffrì di un grave bug a SSL/TLS causato da questa cattiva pratica <a href="http://archive.is/KQp8E">http://archive.is/KQp8E</a></li>
</ul>
<h3 id="le-parentesi-graffe-vanno-sempre-allegiziana-egyptian-brackets">Le parentesi graffe vanno sempre “all’egiziana” (Egyptian brackets)</h3>
<ul>
<li>La graffa che apre va in linea con lo statement di apertura</li>
<li>La graffa che chiude va in a capo, nella stessa colonna dello statement di apertura</li>
</ul>
<h3 id="naming-conventions---molto-importanti">Naming conventions - <strong>molto importanti!</strong></h3>
<ul>
<li>I nomi di <code>package</code> usano sempre e solo lettere minuscole</li>
<li>Usare sempre <code>camelCase</code>, evitare gli underscore (_)</li>
<li>I nomi di classe cominciano sempre per maiuscola ed usano <code>PascalCase</code></li>
<li>I nomi di campi, metodi e variabili locali iniziano sempre per minuscola</li>
<li>I campi <code>static final</code> (costanti di classe) sono interamente maiuscoli e possono usare underscore</li>
</ul>
</section><section>
<h1 id="compilazione-ed-esecuzione-avanzata-in-java">Compilazione ed esecuzione avanzata in Java</h1>
</section><section>
<h2 id="nuova-opzione-per-javac">Nuova opzione per <code>javac</code></h2>
<ul>
<li>Abbiamo già visto come compilare file sorgenti Java (file <code>.java</code>), generando classi in bytecode, che prendono la forma di file <code>.class</code> nella medesima directory</li>
<li>Tuttavia è uso comune e <strong>buona pratica</strong> nella gestione di progetti articolati, <strong>separare le classi sorgenti dal bytecode</strong>, ad esempio:
<ul>
<li>cartella <code>src</code>, per i file sorgenti (<code>.java</code>)</li>
<li>cartella <code>bin</code>, contenente le classi compilate (<code>.class</code>)
<ul>
<li>Come si fa?</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="nuova-opzione-del-comando-javac">Nuova opzione del comando <code>javac</code></h3>
<ul>
<li><code>-d</code>: consente di specificare la cartella destinazione in cui compilare i file <code>.java</code></li>
<li>Si tratta di un’opzione che dovete obbligatoriamente saper usare</li>
</ul>
</section><section>
<h2 id="compilazione-di-più-file-da-qualunque-directory-verso-una-qualunque-directory">Compilazione di più file da qualunque directory verso una qualunque directory</h2>
<h3 id="compilazione-in-directory-arbitrarie">Compilazione in directory arbitrarie</h3>
<ul>
<li><code>javac -d &lt;CARTELLA DESTINAZIONE&gt; &lt;FILE JAVA&gt;</code></li>
<li><strong>OVVIAMENTE</strong> vanno sostituite le variabili fra parentesi angolari con le
directory che andranno usate.</li>
</ul>
<h3 id="compilazione-di-più-file-in-una-singola-passata">Compilazione di più file in una singola passata</h3>
<ul>
<li><code>javac -d &lt;CARTELLA DESTINAZIONE&gt; &lt;ELENCO DI FILE JAVA&gt;</code></li>
<li><strong>OVVIAMENTE</strong> vanno sostituite le variabili fra parentesi angolari con le
directory che andranno usate.</li>
</ul>
<p>È possibile anche utilizzare la wildcard (<code>*</code>) invece di elencare tutti i file!</p>
<ul>
<li>Su Unix si possono usare wildcard in più punti del path, ad esempio
<code>progetti/*/src/*.java</code> elenca tutti i file con estensione java dentro ciascuna cartella
<code>src</code> di ciascuna cartella dentro <code>progetti</code></li>
</ul>
</section><section>
<h2 id="il-classpath-in-java">Il classpath in Java</h2>
<ul>
<li>Il risultato della compilazione di sorgenti Java sono una o più <strong>classi</strong></li>
<li>Quando si va ad eseguire (comando <code>java</code>), si eseguono <strong>classi</strong>, non files
<ul>
<li>Infatti la virtual machine si aspetta il nome completo di una classe, il <strong>Fully-Qualified Class Name (FQCN)</strong>, in input
<ul>
<li>Non il file dov’è scritta</li>
<li>Né il file dov’è compilata</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="come-fa-la-jvm-a-risolvere-le-classi">Come fa la JVM a risolvere le classi?</h3>
<ul>
<li>Possiede un elenco di percorsi che contengono i file compilati
<ul>
<li>All’interno di questi percorsi, i file devono essere opportunamente organizzati</li>
<li>Ad esempio, la struttura delle cartelle deve replicare quella dei package</li>
</ul>
</li>
<li>Cerca (in ordine) nei suddetti percorsi la classe che gli serve</li>
<li>I percorsi possono essere directory, file compressi, o indirizzi di rete</li>
<li>Per approfondire: <a href="http://archive.is/0ziau">http://archive.is/0ziau</a></li>
</ul>
<p>L’insieme <em>ordinato</em> dei percorsi prende il nome di <strong>classpath</strong></p>
</section><section>
<h2 id="default-classpath">Default classpath</h2>
<p>Se non specificato, il classpath di Java include automaticamente:</p>
<ul>
<li>I file jar del Java Runtime Environment
<ul>
<li><code>rt.jar</code> ed altri file importanti</li>
<li>Contengono ad esempio <code>java.lang.Math</code></li>
</ul>
</li>
<li>La directory corrente</li>
</ul>
</section><section>
<h2 id="aggiungere-directory-al-classpath">Aggiungere directory al classpath</h2>
<p>Possono essere aggiunte directory al classpath</p>
<ul>
<li>Si usa l’opzione <code>-cp</code> (o, equivalentemente, <code>-classpath</code>), seguita da un elenco di percorsi
<ul>
<li>separati dal simbolo <code>:</code> (Unix)</li>
<li>o dal simbolo <code>;</code> (Windows)</li>
<li>Per evitare problemi con simboli e percorsi, conviene circondare l’intero classpath con doppi apici (<code>"</code>)</li>
</ul>
</li>
</ul>
</section><section>
<h2 id="più-cartelle-nel-classpath">Più cartelle nel classpath</h2>
<p>Il classpath non è composto da una sola cartella, ma può contenere più cartelle, oltre a file compressi contenenti bytecode e risorse, come zip o jar (li vedremo in futuro).</p>
<p>Si possono specificare più cartelle utilizzando come separatore il simbolo “<code>:</code>” (per sistemi Unix) oppure “<code>;</code>” (per sistemi Windows)</p>
<ul>
<li><code>javac -d bin -cp "lib1:lib2:lib3" src/*.java</code>
<ul>
<li>Compila tutti i file con estensione java che si trovano nella cartella <code>src</code>, mettendo i compilati dentro <code>bin</code>. In compilazione, potrà linkare tutte le classi che si trovano nelle cartelle <code>lib1</code>, <code>lib2</code> e <code>lib3</code>: nel caso in cui alcuni sorgenti in src stiano usando delle classi definite dentro queste cartelle, la compilazione avrà successo.
<ul>
<li>Equivalente Windows: <code>javac -d bin -cp "lib1;lib2;lib3" src/*.java</code></li>
</ul>
</li>
</ul>
</li>
<li><code>java -cp "bin:lib1:lib2:lib3" MyClass</code>
<ul>
<li>Esegue il main della classe <code>MyClass</code>. Cercherà questa classe e tutte quelle collegate all’interno delle cartelle <code>bin</code>, <code>lib1</code>, <code>lib2</code> e <code>lib3</code>.</li>
<li>Equivalente Windows: <code>java -cp "bin;lib1;lib2;lib3" MyClass</code></li>
</ul>
</li>
</ul>
</section><section>
<h2 id="organizzazione-dei-sorgenti-in-presenza-di-package">Organizzazione dei sorgenti in presenza di package</h2>
<p>È buona norma organizzare i sorgenti in modo da rappresentare su filesystem la struttura
dei package. Si noti però che (dato che il compilatore lavora su <em><strong>file</strong></em>) questa scelta
<strong>non è \underline{teoricamente} obbligatoria</strong>!</p>
<ul>
<li>Lo è di fatto in questo corso, perché le cose van fatte bene</li>
<li>Lo sarà nel mondo del lavoro, perché è prassi assolutamente comune</li>
</ul>
<h3 id="risultato-della-compilazione">Risultato della compilazione</h3>
<p>Quando ad essere compilata è una classe dichiarata in un package, il compilatore
<strong>riproduce la struttura dei package usando delle directory</strong></p>
<p>Dato che l’interprete non lavora con file ma con <em><strong>classi</strong></em>, il loro layout
sul file system <strong>non può essere modificato!</strong></p>
<h3 id="esecuzione">Esecuzione</h3>
<p>L’esecuzione è identica al caso precedente, si faccia solo attenzione ad
usare l’intero nome della classe, che in Java include anche il nome del package!</p>
</section><section>
<h2 id="uso-del-classpath-in-fase-di-compilazione">Uso del classpath in fase di compilazione</h2>
<p>Supponiamo di avere in mano la seguente classe:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">package</span> <span style="color:#000">it.unibo.compilation.math</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseComplex</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">final</span> <span style="color:#000">ComplexNum</span> <span style="color:#000">c1</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">ComplexNum</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">c1</span><span style="color:#000">.</span><span style="color:#836c28">build</span><span style="color:#000">(</span><span style="color:#000">1</span><span style="color:#000">,</span> <span style="color:#000">-</span><span style="color:#000">45</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">final</span> <span style="color:#000">ComplexNum</span> <span style="color:#000">c2</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">ComplexNum</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">c2</span><span style="color:#000">.</span><span style="color:#836c28">build</span><span style="color:#000">(</span><span style="color:#000">2</span><span style="color:#000">,</span> <span style="color:#000">8</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">c1</span><span style="color:#000">.</span><span style="color:#836c28">toStringRep</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">c2</span><span style="color:#000">.</span><span style="color:#836c28">toStringRep</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">c1</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">c2</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"c1 new value is: "</span> <span style="color:#000">+</span> <span style="color:#000">c1</span><span style="color:#000">.</span><span style="color:#836c28">toStringRep</span><span style="color:#000">()</span> <span style="color:#000">+</span> <span style="color:#c41a16">"\n"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="comprensione-degli-errori">Comprensione degli errori</h2>
<p>Se provassimo a compilarla, otterremmo degli errori</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>src\oop\lab2\math\UseComplex.java:6: error: cannot find symbol
</span></span><span style="display:flex;"><span>    ComplexNum c1 = new ComplexNum();
</span></span><span style="display:flex;"><span>    ^
</span></span><span style="display:flex;"><span>  symbol:   class ComplexNum
</span></span><span style="display:flex;"><span>  location: class UseComplex
</span></span><span style="display:flex;"><span>src\oop\lab2\math\UseComplex.java:6: error: cannot find symbol
</span></span><span style="display:flex;"><span>    ComplexNum c1 = new ComplexNum();
</span></span><span style="display:flex;"><span>                        ^
</span></span><span style="display:flex;"><span>  symbol:   class ComplexNum
</span></span><span style="display:flex;"><span>  location: class UseComplex
</span></span><span style="display:flex;"><span>src\oop\lab2\math\UseComplex.java:8: error: cannot find symbol
</span></span><span style="display:flex;"><span>    ComplexNum c2 = new ComplexNum();
</span></span><span style="display:flex;"><span>    ^
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><ul>
<li>Il compilatore ha bisogno di conoscere la classe <code>ComplexNum</code> per poterla
linkare e per poter compilare una classe che la riferisce</li>
<li>Il compilatore cerca nel classpath il bytecode della classe <code>ComplexNum</code></li>
<li>Come risolviamo?</li>
</ul>
</section><section>
<h2 id="utilizzo-di--cp-in-fase-di-compilazione">Utilizzo di <code>-cp</code> in fase di compilazione</h2>
<p>Supponiamo di avere solo la versione compilata di <code>ComplexNum</code> (ovvero non il sorgente)</p>
<ul>
<li>Notate che questa è la <em>norma</em> quando si usano delle librerie: vengono fornite già compilate!</li>
<li>Basterà mettere il percorso in cui <code>ComplexNum</code> è stata compilata nel
classpath di <code>javac</code>!</li>
<li>Supponiamo di avere <code>UseComplex.java</code> nel percorso <code>src/oop/lab02/math/</code></li>
<li>Supponiamo di aver <code>ComplexNum</code> compilato dentro <code>lib/</code></li>
<li>Possiamo usare:</li>
</ul>
<h4 id="javac--d-bin--cp-lib-srcooplab02mathusecomplexjava"><code>javac -d bin -cp lib src/oop/lab02/math/UseComplex.java</code></h4>
</section><section>
<h2 id="spiegazione-del-comando">Spiegazione del comando</h2>
<p><code>javac -d bin -cp lib src/oop/lab02/math/UseComplex.java</code></p>
<ul>
<li><code>javac</code> $\Rightarrow$ Invocazione del compilatore</li>
<li><code>-d bin</code> $\Rightarrow$ <code>-d</code> determina la <strong>destinazione</strong>.
Vogliamo compilare dentro la cartella <code>bin</code></li>
<li><code>-cp lib</code> $\Rightarrow$ <code>-cp</code> consente di aggiungere percorsi al
<strong>classpath</strong>. Noi vogliamo cercare le classi che ci servono, oltre che nella
posizione corrente e nelle librerie java, anche dentro <code>lib</code></li>
<li><code>src/oop/lab02/math/UseComplex.java</code> $\Rightarrow$ Il <em>file</em> che
vogliamo compilare</li>
</ul>
</section><section>
<h2 id="passare-più-percorsi-al-classpath">Passare più percorsi al classpath</h2>
<p>Avendo come riferimento l’esempio precedente, proviamo ad eseguire.</p>
<ul>
<li>Per eseguire correttamente <code>UseComplex</code> dobbiamo dire alla JVM, tramite
<code>-cp</code>, dove trovare:
<ul>
<li><code>ComplexNum</code> (classe, non file)</li>
<li><code>UseComplex</code> (classe, non file)</li>
</ul>
</li>
</ul>
<p>Si trovano in <em>due percorsi diversi</em>!</p>
<ul>
<li>
<p>Dobbiamo specificare come argomento di <code>-cp</code> due percorsi, usando il <strong>separatore</strong>:</p>
<ul>
<li><strong><code>:</code></strong> su sistemi UNIX (Linux, Mac OSX, BSD)</li>
<li><strong><code>;</code></strong> su sistemi Windows</li>
</ul>
</li>
<li>
<p>Useremo quindi:</p>
<ul>
<li><code>java -cp bin:lib oop.lab02.math.UseComplex</code> (Unix)</li>
<li><code>java -cp bin;lib oop.lab02.math.UseComplex</code> (Windows)</li>
</ul>
</li>
</ul>
</section><section>
<h2 id="consiglio-finale">Consiglio finale</h2>
<p>Visto che all’esame il loro utilizzo è richiesto, è necessario imparare <strong>a memoria</strong> le opzioni di <code>java</code> e <code>javac</code>?</p>
<div style="text-align: center;">
  <h1><b>NO</b></h1>
</div>
<p>Entrambi i comandi (e praticamente tutti i comandi Unix) hanno con loro un’opzione che consente di stampare a video un help. Provate:</p>
<ul>
<li><code>java -help</code></li>
<li><code>javac -help</code></li>
</ul>
<p>Gli help stampano abbondante testo con le relative istruzioni e a me serve una riga, davvero <em>devo imparare a leggere e capire uno help</em>?</p>
<div style="text-align: center;">
  <h1><b>SI</b></h1>
</div>
È molto facile dimenticarsi la sintassi delle opzioni di comandi che non si usano spesso. È molto più facile imparare a destreggiarsi in un help che andare a tentativi o ricordare cose a memoria.
</section><section>
<h1 id="build-systems">Build systems</h1>
</section><section>
<h2 id="quando-il-gioco-si-fa-duro-i-duri-automatizzano">Quando il gioco si fa duro, i duri <em>automatizzano</em></h2>
<p>La gestione della compilazione potrebbe diventare complicata:</p>
<ul>
<li>Sorgenti in molte cartelle</li>
<li>Divisi in molti package</li>
<li>Alcune librerie binarie di cui non abbiamo il sorgente</li>
</ul>
<p>Comandi <strong>molto lunghi!</strong> Facile sbagliarsi, tedioso da fare a mano!</p>
<p>Soluzione: costruire degli script!</p>
</section><section>
<h2 id="script-per-compilare">Script per compilare?</h2>
<p>In fin dei conti, è solo software che, di mestiere, compila software</p>
<p>…a sua volta, da compilare o interpretare.</p>
<p>Fare uno script personalizzato è molto flessibile, ma se abbiamo <em>molti progetti</em>?</p>
<ul>
<li>Copiarlo da tutte le parti vuol dire doverlo modificare in molti posti in caso di errore!</li>
<li>Viola un principio importante: <strong>Don’t Repeat Yourself</strong> (<strong>DRY</strong>)</li>
</ul>
<h4 id="la-compilazione-è-ripetitiva">La compilazione è <strong>ripetitiva</strong>!</h4>
<p>Potremmo costruire un sistema che:</p>
<ol>
<li>Si aspetta che i sorgenti siano in un posto standard
<ul>
<li>Se li trova, allora compila, mettendo il risultato in un posto standard</li>
</ul>
</li>
<li>Se sono in un posto non standard, si <em>configura</em> per funzionare</li>
</ol>
<h4 id="principio-convention-over-configuration">Principio <strong>convention over configuration</strong></h4>
</section><section>
<h2 id="build-systems-1">Build systems</h2>
<p>Sono software che si occupano di aiutare con le varie fasi della costruzione del software:</p>
<ul>
<li>Ricerca e scaricamento di librerie (vediamo in futuro)</li>
<li>Compilazione (vediamo oggi)</li>
<li>Testing (vediamo in futuro)</li>
<li>Packaging (vediamo in futuro)</li>
<li>Generazione di documentazione (vediamo in futuro)</li>
<li>Delivery degli artefatti (non oggetto del corso)</li>
</ul>
<h2 id="gradle">Gradle</h2>
<ul>
<li>Un <strong>moderno</strong> build system</li>
<li>Supporta Java (oltre a C/C++, Scala, Kotlin…)
<ul>
<li>In tutto l’ecosistema, che include Android</li>
</ul>
</li>
<li>Ne vedremo solo i rudimenti
<ul>
<li>Per noi è strumentale a costruire software Java</li>
<li>Impareremo come sfruttarlo per automatizzare le operazioni di cui sopra</li>
</ul>
</li>
</ul>
</section><section>
<h2 id="gradle-è-in-espansione-google-trends">Gradle è in espansione: Google trends</h2>
<script type="text/javascript" src="https://ssl.gstatic.com/trends_nrtr/3045_RC01/embed_loader.js"></script> <script type="text/javascript"> trends.embed.renderExploreWidget("TIMESERIES", {"comparisonItem":[{"keyword":"/m/028m4s","geo":"","time":"2004-01-01 2022-09-22"},{"keyword":"/m/04tj5z","geo":"","time":"2004-01-01 2022-09-22"},{"keyword":"/m/080c0g9","geo":"","time":"2004-01-01 2022-09-22"}],"category":0,"property":""}, {"exploreQuery":"date=all&q=%2Fm%2F028m4s,%2Fm%2F04tj5z,%2Fm%2F080c0g9","guestPath":"https://trends.google.com:443/trends/embed/"}); </script>
</section><section>
<h2 id="gradle-configurazione-minimale-per-java">Gradle: configurazione minimale per Java</h2>
<ul>
<li>Gradle viene pilotato con due file:
<ul>
<li><code>settings.gradle.kts</code>
<ul>
<li>Per il momento, ci serve solo a dare un nome al progetto</li>
</ul>
</li>
<li><code>build.gradle.kts</code>
<ul>
<li>Conterrà tutta la logica di costruzione del software</li>
<li>Ma noi sfrutteremo le convenzioni, configurando ben poco!</li>
</ul>
</li>
</ul>
</li>
<li>Al momento, ci basta una sola riga di codice per ciascuno!</li>
</ul>
<p><code>settings.gradle.kts</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000">rootProject</span>.<span style="color:#000">name</span> = <span style="color:#c41a16">"name-of-our-project"</span>
</span></span></code></pre></div><p><code>build.gradle.kts</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000">plugins</span> { <span style="color:#000">java</span> }
</span></span></code></pre></div><p>Così configurato, Gradle autonomamente:</p>
<ul>
<li>cerca e compila i sorgenti java dalla cartella: <code>src/main/java</code></li>
<li>produce i binari dentro: <code>build/classes/java/main</code></li>
</ul>
<p>Vogliamo percorsi diversi?
Va configurato.</p>
</section><section>
<h2 id="non-installare-gradle-il-wrapper">(Non) installare Gradle: il wrapper</h2>
<p>Se da una versione all’altra di Gradle dovesse cambiare la convenzione,
cosa succederebbe?</p>
<ul>
<li>Il nostro software smette di funzionare se aggiorniamo il build system!</li>
</ul>
<p>E se avessimo <em>progetti diversi</em> che richiedono <em>versioni diverse</em> di Gradle?</p>
<h4 id="ci-serve-un-modo-per-portarci-dietro-la-versione-di-gradle-che-ci-serve">Ci serve un modo per portarci dietro la versione di Gradle che ci serve</h4>
<h3 id="gradle-wrapper">Gradle wrapper</h3>
<p>Un insieme di script con un software minimale che:</p>
<ol>
<li>Scarica la versione di Gradle indicata in un file di configurazione
<ul>
<li>se non già disponibile nel sistema</li>
</ul>
</li>
<li>Usa quella versione per costruire il nostro sistema!</li>
</ol>
<p>Il wrapper può (deve) esser copiato in ogni progetto che gestiamo con Gradle</p>
<p>Dato che si auto-scarica, non occorre installare Gradle!</p>
<ul>
<li>Anche se è comodo, la versione di Gradle installata può generare le versioni wrapper</li>
</ul>
</section><section>
<h2 id="progetti-gradle-con-wrapper">Progetti Gradle con wrapper</h2>
<ol>
<li>Script bash eseguibile (<i class="fab fa-linux"></i>/<i class="fab fa-apple"></i>): <code>gradlew</code></li>
<li>Script batch eseguibile (<i class="fab fa-windows"></i>): <code>gradlew.bat</code></li>
<li>File di configurazione con indicata la versione di Gradle:<br>
<code>gradle/wrapper/gradle-wrapper.properties</code></li>
<li>Software Java che scarica la versione di Gradle descritta nel file di configurazione: <br>
<code>gradle/wrapper/gradle-wrapper.jar</code></li>
</ol>
<p>Wrapper pronto per esser scaricato:</p>
<ul>
<li><a href="https://github.com/DanySK/Gradle-Wrapper/archive/refs/heads/master.zip">https://github.com/DanySK/Gradle-Wrapper/archive/refs/heads/master.zip</a></li>
</ul>
</section><section>
<h2 id="utilizzo-di-gradle-in-un-progetto-java">Utilizzo di Gradle in un progetto Java</h2>
<p>Se abbiamo il Gradle wrapper configurato in un progetto,
possiamo usarlo attraverso uno dei due script:</p>
<ul>
<li><code>gradlew</code> (<i class="fab fa-linux"></i>/<i class="fab fa-apple"></i>)
o <code>gradlew.bat</code> (<i class="fab fa-windows"></i>),
a seconda della nostra piattaforma</li>
<li>seguito da un elenco di comandi detti <strong>task</strong></li>
</ul>
<p>In Gradle, un <strong>task</strong> è una particolare <em>attività</em> del processo di costruzione del software</p>
<p>Esiste un task che elenca i task, chiamato <code>tasks</code>.</p>
<p>Quando configurato per compilare Java fra i vari task troviamo anche <code>compileJava</code></p>
<h3 id="ottenere-lelenco-dei-task-disponibili">Ottenere l’elenco dei task disponibili</h3>
<ul>
<li><code>./gradlew tasks</code> (sistemi <i class="fab fa-linux"></i> e <i class="fab fa-apple"></i>)</li>
<li><code>gradlew.bat tasks</code> (sistemi <i class="fab fa-windows"></i>)</li>
</ul>
<h3 id="compilazione-java">Compilazione Java</h3>
<ul>
<li><code>./gradlew compileJava</code> (sistemi <i class="fab fa-linux"></i> e <i class="fab fa-apple"></i>)</li>
<li><code>gradlew.bat compileJava</code> (sistemi <i class="fab fa-windows"></i>)</li>
</ul>
<h4 id="continueremo-a-lanciare-i-nostri-eseguibili-a-mano-dal-terminale">Continueremo a <em>lanciare</em> i nostri eseguibili <em>a mano</em> dal terminale!</h4>
<p><code>java -cp build/classes/java/main nome.qualificato.della.ClasseDaEseguire</code></p>
</section><section>
<h1 id="esecuzioni-di-programmi-java-con-argomenti">Esecuzioni di programmi java con argomenti</h1>
</section><section>
<h2 id="passaggio-di-argomenti-ad-un-programma-java">Passaggio di argomenti ad un programma Java</h2>
<p>La maggior parte dei comandi supporta degli argomenti</p>
<p>Ad esempio, quando eseguite <code>javac -d bin MyClass.java</code> gli argomenti sono:</p>
<ol>
<li><code>-d</code></li>
<li><code>bin</code></li>
<li><code>MyClass.java</code></li>
</ol>
<p>In C, questi vengono passati al metodo <code>main()</code> come coppia di <code>char **</code> e <code>int</code>, rappresentanti rispettivamente un riferimento all’area di memoria dove sono salvati i parametri ed il numero dei suddetti.</p>
<p>Anche in Java ovviamente è possibile passare degli argomenti ad un programma!</p>
<ul>
<li>La gestione in Java è un po’ più semplice che in C:
<ul>
<li>gli array hanno l’informazione circa la loro dimensione</li>
<li>la signature del metodo <code>main()</code> è una sola:
<ul>
<li><code>public static void main(String [])</code> è l’unica signature valida</li>
<li>In C sia <code>int main(void)</code> che <code>int main(char **, int)</code> sono ugualmente accettabili</li>
</ul>
</li>
</ul>
</li>
<li>Gli argomenti con cui un programma Java viene invocato vengono passati come parametri attraverso l’array (<code>String[] args</code>) che il metodo <code>main()</code> prende in ingresso</li>
<li>Nonostante sia un parametro del <em>metodo principale</em> di qualunque programma Java, si tratta di un comune array senza alcuna particolarità.</li>
</ul>
</section><section>
<h2 id="appendice----varianza">Appendice – Varianza</h2>
<h2 id="formula-per-il-calcolo-della-varianza">Formula per il calcolo della varianza</h2>
<p>Sia $n$ il numero di elementi dell’array ed $x_i$ l’elemento all’indice $i$ dell’array, e $\mu$ la media dei valori del suddetto array. La varianza $\sigma^2$ può essere calcolata come:</p>
<p>$$\sigma^2 = \frac{\displaystyle\sum_{i=0}^{n-1}(x_i - \mu)^2} {n}$$</p>
</section>

  


</div>
      

    </div>
<script type="text/javascript" src="/reveal-hugo/object-assign.js"></script>

<a href="/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"900","highlight_theme":"default","history":true,"mermaid":[{"startOnLoad":false}],"slide_number":true,"theme":"white","transition":"slide","transition_speed":"fast","width":"1440"}</script>
<script type="application/json" id="reveal-hugo-page-params">null</script>

<script src="/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }
  
  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = { 
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>










  <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({"startOnLoad":false});

    let render = (event) => {
      let mermaidElems = event.currentSlide.querySelectorAll('.mermaid');
      if (!mermaidElems.length){
          return
      }
      mermaidElems.forEach(mermaidElem => {
          let processed = mermaidElem.getAttribute('data-processed');
          if (!processed){
              
              mermaid.init(undefined, mermaidElem);
          }
      });
    };
    Reveal.addEventListener('slidechanged', render);
    Reveal.addEventListener('ready', render);
  </script>

    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

    
  

</body></html>