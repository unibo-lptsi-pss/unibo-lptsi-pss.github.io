<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
<title>Progettazione e Sviluppo del Software</title>
<meta name="description" content="Progettazione e Sviluppo del Software, Tecnologie dei Sistemi Informatici">
<meta name="author" content="Danilo Pianini">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/css/custom-theme.min.b14bd2cb8ebd9f5aadd1914151911df5ab7b2264253b1df19c307933796d5e56.css" id="theme"><link rel="stylesheet" href="/highlight-js/default.min.css">
    
<link rel="stylesheet" href="https://gitcdn.link/repo/DanySK/css-blur-animation/master/blur.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="collezioni">Collezioni</h1>
<!-- <h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="roberto-casadei-----robycasadeiuniboitmailtorobycasadeiuniboit"><a href="mailto:roby.casadei@unibo.it">Roberto Casadei &mdash; <code>roby.casadei@unibo.it</code></a></h3>
<h3 id="danilo-pianini-----danilopianiniuniboitmailtodanilopianiniuniboit"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini &mdash; <code>danilo.pianini@unibo.it</code></a></h3>
<p><a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
</section><section> -->
<h4 id="progettazione-e-sviluppo-del-software">Progettazione e Sviluppo del Software</h4>
<h4 id="cdl-tecnologie-dei-sistemi-informatici">C.D.L. Tecnologie dei Sistemi Informatici</h4>
<h3 id="roberto-casadei-----robycasadeiuniboitmailtorobycasadeiuniboit"><a href="mailto:roby.casadei@unibo.it">Roberto Casadei — <code>roby.casadei@unibo.it</code></a></h3>
<h3 id="danilo-pianini-----danilopianiniuniboitmailtodanilopianiniuniboit"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini — <code>danilo.pianini@unibo.it</code></a></h3>
<p><a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> versione stampabile</a></p>
</section><section>
<h2 id="nota">Nota</h2>
<ul>
<li>
<p>Questo materiale è ampiamente basato su quello realizzato dal Prof.
Mirko Viroli, che ringrazio.</p>
</li>
<li>
<p>Ogni errore riscontratovi è esclusiva responsabilità degli autori di questo documento.</p>
</li>
</ul>
</section><section>
<h2 id="outline">Outline</h2>
<h3 id="goal-della-lezione">Goal della lezione</h3>
<ul>
<li>Illustrare la struttura del Java Collections Framework</li>
<li>Mostrare gli utilizzi delle funzonalità base</li>
<li>Discutere alcune tecniche di programmazione correlate</li>
</ul>
<h3 id="argomenti">Argomenti</h3>
<ul>
<li>Presentazione <em>Java Collections Framework</em></li>
<li>Iteratori e foreach</li>
<li>Collezioni, Set, e Liste</li>
<li><code>HashSet</code> e <code>TreeSet</code></li>
<li><code>ArrayList</code> e <code>LinkedList</code></li>
<li>Funzioni di utilità in <code>Arrays</code> e <code>Collections</code></li>
<li>Implementazioni di <code>List</code> e <code>Map</code></li>
</ul>
</section><section>
<h1 id="java-collections-framework-jcf">Java Collections Framework (JCF)</h1>
</section><section>
<h2 id="java-collections-framework">Java Collections Framework</h2>
<h3 id="java-collections-framework-jcf-1">Java Collections Framework (JCF)</h3>
<ul>
<li>È una libreria del linguaggio Java</li>
<li>È una parte del package <code>java.util</code></li>
<li>Gestisce strutture dati (o collezioni) e relativi algoritmi</li>
</ul>
<h3 id="importanza-pratica">Importanza pratica</h3>
<ul>
<li>Virtualmente ogni sistema fa uso di collezioni di oggetti</li>
<li>Conoscerne struttura e dettagli vi farà programmatori migliori</li>
</ul>
<h3 id="importanza-didattica">Importanza didattica</h3>
<ul>
<li>Fornisce ottimi esempi di uso di composizione, ereditarietà, genericità</li>
<li>Mette in pratica pattern di programmazione di interesse</li>
<li>Impatta su alcuni aspetti del linguaggio da approfondire</li>
</ul>
</section><section>
<h2 id="jcf----struttura-complessiva">JCF – struttura complessiva</h2>
<p><img src="imgs/tax1.png" alt=""></p>
</section><section>
<h2 id="jcf----struttura-riorganizzata">JCF – struttura riorganizzata</h2>
<p><img src="imgs/tax.png" alt=""></p>
</section><section>
<h2 id="jcf----alcuni-aspetti-generali">JCF – alcuni aspetti generali</h2>
<h3 id="è-complessivamente-piuttosto-articolato">È complessivamente piuttosto articolato</h3>
<ul>
<li>Un nostro obbiettivo è quello di isolare una sua sottoparte di interesse</li>
<li>Identificando e motivando le funzionalità prodotte</li>
</ul>
<h3 id="due-tipi-di-collection-ognuna-con-varie-incarnazioni">Due tipi di collection, ognuna con varie incarnazioni</h3>
<ul>
<li><code>Collection</code> – contenitore di elementi atomici; 3 sottotipi di collezioni
<ol>
<li><code>List</code> (sequenze)</li>
<li><code>Set</code> (no duplicazioni)</li>
<li><code>Queue</code> (per tenere elenti da processare, in vario ordine, e.g., FIFO, LIFO, a priorità etc.)</li>
</ol>
</li>
<li><code>Map</code> – contenitore di coppie chiave-valore</li>
</ul>
<h3 id="interfacceclassi-di-interesse">Interfacce/classi di interesse:</h3>
<ul>
<li>Interfacce: <code>Collection</code>, <code>List</code>, <code>Set</code>, <code>Map</code>, <code>Queue</code>, <code>Iterator</code>, <code>Comparable</code></li>
<li>Classi astratte: <code>AbstractList</code>, <code>AbstractSet</code>, <code>AbstractMap</code></li>
<li>Classi collection: <code>ArrayList</code>, <code>LinkedList</code>, <code>HashSet</code>, <code>HashMap</code>, <code>PriorityQueue</code></li>
<li>Classi con funzionalità: <code>Collections</code>, <code>Arrays</code></li>
</ul>
</section><section>
<h2 id="una-nota-su-eccezioni-e-jcf">Una nota su eccezioni e JCF</h2>
<h3 id="eccezioni-un-argomento-che-tratteremo-in-dettaglio">Eccezioni: un argomento che tratteremo in dettaglio</h3>
<p>Un meccanismo usato per gestire eventi ritenuti fuori dalla normale esecuzione (errori), ossia per dichiararli, lanciarli, intercettarli</p>
<h3 id="jcf-e-eccezioni">JCF e eccezioni</h3>
<ul>
<li>Ogni collection ha sue regole di funzionamento, e non ammette certe operazioni che richiedono controlli a tempo di esecuzione
<ul>
<li>ad esempio, certe collezioni sono immutabili, e non si può tentare di scriverci</li>
<li>oppure, non si può ottenere un elemento da una collezione vuota</li>
</ul>
</li>
<li>Molti metodi dichiarano che possono lanciare eccezioni – ma possiamo non preoccuparcene per ora</li>
</ul>
</section><section>
<h1 id="iteratori-e-foreach">Iteratori e foreach</h1>
</section><section>
<h2 id="foreach">Foreach</h2>
<h3 id="costrutto-foreach">Costrutto foreach</h3>
<ul>
<li>Abbiamo visto che può essere usato per iterare su un array in modo più astratto (compatto, leggibile)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">for</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span><span style="color:#000">:</span> <span style="color:#000">array</span><span style="color:#000">)</span> <span style="color:#000">{</span> <span style="color:#000">...</span> <span style="color:#000">}</span>
</span></span></code></pre></div><ul>
<li>Java fornisce anche un meccanismo per <em>usare il foreach su qualunque collection, in particolare, su qualunque oggetto che implementa l’interfaccia</em> <code>java.lang.Iterable&lt;X&gt;</code></li>
</ul>
<h3 id="iterable-e-iterator"><code>Iterable</code> e <code>Iterator</code></h3>
<ul>
<li>L’interfaccia <code>Iterable</code> (contratto degli oggetti <em>iterabili</em>) ha un metodo per generare e restituire un (nuovo) <code>Iterator</code></li>
<li>Un <em>iteratore</em> è un oggetto con metodi <code>next()</code>, <code>hasNext()</code> (e <code>remove()</code>)</li>
<li>Dato l’oggetto <code>coll</code> che implementa <code>Iterable&lt;T&gt;</code> allora il foreach diventa:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">for</span><span style="color:#000">(</span><span style="color:#000">T</span> <span style="color:#000">element</span><span style="color:#000">:</span> <span style="color:#000">coll</span><span style="color:#000">)</span> <span style="color:#000">{</span> <span style="color:#000">...</span> <span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="interfacce-per-literazione">Interfacce per l’iterazione</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">package</span> <span style="color:#000">java.lang</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.util.Iterator</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Iterable</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/**
</span></span></span><span style="display:flex;"><span><span style="color:#177500">     * Returns an iterator over a set of elements of type T.
</span></span></span><span style="display:flex;"><span><span style="color:#177500">     *
</span></span></span><span style="display:flex;"><span><span style="color:#177500">     * @return an Iterator.
</span></span></span><span style="display:flex;"><span><span style="color:#177500">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Iterator</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">iterator</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">package</span> <span style="color:#000">java.util</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Iterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">hasNext</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">E</span> <span style="color:#000">next</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">remove</span><span style="color:#000">();</span> <span style="color:#177500">// throws UnsupportedOperationException
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span><span style="color:#000">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">package</span> <span style="color:#000">java.util</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Collection</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Iterable</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span> <span style="color:#000">..</span> <span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="interfacce-per-literazione----uml">Interfacce per l’iterazione – UML</h2>
<p><img src="imgs/uml-iter.png" alt=""></p>
</section><section>
<h2 id="esempio-di-iterable-ad-hoc-e-suo-uso">Esempio di iterable ad-hoc, e suo uso</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Range</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Iterable</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">start</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">stop</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">Range</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">start</span><span style="color:#000">,</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">stop</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">start</span> <span style="color:#000">=</span> <span style="color:#000">start</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">stop</span> <span style="color:#000">=</span> <span style="color:#000">stop</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">util</span><span style="color:#000">.</span><span style="color:#836c28">Iterator</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">iterator</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">return</span> <span style="color:#a90d91">new</span> <span style="color:#000">RangeIterator</span><span style="color:#000">(</span><span style="color:#a90d91">this</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseRange</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">:</span> <span style="color:#a90d91">new</span> <span style="color:#000">Range</span><span style="color:#000">(</span><span style="color:#000">5</span><span style="color:#000">,</span> <span style="color:#000">12</span><span style="color:#000">))</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">i</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>			<span style="color:#177500">// 5 6 7 8 9 10 11 12
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="realizzazione-del-corrispondente-iteratore">Realizzazione del corrispondente iteratore</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">RangeIterator</span> <span style="color:#a90d91">implements</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">util</span><span style="color:#000">.</span><span style="color:#836c28">Iterator</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">int</span> <span style="color:#000">current</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">stop</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">RangeIterator</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Range</span> <span style="color:#000">range</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">current</span> <span style="color:#000">=</span> <span style="color:#000">range</span><span style="color:#000">.</span><span style="color:#836c28">start</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">stop</span> <span style="color:#000">=</span> <span style="color:#000">range</span><span style="color:#000">.</span><span style="color:#836c28">stop</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">Integer</span> <span style="color:#000">next</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">current</span><span style="color:#000">++;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">hasNext</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">current</span> <span style="color:#000">&lt;=</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">stop</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">remove</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="iteratori-e-collezioni-preview">Iteratori e collezioni: preview</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.util.*</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseCollectionIterator</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Uso la LinkedList
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">final</span> <span style="color:#000">LinkedList</span><span style="color:#000">&lt;</span><span style="color:#000">Double</span><span style="color:#000">&gt;</span> <span style="color:#000">list</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">LinkedList</span><span style="color:#000">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Inserisco 50 elementi
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">0</span><span style="color:#000">;</span> <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">50</span><span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">++)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">list</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">Math</span><span style="color:#000">.</span><span style="color:#836c28">random</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Stampo con un foreach
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">int</span> <span style="color:#000">ct</span> <span style="color:#000">=</span> <span style="color:#000">0</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">double</span> <span style="color:#000">d</span> <span style="color:#000">:</span> <span style="color:#000">list</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">ct</span><span style="color:#000">++</span> <span style="color:#000">+</span> <span style="color:#c41a16">"\t"</span> <span style="color:#000">+</span> <span style="color:#000">d</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// 0 0.10230513602737423
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#177500">// 1 0.4318582138894327
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#177500">// 2 0.5239222319032795
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#177500">// ..
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h1 id="collection-list-set">Collection, List, Set</h1>
</section><section>
<h2 id="interfaccia-collectione-implementa-iterablee">Interfaccia <code>Collection&lt;E&gt;</code> (implementa <code>Iterable&lt;E&gt;</code>)</h2>
<h3 id="ruolo-di-questo-tipo-di-dato">Ruolo di questo tipo di dato</h3>
<ul>
<li>È la radice della gerarchia delle collezioni</li>
<li>Rappresenta gruppi di oggetti (duplicati/non, ordinati/non)</li>
<li>Implementata via sottointerfacce (<code>List</code> e <code>Set</code>)</li>
</ul>
<h3 id="assunzioni">Assunzioni</h3>
<ul>
<li>
<p>Definisce <em>operazioni base</em> valide per tutte le collezioni</p>
</li>
<li>
<p>Assume implicitamente che ogni collezione abbia <em>due costruttori</em></p>
<ul>
<li><em>Senza argomenti</em>, che genera una collezione vuota</li>
<li><em>Che accetta una <code>Collection</code></em>, dal quale prende tutti gli elementi</li>
</ul>
</li>
<li>
<p>Le operazioni di <em>modifica</em> sono tutte <em>“opzionali”</em></p>
<ul>
<li>potrebbero lanciare un <code>UnsupportedOperationException</code></li>
</ul>
</li>
<li>
<p>Tutte le operazioni di <em>ricerca</em> (e.g. <code>c.contains(o)</code>) lavorano sulla base del metodo <code>Object.equals()</code> da chiamare sugli elementi</p>
<ul>
<li>questo metodo accetta un <code>Object</code>, influendo su alcuni metodi di <code>Collection</code></li>
</ul>
</li>
</ul>
</section><section>
<h2 id="collection-estratto-dellinterfaccia"><code>Collection</code>: estratto dell’interfaccia</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Collection</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Iterable</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Query Operations
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">size</span><span style="color:#000">();</span>	                <span style="color:#177500">// number of elements
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">isEmpty</span><span style="color:#000">();</span>          <span style="color:#177500">// is the size zero?
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">contains</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">);</span> <span style="color:#177500">// does it contain an element equal to o?
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">Iterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">iterator</span><span style="color:#000">();</span>     <span style="color:#177500">// yields an iterator
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">toArray</span><span style="color:#000">();</span>	        <span style="color:#177500">// convert to array of objects
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">T</span><span style="color:#000">[]</span> <span style="color:#000">toArray</span><span style="color:#000">(</span><span style="color:#000">T</span><span style="color:#000">[]</span> <span style="color:#000">a</span><span style="color:#000">);</span>     <span style="color:#177500">// puts in `a`, or create new if too small
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Modification Operations
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">);</span>           <span style="color:#177500">// adds e
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">remove</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">);</span>   <span style="color:#177500">// remove one element that is equal to o
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Bulk Operations
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">containsAll</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">c</span><span style="color:#000">);</span>       <span style="color:#177500">// contain all elements in c?
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">addAll</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">);</span>  <span style="color:#177500">// add all elements in c
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">removeAll</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">c</span><span style="color:#000">);</span>         <span style="color:#177500">// remove all elements in c
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">retainAll</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">c</span><span style="color:#000">);</span>         <span style="color:#177500">// keep only elements in c
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">void</span> <span style="color:#000">clear</span><span style="color:#000">();</span>                               <span style="color:#177500">// remove all element
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// ...and other methods introduced in Java 8
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="usare-le-collezioni">Usare le collezioni</h2>
<ul>
<li>Nota: invocazione metodi dell’interfaccia <code>Collection</code></li>
<li>Interazione con array via ad es. <code>Arrays.asList()</code> e <code>Collection.toArray()</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseCollection</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#177500">// Uso una incarnazione, ma poi lavoro sull'interfaccia
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>        <span style="color:#a90d91">final</span> <span style="color:#000">Collection</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">coll</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayList</span><span style="color:#000">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">coll</span><span style="color:#000">.</span><span style="color:#836c28">addAll</span><span style="color:#000">(</span><span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">asList</span><span style="color:#000">(</span><span style="color:#000">1</span><span style="color:#000">,</span> <span style="color:#000">3</span><span style="color:#000">,</span> <span style="color:#000">5</span><span style="color:#000">,</span> <span style="color:#000">7</span><span style="color:#000">,</span> <span style="color:#000">9</span><span style="color:#000">,</span> <span style="color:#000">11</span><span style="color:#000">));</span> <span style="color:#177500">// var-args
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">coll</span><span style="color:#000">);</span> <span style="color:#177500">// [1, 3, 5, 7, 9, 11]
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">coll</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">13</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">coll</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">15</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">coll</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">15</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">coll</span><span style="color:#000">.</span><span style="color:#836c28">remove</span><span style="color:#000">(</span><span style="color:#000">7</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">coll</span><span style="color:#000">);</span> <span style="color:#177500">// [1, 3, 5, 9, 11, 13, 15, 15]
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">coll</span><span style="color:#000">.</span><span style="color:#836c28">removeAll</span><span style="color:#000">(</span><span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">asList</span><span style="color:#000">(</span><span style="color:#000">11</span><span style="color:#000">,</span> <span style="color:#000">13</span><span style="color:#000">,</span> <span style="color:#000">15</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">coll</span><span style="color:#000">.</span><span style="color:#836c28">retainAll</span><span style="color:#000">(</span><span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">asList</span><span style="color:#000">(</span><span style="color:#000">1</span><span style="color:#000">,</span> <span style="color:#000">2</span><span style="color:#000">,</span> <span style="color:#000">3</span><span style="color:#000">,</span> <span style="color:#000">4</span><span style="color:#000">,</span> <span style="color:#000">5</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">coll</span><span style="color:#000">);</span> <span style="color:#177500">// [1, 3, 5]
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">coll</span><span style="color:#000">.</span><span style="color:#836c28">contains</span><span style="color:#000">(</span><span style="color:#000">3</span><span style="color:#000">));</span> <span style="color:#177500">// true
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">toString</span><span style="color:#000">(</span><span style="color:#000">coll</span><span style="color:#000">.</span><span style="color:#836c28">toArray</span><span style="color:#000">()));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">Integer</span><span style="color:#000">[]</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Integer</span><span style="color:#000">[</span><span style="color:#000">2</span><span style="color:#000">];</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">coll</span><span style="color:#000">.</span><span style="color:#836c28">toArray</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">deepToString</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="creare-collezioni-immutabili----java-9">Creare collezioni (<em>immutabili</em>) – Java 9+</h2>
<ul>
<li>Metodi statici factory <code>.of(...)</code> e <code>.copyOf(c)</code> su <code>List</code>, <code>Set</code>, …
<ul>
<li>Nota: <code>Arrays.ofList</code> visto precedentemente, invece, crea una lista mutabile (e consente valori <code>null</code>)</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseFactories</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Metodi statici di creazione per Set e List immutabili
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">set</span> <span style="color:#000">=</span> <span style="color:#000">Set</span><span style="color:#000">.</span><span style="color:#836c28">of</span><span style="color:#000">(</span><span style="color:#000">1</span><span style="color:#000">,</span> <span style="color:#000">2</span><span style="color:#000">,</span> <span style="color:#000">3</span><span style="color:#000">,</span> <span style="color:#000">4</span><span style="color:#000">,</span> <span style="color:#000">5</span><span style="color:#000">,</span> <span style="color:#000">6</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">set</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">list</span> <span style="color:#000">=</span> <span style="color:#000">List</span><span style="color:#000">.</span><span style="color:#836c28">of</span><span style="color:#000">(</span><span style="color:#c41a16">"a"</span><span style="color:#000">,</span> <span style="color:#c41a16">"b"</span><span style="color:#000">,</span> <span style="color:#c41a16">"c"</span><span style="color:#000">,</span> <span style="color:#c41a16">"a"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">list</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">set2</span> <span style="color:#000">=</span> <span style="color:#000">Set</span><span style="color:#000">.</span><span style="color:#836c28">copyOf</span><span style="color:#000">(</span><span style="color:#000">list</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">set2</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">list</span><span style="color:#000">.</span><span style="color:#836c28">hashCode</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="set-e-list-introduzione"><code>Set</code> e <code>List</code>: introduzione</h2>
<h3 id="set"><code>Set</code></h3>
<ul>
<li>Rappresenta collezioni <em>senza duplicati</em>
<ul>
<li>nessuna coppia di elementi porta <code>Object.equals()</code> a dare <code>true</code></li>
<li>non vi sono due elementi <code>null</code></li>
<li>I metodi di modifica devono rispettare la non duplicazione</li>
</ul>
</li>
<li>Non aggiunge metodi rispetto a <code>Collection</code></li>
</ul>
<h3 id="list"><code>List</code></h3>
<ul>
<li>Rappresenta <em>sequenze di elementi</em></li>
<li>Rispetto alle collezioni generiche:
<ul>
<li>Ha metodi per accedere ad un elemento per <em>posizione</em> (0-based)
<ul>
<li>Comunque, una lista <em>andrebbe scandita via iteratore/foreach</em>, non con indici incrementali</li>
</ul>
</li>
<li>Fornisce un <strong>list-iterator</strong> che consente operazioni aggiuntive (modifiche; traversamento nelle due direzioni; …)</li>
</ul>
</li>
</ul>
<p>La scelta fra queste due tipologie non dipende da motivi di performance, ma da quale modello di collezione serva!</p>
</section><section>
<h2 id="set-e-list-interfacce"><code>Set</code> e <code>List</code>: interfacce</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Set</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Collection</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;{}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">List</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Collection</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Additional Bulk Operations 
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">addAll</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">Collection</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Positional Access Operations
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">E</span> <span style="color:#000">get</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">);</span>               <span style="color:#177500">// get at position index
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">E</span> <span style="color:#000">set</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">E</span> <span style="color:#000">element</span><span style="color:#000">);</span>    <span style="color:#177500">// set into position index
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">void</span> <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">E</span> <span style="color:#000">element</span><span style="color:#000">);</span> <span style="color:#177500">// add, shifting others
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">E</span> <span style="color:#000">remove</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">);</span>            <span style="color:#177500">// remove at position index
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Search Operations
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">indexOf</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">);</span>          <span style="color:#177500">// first equals to o
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">lastIndexOf</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">);</span>      <span style="color:#177500">// last equals to o
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// List Iterators (enable traversal in both directions, modifications etc.)
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">listIterator</span><span style="color:#000">();</span>           <span style="color:#177500">// iterator from 0
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">listIterator</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">);</span>  <span style="color:#177500">// ..from index
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// View
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">subList</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">toIndex</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="implementazione-collezioni----uml">Implementazione collezioni – UML</h2>
<p><img src="imgs/uml-abs.png" alt=""></p>
</section><section>
<h2 id="implementazione-collezioni-linee-guida-generali">Implementazione collezioni: linee guida generali</h2>
<h3 id="una-modalità-di-progettazione-da-ricordare">Una modalità di progettazione da ricordare</h3>
<ul>
<li><em>Interfacce</em>: riportano le funzionalità definitorie del concetto</li>
<li><em>Classi astratte</em>: fattorizzano codice comune alle varie implementazioni</li>
<li><em>Classi concrete</em>: realizzano le varie implementazioni</li>
</ul>
<h3 id="nel-codice-cliente">Nel codice cliente..</h3>
<ul>
<li><em>In variabili, argomenti, tipi di ritorno, si usano le interfacce</em></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">void</span> <span style="color:#000">m</span><span style="color:#000">(</span><span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">lst</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">names</span> <span style="color:#000">=</span> <span style="color:#177500">// ...
</span></span></span></code></pre></div><ul>
<li><em>Le classi concrete solo in fase di istanziazione</em>, nella <code>new</code>, a parte casi molto particolari</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">names</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">HashSet</span><span style="color:#000">&lt;&gt;();</span>
</span></span></code></pre></div><ul>
<li><em>Le classi astratte solo per costruire nuove implementazioni</em> <!-- non si menzionano praticamente mai, solo eventualmente per chi volesse costruire una nuova implementazione --></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">HashSet</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">extends</span> <span style="color:#000">AbstractSet</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span> <span style="color:#000">...</span> <span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="implementazione-collezioni----design-space">Implementazione collezioni – Design space</h2>
<h3 id="classi-astratte">Classi astratte</h3>
<ul>
<li><code>AbstractCollection</code>, <code>AbstractList</code>, e <code>AbstractSet</code></li>
<li>Realizzano “scheletri” di classi per collezioni, corrispondenti alla relative interfacce</li>
<li>Facilitano lo sviluppo di nuove classi aderenti alle interfacce</li>
</ul>
<h3 id="un-esempio-abstractset">Un esempio: <code>AbstractSet</code></h3>
<ul>
<li>Per set immutabili, richiede solo di definire <code>size()</code> e <code>iterator()</code></li>
<li>Per set mutabili, richiede anche di ridefinire <code>add()</code></li>
<li>Per motivi di performance si potrebbero fare ulteriori override</li>
</ul>
<h3 id="classi-concrete-fra-le-varie-illustreremo">Classi concrete.. fra le varie illustreremo:</h3>
<ul>
<li><code>HashSet</code>, <code>TreeSet</code>, <code>ArrayList</code>, <code>LinkedList</code></li>
<li>La scelta riguarda quasi esculsivamente esigenze di performance</li>
</ul>
</section><section>
<h2 id="esempio-di-creazione-di-un-nuovo-set-rangeset">Esempio di creazione di un nuovo set: <code>RangeSet</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.util.*</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Permette di definire un set di valori integer incrementali,
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> senza doverli esplicitamente inserire in memoria, e quindi
</span></span></span><span style="display:flex;"><span><span style="color:#177500"> prediligendo l'occupazione in memoria al tempo d'accesso */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">RangeSet</span> <span style="color:#a90d91">extends</span> <span style="color:#000">AbstractSet</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">start</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">stop</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">RangeSet</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">start</span><span style="color:#000">,</span> <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">stop</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">start</span> <span style="color:#000">=</span> <span style="color:#000">start</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">stop</span> <span style="color:#000">=</span> <span style="color:#000">stop</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">size</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#000">(</span><span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">stop</span> <span style="color:#000">&gt;=</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">start</span><span style="color:#000">)</span> <span style="color:#000">?</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">stop</span> <span style="color:#000">-</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">start</span> <span style="color:#000">+</span> <span style="color:#000">1</span> <span style="color:#000">:</span> <span style="color:#000">0</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">Iterator</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">iterator</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Il RangeIterator già visto...
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">new</span> <span style="color:#000">RangeIterator</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Range</span><span style="color:#000">(</span><span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">start</span><span style="color:#000">,</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">stop</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">/* We can override contains to avoid iteration, making it faster */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">contains</span><span style="color:#000">(</span><span style="color:#000">Integer</span> <span style="color:#000">i</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#000">i</span><span style="color:#000">&gt;=</span><span style="color:#000">start</span> <span style="color:#000">&amp;&amp;</span> <span style="color:#000">i</span><span style="color:#000">&lt;=</span><span style="color:#000">stop</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="uso-di-rangeset">Uso di <code>RangeSet</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseRangeSet</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// r è un Set a tutti gli effetti
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">final</span> <span style="color:#000">RangeSet</span> <span style="color:#000">r</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">RangeSet</span><span style="color:#000">(</span><span style="color:#000">0</span><span style="color:#000">,</span> <span style="color:#000">20</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Size of r: "</span> <span style="color:#000">+</span> <span style="color:#000">r</span><span style="color:#000">.</span><span style="color:#836c28">size</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// ad esempio, lo uso per iterare
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">:</span> <span style="color:#000">r</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Elem: "</span> <span style="color:#000">+</span> <span style="color:#000">i</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// ad esempio, uso la contains()
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">r</span><span style="color:#000">.</span><span style="color:#836c28">contains</span><span style="color:#000">(</span><span style="color:#000">15</span><span style="color:#000">));</span> <span style="color:#177500">// true
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">r</span><span style="color:#000">.</span><span style="color:#836c28">contains</span><span style="color:#000">(</span><span style="color:#000">21</span><span style="color:#000">));</span> <span style="color:#177500">// false
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#177500">// è comunque un set immutabile quindi niente add(), remove(),...
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h1 id="implementazioni-di-set">Implementazioni di <code>Set</code></h1>
</section><section>
<h2 id="implementazioni-di-set-1">Implementazioni di <code>Set</code></h2>
<h3 id="caratteristiche-dei-set">Caratteristiche dei set</h3>
<ul>
<li>Nessun elemento duplicato (nel senso di <code>Object.equals()</code>)</li>
<li>$\rightarrow$ Il problema fondamentale è il metodo <code>contains()</code>, nelle soluzioni più naive (con iteratore) potrebbe applicare una ricerca sequenziale, e invece si richiedono performance migliori</li>
</ul>
<h3 id="approccio-1-hashset">Approccio 1: <code>HashSet</code></h3>
<p>Si usa il metodo <code>Object.hashCode()</code> come funzione di <em><strong>hash</strong></em>, usata per posizionare gli elementi in uno store di elevate dimensioni</p>
<h3 id="approccio-2-treeset">Approccio 2: <code>TreeSet</code></h3>
<p>Specializzazione di <code>SortedSet</code> e di <code>NavigableSet</code>. Gli elementi sono ordinati, e quindi organizzabili in un albero (<em>red-black tree</em>, un albero binario auto-bilanciante) per avere accesso in tempo logaritmico</p>
</section><section>
<h2 id="hashset"><code>HashSet</code></h2>
<h3 id="idea-di-base-tecnica-di-hashing-via-objecthashcode">Idea di base: tecnica di hashing (via <code>Object.hashCode()</code>)</h3>
<ul>
<li>
<p>Si crea un array di elementi più grande del necessario (p.e. almeno il 25% in più), di dimensione <code>size</code></p>
</li>
<li>
<p>Aggiunta di un elemento <code>e</code></p>
<ul>
<li>lo si inserisce in posizione <code>e.hashCode() % size</code></li>
<li>se la posizione è già occupata, lo si inserisce nella prima disponibile</li>
<li>se l’array si riempie va espanso e si deve fare il rehashing</li>
</ul>
</li>
<li>
<p>Ricerca di un elemento <code>f</code></p>
<ul>
<li>si guarda a partire da <code>f.hashCode() % size</code>, usando <code>Object.equals()</code></li>
<li>La funzione di hashing deve evitare il più possibile le collisioni</li>
</ul>
</li>
<li>
<p>Risultato: scritture/letture sono $O(1)$ ammortizzato</p>
</li>
</ul>
<h3 id="dettagli-interni">Dettagli interni</h3>
<ul>
<li>Realizzata tramite <code>HashMap</code>, che approfondiremo in futuro</li>
</ul>
</section><section>
<h2 id="costruttori-di-hashset">Costruttori di <code>HashSet</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">HashSet</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">extends</span> <span style="color:#000">AbstractSet</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">implements</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;,</span> <span style="color:#000">Cloneable</span><span style="color:#000">,</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">io</span><span style="color:#000">.</span><span style="color:#836c28">Serializable</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Set vuoto, usa hashmap con capacità 16
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">public</span> <span style="color:#000">HashSet</span><span style="color:#000">()</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Set con elementi di c, usa hashmap del 25% più grande di c
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">public</span> <span style="color:#000">HashSet</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Set vuoto
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">public</span> <span style="color:#000">HashSet</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">initialCapacity</span><span style="color:#000">,</span> <span style="color:#a90d91">float</span> <span style="color:#000">loadFactor</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Set vuoto, loadFactor = 0.75
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">public</span> <span style="color:#000">HashSet</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">initialCapacity</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* Gli altri metodi di Collection seguono... */</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="equals-e-hashcode"><code>equals()</code> e <code>hashCode()</code></h2>
<h3 id="la-loro-corretta-implementazione-è-cruciale">La loro corretta implementazione è cruciale</h3>
<ul>
<li>Le classi di libreria di Java sono già OK</li>
<li><code>Object</code> uguaglia lo stesso oggetto e l’hashing restituisce la posizione in memoria..</li>
<li>.. quindi nuove classi devono ridefinire <code>equals()</code> e <code>hashCode()</code> opportunamente</li>
</ul>
<h3 id="quale-funzione-di-hashing">Quale funzione di hashing?</h3>
<ul>
<li>oggetti <code>equals</code> devono avere lo stesso <code>hashCode</code></li>
<li>non è detto il viceversa, ma è opportuno per avere buone performance di <code>HashSet</code></li>
<li>si veda ad esempio: <a href="https://en.bitcoinwiki.org/wiki/Java_hashCode()">https://en.bitcoinwiki.org/wiki/Java_hashCode()</a></li>
<li>Alcuni IDE forniscono la generazione di un <code>hashCode</code> ragionevole (ma tipicamente ce ne sono di migliori: <code>djb2</code>, <code>murmur3</code>)</li>
</ul>
</section><section>
<h2 id="esempio-persona-pt1">Esempio: <code>Persona</code> pt.1</h2>
<div class="smaller">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Persona</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">final</span> <span style="color:#a90d91">private</span> <span style="color:#000">String</span> <span style="color:#000">nome</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">final</span> <span style="color:#a90d91">private</span> <span style="color:#a90d91">int</span> <span style="color:#000">annoNascita</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">final</span> <span style="color:#a90d91">private</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">sposato</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#000">String</span> <span style="color:#000">nome</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">annoNascita</span><span style="color:#000">,</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">sposato</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">nome</span> <span style="color:#000">=</span> <span style="color:#000">nome</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">annoNascita</span> <span style="color:#000">=</span> <span style="color:#000">annoNascita</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">sposato</span> <span style="color:#000">=</span> <span style="color:#000">sposato</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isSposato</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">sposato</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">getName</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">nome</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">String</span> <span style="color:#000">toString</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">nome</span> <span style="color:#000">+</span> <span style="color:#c41a16">":"</span> <span style="color:#000">+</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">annoNascita</span> <span style="color:#000">+</span> <span style="color:#c41a16">":"</span> <span style="color:#000">+</span> <span style="color:#000">(</span><span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">sposato</span> <span style="color:#000">?</span> <span style="color:#c41a16">"spos"</span> <span style="color:#000">:</span> <span style="color:#c41a16">"non-spos"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">hashCode</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">prime</span> <span style="color:#000">=</span> <span style="color:#000">31</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">int</span> <span style="color:#000">result</span> <span style="color:#000">=</span> <span style="color:#000">1</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">result</span> <span style="color:#000">=</span> <span style="color:#000">prime</span> <span style="color:#000">*</span> <span style="color:#000">result</span> <span style="color:#000">+</span> <span style="color:#000">annoNascita</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">result</span> <span style="color:#000">=</span> <span style="color:#000">prime</span> <span style="color:#000">*</span> <span style="color:#000">result</span> <span style="color:#000">+</span> <span style="color:#000">((</span><span style="color:#000">nome</span> <span style="color:#000">==</span> <span style="color:#a90d91">null</span><span style="color:#000">)</span> <span style="color:#000">?</span> <span style="color:#000">0</span> <span style="color:#000">:</span> <span style="color:#000">nome</span><span style="color:#000">.</span><span style="color:#836c28">hashCode</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">result</span> <span style="color:#000">=</span> <span style="color:#000">prime</span> <span style="color:#000">*</span> <span style="color:#000">result</span> <span style="color:#000">+</span> <span style="color:#000">(</span><span style="color:#000">sposato</span> <span style="color:#000">?</span> <span style="color:#000">1231</span> <span style="color:#000">:</span> <span style="color:#000">1237</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#000">result</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span></code></pre></div></div>
</section><section>
<h2 id="esempio-persona-pt2">Esempio: <code>Persona</code> pt.2</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">equals</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">obj</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#a90d91">this</span> <span style="color:#000">==</span> <span style="color:#000">obj</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">return</span> <span style="color:#a90d91">true</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">obj</span> <span style="color:#000">==</span> <span style="color:#a90d91">null</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(!(</span><span style="color:#000">obj</span> <span style="color:#a90d91">instanceof</span> <span style="color:#000">Persona</span><span style="color:#000">))</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">Persona</span> <span style="color:#000">other</span> <span style="color:#000">=</span> <span style="color:#000">(</span><span style="color:#000">Persona</span><span style="color:#000">)</span> <span style="color:#000">obj</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">annoNascita</span> <span style="color:#000">!=</span> <span style="color:#000">other</span><span style="color:#000">.</span><span style="color:#836c28">annoNascita</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">nome</span> <span style="color:#000">==</span> <span style="color:#a90d91">null</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">other</span><span style="color:#000">.</span><span style="color:#836c28">nome</span> <span style="color:#000">!=</span> <span style="color:#a90d91">null</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span> <span style="color:#a90d91">else</span> <span style="color:#a90d91">if</span> <span style="color:#000">(!</span><span style="color:#000">nome</span><span style="color:#000">.</span><span style="color:#836c28">equals</span><span style="color:#000">(</span><span style="color:#000">other</span><span style="color:#000">.</span><span style="color:#836c28">nome</span><span style="color:#000">))</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">sposato</span> <span style="color:#000">!=</span> <span style="color:#000">other</span><span style="color:#000">.</span><span style="color:#836c28">sposato</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">true</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="usehashsetpersona"><code>UseHashSetPersona</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseHashSetPersona</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#177500">// HashSet è un dettaglio, lavorare sempre su Set!
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>        <span style="color:#a90d91">final</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">Persona</span><span style="color:#000">&gt;</span> <span style="color:#000">set</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">HashSet</span><span style="color:#000">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#177500">// Aggiungo 4 elementi
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>        <span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Rossi"</span><span style="color:#000">,</span> <span style="color:#000">1960</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Bianchi"</span><span style="color:#000">,</span> <span style="color:#000">1980</span><span style="color:#000">,</span> <span style="color:#a90d91">true</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Verdi"</span><span style="color:#000">,</span> <span style="color:#000">1972</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Neri"</span><span style="color:#000">,</span> <span style="color:#000">1968</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">set</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#177500">// Testo presenza/assenza di 2 elementi
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>        <span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">p1</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Rossi"</span><span style="color:#000">,</span> <span style="color:#000">1960</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">p2</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Rossi"</span><span style="color:#000">,</span> <span style="color:#000">1961</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Cerco "</span> <span style="color:#000">+</span> <span style="color:#000">p1</span> <span style="color:#000">+</span> <span style="color:#c41a16">" esito "</span> <span style="color:#000">+</span> <span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">contains</span><span style="color:#000">(</span><span style="color:#000">p1</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Cerco "</span> <span style="color:#000">+</span> <span style="color:#000">p2</span> <span style="color:#000">+</span> <span style="color:#c41a16">" esito "</span> <span style="color:#000">+</span> <span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">contains</span><span style="color:#000">(</span><span style="color:#000">p2</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#177500">// Iterazione: nota, fuori ordine rispetto all'inserimento
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>        <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">p</span> <span style="color:#000">:</span> <span style="color:#000">set</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Itero: "</span> <span style="color:#000">+</span> <span style="color:#000">p</span> <span style="color:#000">+</span> <span style="color:#c41a16">" hash = "</span> <span style="color:#000">+</span> <span style="color:#000">p</span><span style="color:#000">.</span><span style="color:#836c28">hashCode</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="treesete"><code>TreeSet&lt;E&gt;</code></h2>
<h3 id="specializzazione-navigableset-e-sortedset">Specializzazione <code>NavigableSet</code> (e <code>SortedSet</code>)</h3>
<ul>
<li>Assume che esista un <em>ordine totale</em> fra gli elementi</li>
<li>Quindi ogni elemento ha una sua <em>posizione</em> nell’elenco</li>
<li>Questo consente l’approccio dicotomico alla ricerca</li>
<li>Consente funzioni addizionali, come le iterazioni in un intervallo</li>
</ul>
<h3 id="realizzazione-ordinamento-due-approcci-interno-o-esterno">Realizzazione ordinamento: due approcci (interno o esterno)</h3>
<ul>
<li>
<p>O con elementi che implementano direttamente <code>Comparable</code></p>
<ul>
<li>Nota che, p.e., <code>Integer</code> implementa <code>Comparable&lt;Integer&gt;</code></li>
</ul>
</li>
<li>
<p>O attraverso un <code>Comparator</code> esterno fornito alla <code>new</code></p>
</li>
</ul>
<h3 id="implementazione-treeset">Implementazione <code>TreeSet</code></h3>
<ul>
<li>Basata su red-black tree (albero binario bilanciato)</li>
<li>Tempo logaritmico per inserimento, cancellazione, e ricerca</li>
</ul>
</section><section>
<h2 id="comparazione-interna-agli-elementi">Comparazione “interna” agli elementi</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Comparable</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* returns: 0 (this == o), positive (this &gt; o)
</span></span></span><span style="display:flex;"><span><span style="color:#177500">                	       negative (this &lt; o) */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">compareTo</span><span style="color:#000">(</span><span style="color:#000">T</span> <span style="color:#000">o</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div><ul>
<li>Consente di definire una nozione di <em>ordine naturale</em> sugli oggetti di una classe</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">Integer</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Number</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Comparable</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span> <span style="color:#000">...</span> <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">class</span> <span style="color:#3f6e75">String</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Object</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Comparable</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;,</span> <span style="color:#000">...</span> <span style="color:#000">{</span> <span style="color:#000">...</span> <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#177500">// &gt;100 classi delle librerie di Java seguono questo approccio
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Persona</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Comparable</span><span style="color:#000">&lt;</span><span style="color:#000">Persona</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#177500">// Esempio di implementazione di compareTo:
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#177500">// - ordine di anno di nascita, e poi per nome..
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">compareTo</span><span style="color:#000">(</span><span style="color:#000">Persona</span> <span style="color:#000">p</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#a90d91">return</span> <span style="color:#000">(</span><span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">annoNascita</span> <span style="color:#000">!=</span> <span style="color:#000">p</span><span style="color:#000">.</span><span style="color:#836c28">annoNascita</span><span style="color:#000">)</span> <span style="color:#000">?</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">annoNascita</span> <span style="color:#000">-</span> <span style="color:#000">p</span><span style="color:#000">.</span><span style="color:#836c28">annoNascita</span> <span style="color:#000">:</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">nome</span><span style="color:#000">.</span><span style="color:#836c28">compareTo</span><span style="color:#000">(</span><span style="color:#000">p</span><span style="color:#000">.</span><span style="color:#836c28">nome</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="esempi-di-comparazione-interna">Esempi di comparazione interna</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.util.*</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseComparison</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"abc vs def: "</span> <span style="color:#000">+</span> <span style="color:#c41a16">"abc"</span><span style="color:#000">.</span><span style="color:#836c28">compareTo</span><span style="color:#000">(</span><span style="color:#c41a16">"def"</span><span style="color:#000">));</span> <span style="color:#177500">// neg
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"1 vs 2: "</span> <span style="color:#000">+</span> <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">valueOf</span><span style="color:#000">(</span><span style="color:#000">1</span><span style="color:#000">).</span><span style="color:#836c28">compareTo</span><span style="color:#000">(</span><span style="color:#000">2</span><span style="color:#000">));</span><span style="color:#177500">// neg
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">p1</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Rossi"</span><span style="color:#000">,</span> <span style="color:#000">1960</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">p2</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Rossi"</span><span style="color:#000">,</span> <span style="color:#000">1972</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">p3</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Bianchi"</span><span style="color:#000">,</span> <span style="color:#000">1972</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">p4</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Bianchi"</span><span style="color:#000">,</span> <span style="color:#000">1972</span><span style="color:#000">,</span> <span style="color:#a90d91">true</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">p1</span> <span style="color:#000">+</span> <span style="color:#c41a16">" vs "</span> <span style="color:#000">+</span> <span style="color:#000">p2</span> <span style="color:#000">+</span> <span style="color:#c41a16">": "</span> <span style="color:#000">+</span> <span style="color:#000">p1</span><span style="color:#000">.</span><span style="color:#836c28">compareTo</span><span style="color:#000">(</span><span style="color:#000">p2</span><span style="color:#000">));</span> <span style="color:#177500">// pos
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">p2</span> <span style="color:#000">+</span> <span style="color:#c41a16">" vs "</span> <span style="color:#000">+</span> <span style="color:#000">p3</span> <span style="color:#000">+</span> <span style="color:#c41a16">": "</span> <span style="color:#000">+</span> <span style="color:#000">p2</span><span style="color:#000">.</span><span style="color:#836c28">compareTo</span><span style="color:#000">(</span><span style="color:#000">p3</span><span style="color:#000">));</span> <span style="color:#177500">// pos
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">p3</span> <span style="color:#000">+</span> <span style="color:#c41a16">" vs "</span> <span style="color:#000">+</span> <span style="color:#000">p4</span> <span style="color:#000">+</span> <span style="color:#c41a16">": "</span> <span style="color:#000">+</span> <span style="color:#000">p3</span><span style="color:#000">.</span><span style="color:#836c28">compareTo</span><span style="color:#000">(</span><span style="color:#000">p4</span><span style="color:#000">));</span> <span style="color:#177500">// zero
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">TreeSet</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;(</span><span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">asList</span><span style="color:#000">(</span><span style="color:#000">4</span><span style="color:#000">,</span> <span style="color:#000">3</span><span style="color:#000">,</span> <span style="color:#000">2</span><span style="color:#000">,</span> <span style="color:#000">1</span><span style="color:#000">)));</span> <span style="color:#177500">// 1,2,3,4
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div><ul>
<li>Se a una collezione ordinata non è fornito un <code>Comparator</code> esterno specifico, allora sfrutterà l’ordinamento naturale del tipo degli elementi (quindi se il tipo <code>T</code> degli elementi non implementa <code>Comparable&lt;? super T&gt;</code>, un’eccezione verrà sollevata)</li>
</ul>
</section><section>
<h2 id="usetreesetpersona-comparazione-interna"><code>UseTreeSetPersona</code>: comparazione interna</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseTreeSetPersona</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">l</span> <span style="color:#000">=</span> <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">asList</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Integer</span><span style="color:#000">[]</span> <span style="color:#000">{</span> <span style="color:#000">10</span><span style="color:#000">,</span> <span style="color:#000">20</span><span style="color:#000">,</span> <span style="color:#000">30</span><span style="color:#000">,</span> <span style="color:#000">40</span> <span style="color:#000">});</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// TreeSet è un dettaglio, lavorare sempre sull'interfaccia
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">NavigableSet</span><span style="color:#000">&lt;</span><span style="color:#000">Persona</span><span style="color:#000">&gt;</span> <span style="color:#000">set</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">TreeSet</span><span style="color:#000">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Rossi"</span><span style="color:#000">,</span> <span style="color:#000">1960</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Bianchi"</span><span style="color:#000">,</span> <span style="color:#000">1980</span><span style="color:#000">,</span> <span style="color:#a90d91">true</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Verdi"</span><span style="color:#000">,</span> <span style="color:#000">1972</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Neri"</span><span style="color:#000">,</span> <span style="color:#000">1972</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Neri"</span><span style="color:#000">,</span> <span style="color:#000">1968</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Iterazione in ordine, poi al contrario, poi fino al 1970
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">p</span> <span style="color:#000">:</span> <span style="color:#000">set</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Itero: "</span> <span style="color:#000">+</span> <span style="color:#000">p</span> <span style="color:#000">+</span> <span style="color:#c41a16">" hash = "</span> <span style="color:#000">+</span> <span style="color:#000">p</span><span style="color:#000">.</span><span style="color:#836c28">hashCode</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">p</span> <span style="color:#000">:</span> <span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">descendingSet</span><span style="color:#000">())</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Itero al contrario: "</span> <span style="color:#000">+</span> <span style="color:#000">p</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">limit</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">""</span><span style="color:#000">,</span> <span style="color:#000">1970</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">p</span> <span style="color:#000">:</span> <span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">headSet</span><span style="color:#000">(</span><span style="color:#000">limit</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">))</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Itero fino al 1970: "</span> <span style="color:#000">+</span> <span style="color:#000">p</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="costruttori-di-treeset-e-comparatore-esterno">Costruttori di <code>TreeSet</code>, e comparatore “esterno”</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">TreeSet</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">extends</span> <span style="color:#000">AbstractSet</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">implements</span> <span style="color:#000">NavigableSet</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;,</span> <span style="color:#000">Cloneable</span><span style="color:#000">,</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">io</span><span style="color:#000">.</span><span style="color:#836c28">Serializable</span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Set vuoto di elementi confrontabili
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">public</span> <span style="color:#000">TreeSet</span><span style="color:#000">()</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Set vuoto con comparatore fornito
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">public</span> <span style="color:#000">TreeSet</span><span style="color:#000">(</span><span style="color:#000">Comparator</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">comparator</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Set con gli elementi di c, confrontabili tra loro
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">public</span> <span style="color:#000">TreeSet</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Set con gli elementi di c, e che usa il loro ordering
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">public</span> <span style="color:#000">TreeSet</span><span style="color:#000">(</span><span style="color:#000">SortedSet</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">/* Seguono i metodi di NavigableSet e SortedSet */</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Comparator</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// 0 if o1 == o2, neg if o1 &lt; o2, pos is o1 &gt; o2
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">compare</span><span style="color:#000">(</span><span style="color:#000">T</span> <span style="color:#000">o1</span><span style="color:#000">,</span> <span style="color:#000">T</span> <span style="color:#000">o2</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="definizione-di-un-comparatore-esterno">Definizione di un comparatore esterno</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.util.Comparator</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#177500">/* Implementa la politica di confronto esternamente a Persona */</span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">PersonaComparator</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Comparator</span><span style="color:#000">&lt;</span><span style="color:#000">Persona</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#177500">// Confronto prima sul nome, poi sull'anno
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">compare</span><span style="color:#000">(</span><span style="color:#000">Persona</span> <span style="color:#000">o1</span><span style="color:#000">,</span> <span style="color:#000">Persona</span> <span style="color:#000">o2</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#000">o1</span><span style="color:#000">.</span><span style="color:#836c28">getNome</span><span style="color:#000">().</span><span style="color:#836c28">equals</span><span style="color:#000">(</span><span style="color:#000">o2</span><span style="color:#000">.</span><span style="color:#836c28">getNome</span><span style="color:#000">())</span>
</span></span><span style="display:flex;"><span>				<span style="color:#000">?</span> <span style="color:#000">o1</span><span style="color:#000">.</span><span style="color:#836c28">getAnnoNascita</span><span style="color:#000">()</span> <span style="color:#000">-</span> <span style="color:#000">o2</span><span style="color:#000">.</span><span style="color:#836c28">getAnnoNascita</span><span style="color:#000">()</span>
</span></span><span style="display:flex;"><span>				<span style="color:#000">:</span> <span style="color:#000">o1</span><span style="color:#000">.</span><span style="color:#836c28">getNome</span><span style="color:#000">().</span><span style="color:#836c28">compareTo</span><span style="color:#000">(</span><span style="color:#000">o2</span><span style="color:#000">.</span><span style="color:#836c28">getNome</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">// Attenzione sull'uso della sottrazione per la compareTo fra interi
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span><span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">MAX_VALUE</span> <span style="color:#000">-</span> <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">MIN_VALUE</span> <span style="color:#177500">// -1
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span><span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">valueOf</span><span style="color:#000">(</span><span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">MAX_VALUE</span><span style="color:#000">).</span><span style="color:#836c28">compareTo</span><span style="color:#000">(</span><span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">MIN_VALUE</span><span style="color:#000">)</span> <span style="color:#177500">// 1
</span></span></span></code></pre></div></section><section>
<h2 id="usetreesetpersona2-comparazione-esterna"><code>UseTreeSetPersona2</code>: comparazione esterna</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.util.*</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseTreeSetPersona2</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// TreeSet è un dettaglio, lavorare sempre sull'interfaccia
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">final</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">Persona</span><span style="color:#000">&gt;</span> <span style="color:#000">set</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">TreeSet</span><span style="color:#000">&lt;&gt;(</span><span style="color:#a90d91">new</span> <span style="color:#000">PersonaComparator</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Rossi"</span><span style="color:#000">,</span> <span style="color:#000">1960</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Bianchi"</span><span style="color:#000">,</span> <span style="color:#000">1980</span><span style="color:#000">,</span> <span style="color:#a90d91">true</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Verdi"</span><span style="color:#000">,</span> <span style="color:#000">1972</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Neri"</span><span style="color:#000">,</span> <span style="color:#000">1972</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Neri"</span><span style="color:#000">,</span> <span style="color:#000">1968</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Iterazione in ordine
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">p</span> <span style="color:#000">:</span> <span style="color:#000">set</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">p</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="perché-il-tipo-comparator-super-e-approfondimento">Perché il tipo <code>Comparator&lt;? super E&gt;</code> (Approfondimento)</h2>
<p>Data una classe <code>SortedSet&lt;E&gt;</code> il suo comparatore ha tipo <code>Comparator&lt;? super E&gt;</code>, perché non semplicemente <code>Comparator&lt;E&gt;</code>?</p>
<h3 id="è-corretto">È corretto</h3>
<ul>
<li><code>Comparator</code> ha metodi che hanno <code>E</code> solo come argomento</li>
<li>quindi l’uso di <code>Comparator&lt;? super E&gt;</code> è una generalizzazione di <code>Comparator&lt;E&gt;</code></li>
</ul>
<h3 id="è-utile">È utile</h3>
<ul>
<li>Supponiamo di aver costruito un comparatore per <code>SimpleLamp</code>, e che questo sia usabile anche per tutte le specializzazioni successivamente costruite (è la situazione tipica)</li>
<li>Anche un <code>SortedSet&lt;UnlimitedLamp&gt;</code> deve poter usare il <code>Comparator&lt;SimpleLamp&gt;</code>, ma questo è possibile solo grazie al suo tipo atteso <code>Comparator&lt;? super E&gt;</code></li>
</ul>
</section><section>
<h2 id="un-esempio-di-design-con-le-collezioni">Un esempio di design con le collezioni</h2>
<p>Implementare questa interfaccia che modella un archivio persone</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">import</span> <span style="color:#000">java.util.Set</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Archive</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">void</span> <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#000">String</span> <span style="color:#000">nome</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">annoNascita</span><span style="color:#000">,</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">sposato</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">void</span> <span style="color:#000">remove</span><span style="color:#000">(</span><span style="color:#000">String</span> <span style="color:#000">nome</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">annoNascita</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">int</span> <span style="color:#000">size</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">allMarried</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="una-soluzione-con-hashset">Una soluzione con <code>HashSet</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">ArchiveImpl</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Archive</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">Persona</span><span style="color:#000">&gt;</span> <span style="color:#000">set</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">HashSet</span><span style="color:#000">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#000">String</span> <span style="color:#000">nome</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">annoNascita</span><span style="color:#000">,</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">sposato</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#000">nome</span><span style="color:#000">,</span> <span style="color:#000">annoNascita</span><span style="color:#000">,</span> <span style="color:#000">sposato</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">remove</span><span style="color:#000">(</span><span style="color:#000">String</span> <span style="color:#000">nome</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">annoNascita</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">set</span><span style="color:#000">.</span><span style="color:#836c28">remove</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#000">nome</span><span style="color:#000">,</span> <span style="color:#000">annoNascita</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">size</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">set</span><span style="color:#000">.</span><span style="color:#836c28">size</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">allMarried</span><span style="color:#000">()</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">newset</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">HashSet</span><span style="color:#000">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">p</span> <span style="color:#000">:</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">set</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">p</span><span style="color:#000">.</span><span style="color:#836c28">isSposato</span><span style="color:#000">())</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>				<span style="color:#000">newset</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">p</span><span style="color:#000">.</span><span style="color:#836c28">getName</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">return</span> <span style="color:#000">newset</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="scenario-duso-dellarchivio">Scenario d’uso dell’archivio</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseArchive</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Archive</span> <span style="color:#000">arc</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArchiveImpl</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">arc</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#c41a16">"Rossi"</span><span style="color:#000">,</span> <span style="color:#000">1960</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">arc</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#c41a16">"Bianchi"</span><span style="color:#000">,</span> <span style="color:#000">1980</span><span style="color:#000">,</span> <span style="color:#a90d91">true</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">arc</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#c41a16">"Verdi"</span><span style="color:#000">,</span> <span style="color:#000">1972</span><span style="color:#000">,</span> <span style="color:#a90d91">true</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">arc</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#c41a16">"Neri"</span><span style="color:#000">,</span> <span style="color:#000">1968</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">arc</span><span style="color:#000">.</span><span style="color:#836c28">remove</span><span style="color:#000">(</span><span style="color:#c41a16">"Neri"</span><span style="color:#000">,</span> <span style="color:#000">1968</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">arc</span><span style="color:#000">.</span><span style="color:#836c28">size</span><span style="color:#000">());</span> <span style="color:#177500">// 3
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">arc</span><span style="color:#000">.</span><span style="color:#836c28">allMarried</span><span style="color:#000">());</span> <span style="color:#177500">// [Bianchi,Verdi]
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h1 id="implementazioni-di-list">Implementazioni di <code>List</code></h1>
</section><section>
<h2 id="implementazione-collezioni----uml-1">Implementazione collezioni – UML</h2>
<p><img src="imgs/uml-abs.png" alt=""></p>
</section><section>
<h2 id="list-1"><code>List</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">List</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Collection</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Additional Bulk Operations 
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#177500">// aggiunge gli elementi in pos. index
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">addAll</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">Collection</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">);</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Positional Access Operations
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">E</span> <span style="color:#000">get</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">E</span> <span style="color:#000">set</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">E</span> <span style="color:#000">element</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">E</span> <span style="color:#000">element</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">E</span> <span style="color:#000">remove</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Search Operations
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">indexOf</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">);</span>	<span style="color:#177500">// basato su Object.equals
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">lastIndexOf</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">);</span>  <span style="color:#177500">// basato su Object.equals
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// List Iterators
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">listIterator</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">listIterator</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// View
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">subList</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">toIndex</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="implementazioni-di-list-1">Implementazioni di <code>List</code></h2>
<h3 id="caratteristiche-delle-liste">Caratteristiche delle liste</h3>
<ul>
<li>Sono sequenze: ogni elemento ha una posizione</li>
<li>$\rightarrow$ Il problema fondamentale è realizzare i metodi posizionali in modo efficiente, considerando il fatto che la lista può modificarsi nel tempo (altrimenti andrebbe bene un array)</li>
</ul>
<h3 id="approccio-1-arraylist">Approccio 1: <code>ArrayList</code></h3>
<p>Internamente usa un array di elementi con capacità maggiore di quella al momento necessaria. Se serve ulteriore spazio si alloca trasparentemente un nuovo e più grande array</p>
<h3 id="approccio-2-linkedlist">Approccio 2: <code>LinkedList</code></h3>
<p>Usa una double-linked list. L’oggetto <code>LinkedList</code> mantiene il riferimento al primo e ultimo elemento della lista, e alla dimensione della lista</p>
</section><section>
<h2 id="arraylist"><code>ArrayList</code></h2>
<h3 id="caratteristiche-di-performance">Caratteristiche di performance</h3>
<ul>
<li>Lettura/scrittura in data posizione sono a tempo costante</li>
<li>La <code>add()</code> è tempo costante ammortizzato, ossia, $n$ add si effettuano in $O(n)$</li>
<li>Tutte le altre operazioni sono a tempo lineare</li>
</ul>
<h3 id="funzionalità-aggiuntive">Funzionalità aggiuntive</h3>
<p>Per migliorare le performance (e l’occupazione in memoria) in taluni casi l’utente esperto può usare funzioni aggiuntive</p>
<ul>
<li>Specificare la dim iniziale dell’array interno nella <code>new</code></li>
<li><code>trimToSize()</code> e <code>ensureCapacity()</code> per modifiche in itinere</li>
</ul>
</section><section>
<h2 id="arraylist-aspetti-aggiuntivi"><code>ArrayList</code>: aspetti aggiuntivi</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">ArrayList</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">extends</span> <span style="color:#000">AbstractList</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">implements</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;,</span> <span style="color:#000">RandomAccess</span><span style="color:#000">,</span> <span style="color:#000">Cloneable</span><span style="color:#000">,</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">io</span><span style="color:#000">.</span><span style="color:#836c28">Serializable</span>
</span></span><span style="display:flex;"><span><span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">ArrayList</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">initialCapacity</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Usa un valore di default per la capacità iniziale (10)
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">public</span> <span style="color:#000">ArrayList</span><span style="color:#000">()</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Riempe coi valori di c
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">public</span> <span style="color:#000">ArrayList</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Riduce la dimensione dell'array interno 
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">trimToSize</span><span style="color:#000">()</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Aumenta la dimensione dell'array interno
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">ensureCapacity</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">minCapacity</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="usearraylist"><code>UseArrayList</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseArrayList</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">ArrayList</span><span style="color:#000">&lt;</span><span style="color:#000">Persona</span><span style="color:#000">&gt;</span> <span style="color:#000">alist</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayList</span><span style="color:#000">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">alist</span><span style="color:#000">.</span><span style="color:#836c28">ensureCapacity</span><span style="color:#000">(</span><span style="color:#000">30</span><span style="color:#000">);</span> <span style="color:#177500">// per performance
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">anno</span> <span style="color:#000">=</span> <span style="color:#000">1960</span><span style="color:#000">;</span> <span style="color:#000">anno</span> <span style="color:#000">&lt;</span> <span style="color:#000">1970</span><span style="color:#000">;</span> <span style="color:#000">anno</span><span style="color:#000">++)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">alist</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Rossi"</span><span style="color:#000">,</span> <span style="color:#000">anno</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">alist</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Bianchi"</span><span style="color:#000">,</span> <span style="color:#000">anno</span><span style="color:#000">,</span> <span style="color:#a90d91">true</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">alist</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Verdi"</span><span style="color:#000">,</span> <span style="color:#000">anno</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">p</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Persona</span><span style="color:#000">(</span><span style="color:#c41a16">"Rossi"</span><span style="color:#000">,</span> <span style="color:#000">1967</span><span style="color:#000">,</span> <span style="color:#a90d91">false</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">int</span> <span style="color:#000">pos</span> <span style="color:#000">=</span> <span style="color:#000">alist</span><span style="color:#000">.</span><span style="color:#836c28">indexOf</span><span style="color:#000">(</span><span style="color:#000">p</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">p</span> <span style="color:#000">+</span> <span style="color:#c41a16">" in position "</span> <span style="color:#000">+</span> <span style="color:#000">pos</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Iteratore da pos fino in fondo.. lo uso per eliminare
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">final</span> <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">Persona</span><span style="color:#000">&gt;</span> <span style="color:#000">iterator</span> <span style="color:#000">=</span> <span style="color:#000">alist</span><span style="color:#000">.</span><span style="color:#836c28">listIterator</span><span style="color:#000">(</span><span style="color:#000">pos</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">while</span> <span style="color:#000">(</span><span style="color:#000">iterator</span><span style="color:#000">.</span><span style="color:#836c28">hasNext</span><span style="color:#000">())</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">iterator</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">iterator</span><span style="color:#000">.</span><span style="color:#836c28">remove</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Persona</span> <span style="color:#000">p2</span> <span style="color:#000">:</span> <span style="color:#000">alist</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">alist</span><span style="color:#000">.</span><span style="color:#836c28">indexOf</span><span style="color:#000">(</span><span style="color:#000">p2</span><span style="color:#000">)</span> <span style="color:#000">+</span> <span style="color:#c41a16">"\t"</span> <span style="color:#000">+</span> <span style="color:#000">p2</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">alist</span><span style="color:#000">.</span><span style="color:#836c28">trimToSize</span><span style="color:#000">();</span> <span style="color:#177500">// riduco le dimensioni
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="linkedlist"><code>LinkedList</code></h2>
<h3 id="caratteristiche-di-performance-1">Caratteristiche di performance</h3>
<ul>
<li>Accesso e modifica in una data posizione hanno costo lineare</li>
<li>Operazioni in testa o coda, quindi, sono a tempo costante</li>
<li>Usa in generale meglio la memoria rispetto <code>ArrayList</code></li>
<li>(di norma però si preferisce <code>ArrayList</code>)</li>
</ul>
<h3 id="funzionalità-aggiuntive-1">Funzionalità aggiuntive</h3>
<ul>
<li>Implementa anche l’interfaccia <code>Deque</code>, usata per rappresentare una coda bidirezionale, potenzialmente con dimensione limitata</li>
</ul>
</section><section>
<h2 id="linkedlist-funzioni-aggiuntive-relative-a-code-e-stack"><code>LinkedList</code>: funzioni aggiuntive relative a code (e stack)</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Queue</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Collection</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">offer</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">);</span> <span style="color:#177500">// inserisce se c'è spazio
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">E</span> <span style="color:#000">poll</span><span style="color:#000">();</span>		<span style="color:#177500">// preleva se c'è il primo
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">E</span> <span style="color:#000">element</span><span style="color:#000">();</span>        <span style="color:#177500">// legge se c'è il primo, altrimenti eccezione
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">E</span> <span style="color:#000">peek</span><span style="color:#000">();</span>		<span style="color:#177500">// legge se c'è il primo, altrimenti null
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span><span style="color:#000">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Deque</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Queue</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">addFirst</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">addLast</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">offerFirst</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">offerLast</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">E</span> <span style="color:#000">removeFirst</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">E</span> <span style="color:#000">removeLast</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">E</span> <span style="color:#000">pollFirst</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">E</span> <span style="color:#000">pollLast</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">E</span> <span style="color:#000">getFirst</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">E</span> <span style="color:#000">getLast</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">E</span> <span style="color:#000">peekFirst</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">E</span> <span style="color:#000">peekLast</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">removeFirstOccurrence</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">removeLastOccurrence</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">push</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">);</span> <span style="color:#177500">// identical to addFirst()
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">E</span> <span style="color:#000">pop</span><span style="color:#000">();</span>        <span style="color:#177500">// identical to removeFirst()
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="linkedlist-costruzione"><code>LinkedList</code>: costruzione</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">LinkedList</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">extends</span> <span style="color:#000">AbstractSequentialList</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">implements</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;,</span> <span style="color:#000">Deque</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;,</span> <span style="color:#000">Cloneable</span><span style="color:#000">,</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">io</span><span style="color:#000">.</span><span style="color:#836c28">Serializable</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">LinkedList</span><span style="color:#000">()</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#000">LinkedList</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="uselinkedlist"><code>UseLinkedList</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseLinkedList</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">ELEMS</span> <span style="color:#000">=</span> <span style="color:#c41a16">"A B C D E F G H I L M"</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">LinkedList</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">llist</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">LinkedList</span><span style="color:#000">&lt;&gt;(</span><span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">asList</span><span style="color:#000">(</span><span style="color:#000">ELEMS</span><span style="color:#000">.</span><span style="color:#836c28">split</span><span style="color:#000">(</span><span style="color:#c41a16">" "</span><span style="color:#000">)));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">llist</span><span style="color:#000">.</span><span style="color:#836c28">addFirst</span><span style="color:#000">(</span><span style="color:#c41a16">"*"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">llist</span><span style="color:#000">.</span><span style="color:#836c28">addLast</span><span style="color:#000">(</span><span style="color:#c41a16">"*"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">llist</span><span style="color:#000">.</span><span style="color:#836c28">removeFirstOccurrence</span><span style="color:#000">(</span><span style="color:#c41a16">"*"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">llist</span><span style="color:#000">.</span><span style="color:#836c28">removeLastOccurrence</span><span style="color:#000">(</span><span style="color:#c41a16">"*"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// bad performance
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#000">llist</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">llist</span><span style="color:#000">.</span><span style="color:#836c28">indexOf</span><span style="color:#000">(</span><span style="color:#c41a16">"L"</span><span style="color:#000">),</span> <span style="color:#c41a16">"K"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// better performance
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">final</span> <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">it</span> <span style="color:#000">=</span> <span style="color:#000">llist</span><span style="color:#000">.</span><span style="color:#836c28">listIterator</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">while</span> <span style="color:#000">(</span><span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">hasNext</span><span style="color:#000">())</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">().</span><span style="color:#836c28">equals</span><span style="color:#000">(</span><span style="color:#c41a16">"I"</span><span style="color:#000">))</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>				<span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#c41a16">"J"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>				<span style="color:#a90d91">break</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a90d91">final</span> <span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">str</span> <span style="color:#000">=</span> <span style="color:#000">llist</span><span style="color:#000">.</span><span style="color:#836c28">toArray</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">String</span><span style="color:#000">[</span><span style="color:#000">0</span><span style="color:#000">]);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">toString</span><span style="color:#000">(</span><span style="color:#000">str</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h1 id="altre-classi-di-utilità-arrays-e-collections">Altre classi di utilità: <code>Arrays</code> e <code>Collections</code></h1>
</section><section>
<h2 id="classi-di-utilità-moduli-arrays-e-collections">Classi di utilità (moduli): <code>Arrays</code> e <code>Collections</code></h2>
<h3 id="javautilarrays"><code>java.util.Arrays</code></h3>
<ul>
<li>Contiene varie funzionalità d’ausilio alla gestione degli array</li>
<li>In genere ha varie versione dei metodi per ogni array di tipo primitivo</li>
<li>Ricerca binaria (dicotomica), Ordinamento (quicksort), copia</li>
<li>Operazioni base (<code>toString</code>, <code>equals</code>, <code>hashCode</code>), anche ricorsive</li>
</ul>
<h3 id="javautilcollections"><code>java.util.Collections</code></h3>
<ul>
<li>Raccoglie metodi statici che sarebbero potuti appartenere alle varie classi/interfacce viste</li>
<li>Ricerca binaria (dicotomica), Ordinamento (quicksort), copia, min, max, sublist, replace, reverse, rotate, shuffle</li>
<li>Con esempi notevoli d’uso delle wilcard</li>
</ul>
</section><section>
<h2 id="arrays-qualche-esempio-di-metodi"><code>Arrays</code>: qualche esempio di metodi</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Arrays</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">sort</span><span style="color:#000">(</span><span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">a</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">toIndex</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">void</span> <span style="color:#000">sort</span><span style="color:#000">(</span><span style="color:#000">T</span><span style="color:#000">[]</span> <span style="color:#000">a</span><span style="color:#000">,</span> <span style="color:#000">Comparator</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">binarySearch</span><span style="color:#000">(</span><span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">a</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">key</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">binarySearch</span><span style="color:#000">(</span><span style="color:#a90d91">char</span><span style="color:#000">[]</span> <span style="color:#000">a</span><span style="color:#000">,</span> <span style="color:#a90d91">char</span> <span style="color:#000">key</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">int</span> <span style="color:#000">binarySearch</span><span style="color:#000">(</span><span style="color:#000">T</span><span style="color:#000">[]</span> <span style="color:#000">a</span><span style="color:#000">,</span> <span style="color:#000">T</span> <span style="color:#000">key</span><span style="color:#000">,</span> <span style="color:#000">Comparator</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">asList</span><span style="color:#000">(</span><span style="color:#000">T</span><span style="color:#000">...</span> <span style="color:#000">a</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">T</span><span style="color:#000">[]</span> <span style="color:#000">copyOfRange</span><span style="color:#000">(</span><span style="color:#000">T</span><span style="color:#000">[]</span> <span style="color:#000">original</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">from</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">to</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">fill</span><span style="color:#000">(</span><span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">a</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">from</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">to</span><span style="color:#000">,</span> <span style="color:#000">Object</span> <span style="color:#000">val</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    	
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">deepEquals</span><span style="color:#000">(</span><span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">a1</span><span style="color:#000">,</span> <span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">a2</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">deepHashCode</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">a</span><span style="color:#000">[])</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#000">String</span> <span style="color:#000">deepToString</span><span style="color:#000">(</span><span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">a</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#000">String</span> <span style="color:#000">toString</span><span style="color:#000">(</span><span style="color:#a90d91">long</span><span style="color:#000">[]</span> <span style="color:#000">a</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#000">String</span> <span style="color:#000">toString</span><span style="color:#000">(</span><span style="color:#a90d91">int</span><span style="color:#000">[]</span> <span style="color:#000">a</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#000">String</span> <span style="color:#000">toString</span><span style="color:#000">(</span><span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">a</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="usearrays-qualche-esempio-di-applicazione"><code>UseArrays</code>: qualche esempio di applicazione</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseArrays</span> <span style="color:#a90d91">implements</span> <span style="color:#000">Comparator</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">compare</span><span style="color:#000">(</span><span style="color:#000">Integer</span> <span style="color:#000">a</span><span style="color:#000">,</span> <span style="color:#000">Integer</span> <span style="color:#000">b</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">return</span> <span style="color:#000">b</span><span style="color:#000">.</span><span style="color:#836c28">compareTo</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">);</span> <span style="color:#177500">// ordine inverso
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">array</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">{</span> <span style="color:#c41a16">"a"</span><span style="color:#000">,</span> <span style="color:#c41a16">"b"</span><span style="color:#000">,</span> <span style="color:#c41a16">"c"</span><span style="color:#000">,</span> <span style="color:#c41a16">"d"</span><span style="color:#000">,</span> <span style="color:#c41a16">"e"</span><span style="color:#000">,</span> <span style="color:#c41a16">"f"</span> <span style="color:#000">};</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">list</span> <span style="color:#000">=</span> <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">asList</span><span style="color:#000">(</span><span style="color:#c41a16">"a"</span><span style="color:#000">,</span> <span style="color:#c41a16">"b"</span><span style="color:#000">,</span> <span style="color:#c41a16">"c"</span><span style="color:#000">,</span> <span style="color:#c41a16">"d"</span><span style="color:#000">,</span> <span style="color:#c41a16">"e"</span><span style="color:#000">,</span> <span style="color:#c41a16">"f"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">final</span> <span style="color:#000">Integer</span><span style="color:#000">[]</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Integer</span><span style="color:#000">[</span><span style="color:#000">20</span><span style="color:#000">];</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">0</span><span style="color:#000">;</span> <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">20</span><span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">++)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">a</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span><span style="color:#000">)</span> <span style="color:#000">(</span><span style="color:#000">Math</span><span style="color:#000">.</span><span style="color:#836c28">random</span><span style="color:#000">()</span> <span style="color:#000">*</span> <span style="color:#000">100</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"rand: "</span> <span style="color:#000">+</span> <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">toString</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">sort</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">);</span> <span style="color:#177500">// sort in ordine naturale
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"sort1: "</span> <span style="color:#000">+</span> <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">toString</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">sort</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span> <span style="color:#a90d91">new</span> <span style="color:#000">UseArrays</span><span style="color:#000">());</span> <span style="color:#177500">// sort col comparator
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"sort2: "</span> <span style="color:#000">+</span> <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">toString</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">fill</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span> <span style="color:#000">10</span><span style="color:#000">,</span> <span style="color:#000">15</span><span style="color:#000">,</span> <span style="color:#000">0</span><span style="color:#000">);</span> <span style="color:#177500">// fill nel range
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"fill: "</span> <span style="color:#000">+</span> <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">toString</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">final</span> <span style="color:#000">Integer</span><span style="color:#000">[][]</span> <span style="color:#000">b</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Integer</span><span style="color:#000">[</span><span style="color:#000">10</span><span style="color:#000">][];</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">fill</span><span style="color:#000">(</span><span style="color:#000">b</span><span style="color:#000">,</span> <span style="color:#000">a</span><span style="color:#000">);</span> <span style="color:#177500">// fill di un array di array
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"recu: "</span> <span style="color:#000">+</span> <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">deepToString</span><span style="color:#000">(</span><span style="color:#000">b</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="collections-qualche-esempio-di-metodi"><code>Collections</code>: qualche esempio di metodi</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#177500">// nota: tutti metodi public static!!
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">Collections</span> <span style="color:#000">{</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// ordinamenti e varie
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">&lt;</span><span style="color:#000">T</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Comparable</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;&gt;</span> <span style="color:#a90d91">void</span> <span style="color:#000">sort</span><span style="color:#000">(</span><span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">list</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">void</span> <span style="color:#000">sort</span><span style="color:#000">(</span><span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">list</span><span style="color:#000">,</span> <span style="color:#000">Comparator</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">int</span> <span style="color:#000">binarySearch</span><span style="color:#000">(</span><span style="color:#000">List</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">Comparable</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;&gt;</span> <span style="color:#000">list</span><span style="color:#000">,</span> <span style="color:#000">T</span> <span style="color:#000">key</span><span style="color:#000">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">T</span> <span style="color:#000">min</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">coll</span><span style="color:#000">,</span> <span style="color:#000">Comparator</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">comp</span><span style="color:#000">)</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// modifiche
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">void</span> <span style="color:#000">reverse</span><span style="color:#000">(</span><span style="color:#000">List</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">list</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">shuffle</span><span style="color:#000">(</span><span style="color:#000">List</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">list</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">void</span> <span style="color:#000">fill</span><span style="color:#000">(</span><span style="color:#000">List</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">list</span><span style="color:#000">,</span> <span style="color:#000">T</span> <span style="color:#000">obj</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#a90d91">void</span> <span style="color:#000">copy</span><span style="color:#000">(</span><span style="color:#000">List</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">dest</span><span style="color:#000">,</span> <span style="color:#000">List</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">src</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// letture varie
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">indexOfSubList</span><span style="color:#000">(</span><span style="color:#000">List</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">source</span><span style="color:#000">,</span> <span style="color:#000">List</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">target</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">disjoint</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">c1</span><span style="color:#000">,</span> <span style="color:#000">Collection</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">c2</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">int</span> <span style="color:#000">frequency</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">c</span><span style="color:#000">,</span> <span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// costruzioni di collezioni
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">emptyList</span><span style="color:#000">()</span> <span style="color:#000">{...}</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">emptySet</span><span style="color:#000">()</span> <span style="color:#000">{...}</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">nCopies</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">n</span><span style="color:#000">,</span> <span style="color:#000">T</span> <span style="color:#000">o</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">singleton</span><span style="color:#000">(</span><span style="color:#000">T</span> <span style="color:#000">o</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">singletonList</span><span style="color:#000">(</span><span style="color:#000">T</span> <span style="color:#000">o</span><span style="color:#000">)</span> <span style="color:#000">{...}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="usecollections-qualche-esempio-di-applicazione"><code>UseCollections</code>: qualche esempio di applicazione</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseCollections</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">s</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">list</span> <span style="color:#000">=</span> <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">asList</span><span style="color:#000">(</span><span style="color:#a90d91">new</span> <span style="color:#000">Integer</span><span style="color:#000">[]</span> <span style="color:#000">{</span> <span style="color:#000">0</span><span style="color:#000">,</span> <span style="color:#000">1</span><span style="color:#000">,</span> <span style="color:#000">2</span><span style="color:#000">,</span> <span style="color:#000">3</span><span style="color:#000">,</span> <span style="color:#000">4</span> <span style="color:#000">});</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">final</span> <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;&gt;</span> <span style="color:#000">set</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">HashSet</span><span style="color:#000">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">0</span><span style="color:#000">;</span> <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">5</span><span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">++)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">l2</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayList</span><span style="color:#000">&lt;&gt;(</span><span style="color:#000">list</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">Collections</span><span style="color:#000">.</span><span style="color:#836c28">shuffle</span><span style="color:#000">(</span><span style="color:#000">l2</span><span style="color:#000">);</span><span style="color:#177500">// permuto
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>            <span style="color:#a90d91">if</span> <span style="color:#000">(!</span><span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">contains</span><span style="color:#000">(</span><span style="color:#000">l2</span><span style="color:#000">))</span> <span style="color:#000">{</span> <span style="color:#177500">// no duplicazione!
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>                <span style="color:#000">set</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">l2</span><span style="color:#000">);</span> <span style="color:#177500">// aggiungo
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>            <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"shuf: "</span> <span style="color:#000">+</span> <span style="color:#000">set</span><span style="color:#000">);</span> <span style="color:#177500">// [[4,1,2,3,0],[3,1,4,0,2],..
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">int</span> <span style="color:#000">ct</span> <span style="color:#000">=</span> <span style="color:#000">0</span><span style="color:#000">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">l</span> <span style="color:#000">:</span> <span style="color:#000">set</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">Collections</span><span style="color:#000">.</span><span style="color:#836c28">fill</span><span style="color:#000">(</span><span style="color:#000">l</span><span style="color:#000">,</span> <span style="color:#000">ct</span><span style="color:#000">++);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"inc: "</span> <span style="color:#000">+</span> <span style="color:#000">set</span><span style="color:#000">);</span> <span style="color:#177500">// [[0,0,0,0,0],[1,1,1,1,1],..
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"cop: "</span> <span style="color:#000">+</span> <span style="color:#000">Collections</span><span style="color:#000">.</span><span style="color:#836c28">nCopies</span><span style="color:#000">(</span><span style="color:#000">5</span><span style="color:#000">,</span> <span style="color:#000">list</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#177500">// [[0,1,2,3,4],[0,1,2,3,4],..
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h1 id="javautilmap-aka-mappe-associative-o-dizionari"><code>java.util.Map</code>: a.k.a. mappe associative o dizionari</h1>
</section><section>
<h2 id="jcf----struttura-semplificata">JCF – struttura semplificata</h2>
<p><img src="imgs/tax.png" alt=""></p>
</section><section>
<h2 id="map"><code>Map</code></h2>
<ul>
<li>Una <strong>mappa</strong> (anche detta <strong>mappa associativa</strong> o <strong>dizionario</strong>) è una corrispondenza tra <strong>chiavi</strong> e <strong>valori</strong>, dove le chiavi (e quindi le coppie) formano un set (non ci sono chiavi duplicate)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">interface</span> <span style="color:#3f6e75">Map</span><span style="color:#000">&lt;</span><span style="color:#000">K</span><span style="color:#000">,</span><span style="color:#000">V</span><span style="color:#000">&gt;</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Query Operations
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">size</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">isEmpty</span><span style="color:#000">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">containsKey</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">key</span><span style="color:#000">);</span>        <span style="color:#177500">// usa Object.equals
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">boolean</span> <span style="color:#000">containsValue</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">value</span><span style="color:#000">);</span>    <span style="color:#177500">// usa Object.equals
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">V</span> <span style="color:#000">get</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">key</span><span style="color:#000">);</span>                      <span style="color:#177500">// accesso a valore
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Modification Operations
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">V</span> <span style="color:#000">put</span><span style="color:#000">(</span><span style="color:#000">K</span> <span style="color:#000">key</span><span style="color:#000">,</span> <span style="color:#000">V</span> <span style="color:#000">value</span><span style="color:#000">);</span>          <span style="color:#177500">// inserimento chiave-valore
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">V</span> <span style="color:#000">remove</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">key</span><span style="color:#000">);</span>           <span style="color:#177500">// rimozione chiave(-valore)
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Bulk Operations
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#a90d91">void</span> <span style="color:#000">putAll</span><span style="color:#000">(</span><span style="color:#000">Map</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">K</span><span style="color:#000">,</span> <span style="color:#000">?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">V</span><span style="color:#000">&gt;</span> <span style="color:#000">m</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a90d91">void</span> <span style="color:#000">clear</span><span style="color:#000">();</span>                   <span style="color:#177500">// cancella tutti
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#177500">// Views
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">Set</span><span style="color:#000">&lt;</span><span style="color:#000">K</span><span style="color:#000">&gt;</span> <span style="color:#000">keySet</span><span style="color:#000">();</span>                    <span style="color:#177500">// set di valori
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    <span style="color:#000">Collection</span><span style="color:#000">&lt;</span><span style="color:#000">V</span><span style="color:#000">&gt;</span> <span style="color:#000">values</span><span style="color:#000">();</span>             <span style="color:#177500">// collezione di chiavi
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#000">...</span> <span style="color:#177500">// qualche altro
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span><span style="color:#000">}</span>
</span></span></code></pre></div></section><section>
<h2 id="due-implementazioni-di-map-e-abstractmap">Due implementazioni di <code>Map</code> e <code>AbstractMap</code></h2>
<h3 id="mapkv"><code>Map&lt;K,V&gt;</code></h3>
<ul>
<li>Rappresenta una funzione dal dominio <code>K</code> in <code>V</code></li>
<li>La mappa tiene tutte le associazioni (o “entry”)</li>
<li>Non posso esistere due entry con stessa chiave (<code>Object.equals</code>)</li>
</ul>
<h3 id="hashmap"><code>HashMap</code></h3>
<ul>
<li>Sostanzialmente un <code>HashSet</code> di coppie <code>Key</code>, <code>Value</code></li>
<li>L’accesso ad un valore tramite la chiave è fatto con hashing</li>
<li>Accesso a tempo costante, a discapito di overhead in memoria</li>
</ul>
<h3 id="treemap"><code>TreeMap</code></h3>
<ul>
<li>Sostanzialmente un <code>TreeSet</code> di coppie <code>Key</code>, <code>Value</code></li>
<li>L’accesso ad un valore tramite la chiave è fatto con red-black tree</li>
<li>Accesso in tempo logaritmico</li>
<li>Le chiavi devono essere ordinate, come per i <code>TreeSet</code></li>
</ul>
</section><section>
<h2 id="usare-le-mappe">Usare le mappe</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#a90d91">public</span> <span style="color:#a90d91">class</span> <span style="color:#3f6e75">UseMap</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a90d91">public</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">void</span> <span style="color:#000">main</span><span style="color:#000">(</span><span style="color:#000">String</span><span style="color:#000">[]</span> <span style="color:#000">args</span><span style="color:#000">)</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Uso una incarnazione, ma poi lavoro sull'interfaccia
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">final</span> <span style="color:#000">Map</span><span style="color:#000">&lt;</span><span style="color:#000">Integer</span><span style="color:#000">,</span> <span style="color:#000">String</span><span style="color:#000">&gt;</span> <span style="color:#000">map</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">HashMap</span><span style="color:#000">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// Una mappa è una funzione discreta
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#000">map</span><span style="color:#000">.</span><span style="color:#836c28">put</span><span style="color:#000">(</span><span style="color:#000">345211</span><span style="color:#000">,</span> <span style="color:#c41a16">"Bianchi"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">map</span><span style="color:#000">.</span><span style="color:#836c28">put</span><span style="color:#000">(</span><span style="color:#000">345122</span><span style="color:#000">,</span> <span style="color:#c41a16">"Rossi"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">map</span><span style="color:#000">.</span><span style="color:#836c28">put</span><span style="color:#000">(</span><span style="color:#000">243001</span><span style="color:#000">,</span> <span style="color:#c41a16">"Verdi"</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#000">map</span><span style="color:#000">);</span> <span style="color:#177500">// {345211=Bianchi, 243001=Verdi, 345122=Rossi}
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#000">map</span><span style="color:#000">.</span><span style="color:#836c28">put</span><span style="color:#000">(</span><span style="color:#000">243001</span><span style="color:#000">,</span> <span style="color:#c41a16">"Neri"</span><span style="color:#000">);</span> <span style="color:#177500">// Rimpiazza Verdi
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">final</span> <span style="color:#000">Map</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">,</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">map2</span> <span style="color:#000">=</span> <span style="color:#000">Map</span><span style="color:#000">.</span><span style="color:#836c28">of</span><span style="color:#000">(</span><span style="color:#c41a16">"foo"</span><span style="color:#000">,</span> <span style="color:#000">5</span><span style="color:#000">,</span> <span style="color:#c41a16">"bar"</span><span style="color:#000">,</span> <span style="color:#000">7</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// modo prestante per accedere alle coppie
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">for</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Map</span><span style="color:#000">.</span><span style="color:#836c28">Entry</span><span style="color:#000">&lt;</span><span style="color:#000">String</span><span style="color:#000">,</span><span style="color:#000">Integer</span><span style="color:#000">&gt;</span> <span style="color:#000">kv</span> <span style="color:#000">:</span> <span style="color:#000">map2</span><span style="color:#000">.</span><span style="color:#836c28">entrySet</span><span style="color:#000">())</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Chiave: "</span> <span style="color:#000">+</span> <span style="color:#000">kv</span><span style="color:#000">.</span><span style="color:#836c28">getKey</span><span style="color:#000">()</span> <span style="color:#000">+</span> <span style="color:#c41a16">" Valore: "</span> <span style="color:#000">+</span> <span style="color:#000">kv</span><span style="color:#000">.</span><span style="color:#836c28">getValue</span><span style="color:#000">());</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// modo poco prestante per accedere alle coppie chiave-valore
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">Integer</span> <span style="color:#000">i</span> <span style="color:#000">:</span> <span style="color:#000">map</span><span style="color:#000">.</span><span style="color:#836c28">keySet</span><span style="color:#000">())</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Chiave: "</span> <span style="color:#000">+</span> <span style="color:#000">i</span> <span style="color:#000">+</span> <span style="color:#c41a16">" Valore: "</span> <span style="color:#000">+</span> <span style="color:#000">map</span><span style="color:#000">.</span><span style="color:#836c28">get</span><span style="color:#000">(</span><span style="color:#000">i</span><span style="color:#000">));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#177500">// modo prestante per accedere ai soli valori
</span></span></span><span style="display:flex;"><span><span style="color:#177500"></span>		<span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#000">String</span> <span style="color:#000">s</span> <span style="color:#000">:</span> <span style="color:#000">map</span><span style="color:#000">.</span><span style="color:#836c28">values</span><span style="color:#000">())</span> <span style="color:#000">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">out</span><span style="color:#000">.</span><span style="color:#836c28">println</span><span style="color:#000">(</span><span style="color:#c41a16">"Valore: "</span> <span style="color:#000">+</span> <span style="color:#000">s</span><span style="color:#000">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000">}</span>
</span></span></code></pre></div></section>

  


</div>
      

    </div>
<script type="text/javascript" src="/reveal-hugo/object-assign.js"></script>

<a href="/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"900","highlight_theme":"default","history":true,"mermaid":[{"startOnLoad":false}],"slide_number":true,"theme":"white","transition":"slide","transition_speed":"fast","width":"1440"}</script>
<script type="application/json" id="reveal-hugo-page-params">null</script>

<script src="/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }
  
  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = { 
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>










  <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({"startOnLoad":false});

    let render = (event) => {
      let mermaidElems = event.currentSlide.querySelectorAll('.mermaid');
      if (!mermaidElems.length){
          return
      }
      mermaidElems.forEach(mermaidElem => {
          let processed = mermaidElem.getAttribute('data-processed');
          if (!processed){
              
              mermaid.init(undefined, mermaidElem);
          }
      });
    };
    Reveal.addEventListener('slidechanged', render);
    Reveal.addEventListener('ready', render);
  </script>

    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<script>
  if (/.*?(\?|&)print-pdf/.test(window.location.toString())) {
      var ytVideos = document.getElementsByTagName("iframe")
      for (let i = 0; i < ytVideos.length; i++) {
          var videoFrame = ytVideos[i]
          var isYouTube = /^https?:\/\/(www.)youtube\.com\/.*/.test(videoFrame.src)
          if (isYouTube) {
              console.log(`Removing ${videoFrame.src}`)
              var parent = videoFrame.parentElement
              videoFrame.remove()
              var p = document.createElement('p')
              p.append(
                  document.createTextNode(
                      "There was an embedded video here, but it is disabled in the printed version of the slides."
                  )
              )
              p.append(document.createElement('br'))
              p.append(
                  document.createTextNode(
                      `Visit instead ${
                          videoFrame.src
                      } or ${
                          videoFrame.src.replace(
                              /(^https?:\/\/(www.)youtube\.com)\/(embed\/)(\w+).*/,
                              "https://www.youtube.com/watch?v=$4"
                          )
                      }`
                  )
              )
              parent.appendChild(p)
          }
      }
  }
</script>

    
  

</body></html>